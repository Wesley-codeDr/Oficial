[{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(auth)/forgot-password/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(auth)/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(auth)/login/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(auth)/login/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(auth)/register/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/anamnese/[syndrome]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/chat/[id]/delete-button.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":40,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState, useTransition } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { Trash2 } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { useToast } from '@/hooks/use-toast'\n\ninterface DeleteConversationButtonProps {\n  conversationId: string\n}\n\nexport function DeleteConversationButton({ conversationId }: DeleteConversationButtonProps) {\n  const router = useRouter()\n  const { toast } = useToast()\n  const [isPending, startTransition] = useTransition()\n\n  const handleDelete = async () => {\n    if (!window.confirm('Tem certeza que deseja excluir esta conversa?')) {\n      return\n    }\n\n    startTransition(async () => {\n      try {\n        const response = await fetch(`/api/chat/conversations/${conversationId}`, {\n          method: 'DELETE',\n        })\n\n        if (!response.ok) {\n          throw new Error('Failed to delete conversation')\n        }\n\n        toast({\n          title: 'Conversa excluida',\n          description: 'A conversa foi excluida com sucesso.',\n        })\n\n        router.push('/chat')\n        router.refresh()\n      } catch (error) {\n        toast({\n          title: 'Erro',\n          description: 'Nao foi possivel excluir a conversa.',\n          variant: 'destructive',\n        })\n      }\n    })\n  }\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={handleDelete}\n      disabled={isPending}\n      className=\"text-muted-foreground hover:text-destructive\"\n    >\n      <Trash2 className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Excluir conversa</span>\n    </Button>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/chat/[id]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'buildMinimalContext' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'params' is defined but never used. Allowed unused args must match /^_/u.","line":16,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Metadata } from 'next'\nimport { notFound, redirect } from 'next/navigation'\nimport Link from 'next/link'\nimport { ArrowLeft, Trash2 } from 'lucide-react'\nimport { prisma } from '@/lib/db/prisma'\nimport { getUser } from '@/lib/supabase/server'\nimport { Button } from '@/components/ui/button'\nimport { ChatInterface } from '@/components/chat/chat-interface'\nimport { buildMinimalContext } from '@/lib/ai/context'\nimport { DeleteConversationButton } from './delete-button'\n\ninterface ChatPageProps {\n  params: Promise<{ id: string }>\n}\n\nexport async function generateMetadata({ params }: ChatPageProps): Promise<Metadata> {\n  return {\n    title: 'Chat EBM | WellWave',\n    description: 'Conversa com o assistente EBM.',\n  }\n}\n\nasync function getConversation(id: string, userId: string) {\n  return prisma.chatConversation.findUnique({\n    where: { id, userId },\n    include: {\n      messages: {\n        orderBy: { createdAt: 'asc' },\n      },\n      session: {\n        select: {\n          id: true,\n          generatedText: true,\n          syndrome: {\n            select: { name: true, code: true, description: true },\n          },\n        },\n      },\n    },\n  })\n}\n\nexport default async function ChatPage({ params }: ChatPageProps) {\n  const user = await getUser()\n  if (!user) {\n    redirect('/login')\n  }\n\n  const { id } = await params\n  const conversation = await getConversation(id, user.id)\n\n  if (!conversation) {\n    notFound()\n  }\n\n  // Build context summary for display\n  let contextSummary: string | undefined\n  if (conversation.contextSnapshot) {\n    const snapshot = conversation.contextSnapshot as {\n      syndromeName: string\n      checkedItems: Array<{ displayText: string; isRedFlag: boolean }>\n      redFlags: string[]\n    }\n\n    const redFlagCount = snapshot.redFlags?.length || 0\n    contextSummary = `${snapshot.syndromeName}${redFlagCount > 0 ? ` (${redFlagCount} sinais de alarme)` : ''}`\n  } else if (conversation.session) {\n    contextSummary = conversation.session.syndrome.name\n  }\n\n  // Format messages for chat interface\n  const initialMessages = conversation.messages.map((msg) => ({\n    id: msg.id,\n    role: msg.role === 'USER' ? 'user' as const : 'assistant' as const,\n    content: msg.content,\n    createdAt: msg.createdAt,\n  }))\n\n  return (\n    <div className=\"flex h-[calc(100vh-4rem)] flex-col\">\n      {/* Header */}\n      <div className=\"flex shrink-0 items-center justify-between border-b px-4 py-3\">\n        <div className=\"flex items-center gap-3\">\n          <Button variant=\"ghost\" size=\"icon\" asChild>\n            <Link href=\"/chat\">\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Link>\n          </Button>\n          <div>\n            <h1 className=\"font-semibold\">Chat EBM</h1>\n            {contextSummary && (\n              <p className=\"text-sm text-muted-foreground\">{contextSummary}</p>\n            )}\n          </div>\n        </div>\n        <DeleteConversationButton conversationId={id} />\n      </div>\n\n      {/* Chat Interface */}\n      <ChatInterface\n        conversationId={id}\n        initialMessages={initialMessages}\n        contextSummary={contextSummary}\n        className=\"flex-1\"\n      />\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/chat/new-chat-button.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState, useTransition } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { Plus } from 'lucide-react'\nimport { Button, type ButtonProps } from '@/components/ui/button'\n\ninterface NewChatButtonProps {\n  sessionId?: string\n  variant?: ButtonProps['variant']\n}\n\nexport function NewChatButton({ sessionId, variant = 'outline' }: NewChatButtonProps) {\n  const router = useRouter()\n  const [isPending, startTransition] = useTransition()\n\n  const handleNewChat = async () => {\n    startTransition(async () => {\n      try {\n        const response = await fetch('/api/chat/conversations', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ sessionId }),\n        })\n\n        if (!response.ok) {\n          throw new Error('Failed to create conversation')\n        }\n\n        const conversation = await response.json()\n        router.push(`/chat/${conversation.id}`)\n      } catch (error) {\n        console.error('Error creating conversation:', error)\n      }\n    })\n  }\n\n  return (\n    <Button variant={variant} onClick={handleNewChat} disabled={isPending}>\n      <Plus className=\"mr-2 h-4 w-4\" />\n      {isPending ? 'Criando...' : 'Nova Conversa'}\n    </Button>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/chat/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Metadata } from 'next'\nimport Link from 'next/link'\nimport { prisma } from '@/lib/db/prisma'\nimport { getUser } from '@/lib/supabase/server'\nimport { redirect } from 'next/navigation'\nimport { MessageSquare, Plus, ChevronRight } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { GlassCard } from '@/components/ui/glass-card'\nimport { formatDistanceToNow } from '@/lib/utils'\nimport { NewChatButton } from './new-chat-button'\n\nexport const metadata: Metadata = {\n  title: 'Chat EBM | WellWave',\n  description: 'Assistente de suporte a decisao clinica baseado em evidencias.',\n}\n\nasync function getConversations() {\n  const user = await getUser()\n  if (!user) return []\n\n  return prisma.chatConversation.findMany({\n    where: { userId: user.id },\n    orderBy: { updatedAt: 'desc' },\n    take: 20,\n    include: {\n      session: {\n        select: {\n          syndrome: {\n            select: { name: true, code: true },\n          },\n        },\n      },\n      messages: {\n        take: 1,\n        orderBy: { createdAt: 'asc' },\n        where: { role: 'USER' },\n      },\n      _count: {\n        select: { messages: true },\n      },\n    },\n  })\n}\n\nexport default async function ChatListPage() {\n  const user = await getUser()\n  if (!user) {\n    redirect('/login')\n  }\n\n  const conversations = await getConversations()\n\n  return (\n    <div className=\"container mx-auto max-w-4xl space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"space-y-1\">\n          <h1 className=\"text-3xl font-bold tracking-tight\">Chat EBM</h1>\n          <p className=\"text-muted-foreground\">\n            Assistente de suporte a decisao clinica baseado em evidencias.\n          </p>\n        </div>\n        <NewChatButton />\n      </div>\n\n      {/* Warning Banner */}\n      <GlassCard hover={false} className=\"border-yellow-500/50 bg-yellow-50/50 p-4 dark:bg-yellow-900/10\">\n        <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n          <strong>Aviso:</strong> Este assistente e para suporte a decisao clinica.\n          Todas as respostas sao baseadas em evidencias cientificas, mas o julgamento\n          clinico do medico deve sempre prevalecer.\n        </p>\n      </GlassCard>\n\n      {/* Conversations List */}\n      {conversations.length === 0 ? (\n        <GlassCard hover={false} className=\"p-8 text-center\">\n          <div className=\"space-y-4\">\n            <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-muted\">\n              <MessageSquare className=\"h-8 w-8 text-muted-foreground\" />\n            </div>\n            <div className=\"space-y-2\">\n              <h2 className=\"text-xl font-semibold\">Nenhuma conversa ainda</h2>\n              <p className=\"text-muted-foreground\">\n                Inicie uma nova conversa para tirar duvidas clinicas.\n              </p>\n            </div>\n            <NewChatButton variant=\"primary\" />\n          </div>\n        </GlassCard>\n      ) : (\n        <div className=\"space-y-3\">\n          {conversations.map((conversation) => {\n            const firstMessage = conversation.messages[0]\n            const preview = firstMessage?.content.slice(0, 100) || 'Nova conversa'\n\n            return (\n              <Link key={conversation.id} href={`/chat/${conversation.id}`}>\n                <GlassCard className=\"group cursor-pointer p-4 transition-all hover:shadow-md\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary/10\">\n                      <MessageSquare className=\"h-5 w-5 text-primary\" />\n                    </div>\n                    <div className=\"flex-1 space-y-1 overflow-hidden\">\n                      <div className=\"flex items-center gap-2\">\n                        <p className=\"truncate font-medium\">\n                          {preview}\n                          {firstMessage && firstMessage.content.length > 100 && '...'}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                        {conversation.session && (\n                          <span className=\"rounded-full bg-muted px-2 py-0.5\">\n                            {conversation.session.syndrome.name}\n                          </span>\n                        )}\n                        <span>{conversation._count.messages} mensagens</span>\n                        <span>\n                          {formatDistanceToNow(new Date(conversation.updatedAt))}\n                        </span>\n                      </div>\n                    </div>\n                    <ChevronRight className=\"h-5 w-5 text-muted-foreground transition-transform group-hover:translate-x-1\" />\n                  </div>\n                </GlassCard>\n              </Link>\n            )\n          })}\n        </div>\n      )}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/chatwell/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/dashboard/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Metadata } from 'next'\nimport Link from 'next/link'\nimport { Heart, Wind, Activity as ActivityIcon, Plus } from 'lucide-react'\nimport { prisma } from '@/lib/db/prisma'\nimport { Button } from '@/components/ui/button'\nimport { GlassCard } from '@/components/ui/glass-card'\n\nexport const metadata: Metadata = {\n  title: 'Dashboard | WellWave',\n  description: 'Selecione uma sindrome para iniciar a anamnese.',\n}\n\nasync function getSyndromes() {\n  return prisma.syndrome.findMany({\n    where: { isActive: true },\n    orderBy: { orderIndex: 'asc' },\n    include: {\n      _count: {\n        select: { checkboxes: true },\n      },\n    },\n  })\n}\n\nconst iconMap: Record<string, typeof Heart> = {\n  heart: Heart,\n  wind: Wind,\n  activity: ActivityIcon,\n}\n\nexport default async function DashboardPage() {\n  const syndromes = await getSyndromes()\n\n  return (\n    <div className=\"container mx-auto max-w-4xl space-y-8\">\n      <div className=\"space-y-2\">\n        <h1 className=\"text-3xl font-bold tracking-tight\">Nova Anamnese</h1>\n        <p className=\"text-muted-foreground\">\n          Selecione a sindrome clinica para iniciar o preenchimento da anamnese.\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n        {syndromes.map((syndrome) => {\n          const IconComponent = iconMap[syndrome.icon || 'activity'] || ActivityIcon\n\n          return (\n            <Link key={syndrome.id} href={`/anamnese/${syndrome.code.toLowerCase()}`}>\n              <GlassCard className=\"group h-full cursor-pointer p-6 transition-all hover:scale-[1.02] hover:shadow-lg\">\n                <div className=\"flex flex-col items-center space-y-4 text-center\">\n                  <div className=\"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10\">\n                    <IconComponent className=\"h-7 w-7 text-primary\" />\n                  </div>\n                  <div className=\"space-y-1\">\n                    <h2 className=\"font-semibold\">{syndrome.name}</h2>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {syndrome.description}\n                    </p>\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {syndrome._count.checkboxes} itens de avaliacao\n                  </div>\n                </div>\n              </GlassCard>\n            </Link>\n          )\n        })}\n      </div>\n\n      {syndromes.length === 0 && (\n        <GlassCard className=\"p-8 text-center\">\n          <div className=\"space-y-4\">\n            <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-muted\">\n              <Plus className=\"h-8 w-8 text-muted-foreground\" />\n            </div>\n            <div className=\"space-y-2\">\n              <h2 className=\"text-xl font-semibold\">Nenhuma sindrome disponivel</h2>\n              <p className=\"text-muted-foreground\">\n                Execute o seed do banco de dados para adicionar as sindromes iniciais.\n              </p>\n            </div>\n            <code className=\"inline-block rounded bg-muted px-3 py-1 text-sm\">\n              pnpm db:seed\n            </code>\n          </div>\n        </GlassCard>\n      )}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/history/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/(dashboard)/loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/actions/import-actions.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":38,"endColumn":18,"suggestions":[{"fix":{"range":[1119,1202],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":41,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":41,"endColumn":18,"suggestions":[{"fix":{"range":[1272,1346],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\n\nimport { prisma } from '@/lib/db/prisma'\nimport { extractText } from '@/lib/utils/text-extraction'\nimport { processSourceDocument } from '@/lib/services/extractionService'\nimport { processGuidelineDocument } from '@/lib/services/guidelineExtractionService'\nimport { revalidatePath } from 'next/cache'\nimport type { CheckboxCategory, RedFlagSeverity } from '@prisma/client'\n\ntype ExtractionMode = 'syndrome' | 'guideline'\n\nexport async function uploadDocument(\n  formData: globalThis.FormData,\n  mode: ExtractionMode = 'syndrome'\n) {\n  const file = formData.get('file') as globalThis.File\n\n  if (!file) {\n    return { error: 'No file provided' }\n  }\n\n  try {\n    // 1. Extract text (this runs on server)\n    const text = await extractText(file)\n\n    // 2. Create SourceDocument record\n    const document = await prisma.sourceDocument.create({\n      data: {\n        title: file.name,\n        type: file.type === 'application/pdf' ? 'PDF' : 'TXT',\n        content: text,\n        status: 'PENDING',\n      },\n    })\n\n    // 3. Trigger extraction immediately based on mode\n    if (mode === 'guideline') {\n      console.log(`[UploadDocument] Processing as Brazilian guideline (dual extraction)`)\n      await processGuidelineDocument(document.id)\n    } else {\n      console.log(`[UploadDocument] Processing as standard syndrome extraction`)\n      await processSourceDocument(document.id)\n    }\n\n    revalidatePath('/admin/import')\n    return { success: true, documentId: document.id }\n  } catch (error) {\n    console.error('Upload error:', error)\n    return { error: 'Failed to upload and process file' }\n  }\n}\n\nexport async function getSourceDocuments() {\n  return await prisma.sourceDocument.findMany({\n    orderBy: { createdAt: 'desc' },\n    include: { extractions: true },\n  })\n}\n\nexport async function getExtraction(id: string) {\n  return await prisma.contentExtraction.findUnique({\n    where: { id },\n    include: { sourceDocument: true },\n  })\n}\n\ninterface DraftData {\n  syndromeName: string\n  description: string\n  questions: Array<{\n    category: CheckboxCategory\n    displayText: string\n    narrativeText: string\n    isRequired: boolean\n    isRedFlag: boolean\n    isNegative: boolean\n  }>\n  redFlags: Array<{\n    name: string\n    severity: RedFlagSeverity\n    message: string\n  }>\n}\n\nexport async function saveDraft(extractionId: string, data: DraftData) {\n  try {\n    // Upsert the draft syndrome\n    const draft = await prisma.draftSyndrome.upsert({\n      where: { contentExtractionId: extractionId },\n      update: {\n        name: data.syndromeName,\n        description: data.description,\n        data: data,\n        updatedAt: new Date(),\n      },\n      create: {\n        contentExtractionId: extractionId,\n        name: data.syndromeName,\n        description: data.description,\n        data: data,\n        status: 'DRAFT',\n      },\n    })\n\n    return { success: true, draftId: draft.id }\n  } catch (error) {\n    console.error('Error saving draft:', error)\n    return { success: false, error: 'Failed to save draft' }\n  }\n}\n\nexport async function publishDraft(draftId: string) {\n  try {\n    const draft = await prisma.draftSyndrome.findUnique({\n      where: { id: draftId },\n    })\n\n    if (!draft) throw new Error('Draft not found')\n\n    const draftData = draft.data as DraftData\n\n    // Create the Syndrome\n    // Note: This needs to handle unique constraint on 'code'.\n    // For now, we'll generate a code from the name.\n    const code = draftData.syndromeName.toUpperCase().replace(/\\s+/g, '_').slice(0, 20)\n\n    const syndrome = await prisma.syndrome.create({\n      data: {\n        name: draftData.syndromeName,\n        code: code,\n        description: draftData.description,\n        orderIndex: 99, // Put at end\n        checkboxes: {\n          create: draftData.questions.map((q, idx: number) => ({\n            category: q.category,\n            displayText: q.displayText,\n            narrativeText: q.narrativeText,\n            isRequired: q.isRequired,\n            isRedFlag: q.isRedFlag,\n            isNegative: q.isNegative,\n            orderIndex: idx,\n          })),\n        },\n        redFlagRules: {\n          create: draftData.redFlags.map((rf) => ({\n            name: rf.name,\n            severity: rf.severity,\n            message: rf.message,\n            conditionJson: {}, // Placeholder logic\n          })),\n        },\n      },\n    })\n\n    // Update draft status\n    await prisma.draftSyndrome.update({\n      where: { id: draftId },\n      data: { status: 'PUBLISHED' },\n    })\n\n    return { success: true, syndromeId: syndrome.id }\n  } catch (error) {\n    console.error('Error publishing draft:', error)\n    return { success: false, error: 'Failed to publish draft' }\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/admin/curation/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/admin/import/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/anamnese/ClientAnamnese.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/anamnese/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/chat/conversations/[id]/messages/route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'extractRedFlags' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validateMinimumData' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DISCLAIMER_TEXT' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { streamText, type Message } from 'ai'\nimport { prisma } from '@/lib/db/prisma'\nimport { getUser } from '@/lib/supabase/server'\nimport { openai, DEFAULT_MODEL, MODEL_CONFIG } from '@/lib/ai/config'\nimport { buildSystemPrompt } from '@/lib/ai/prompts'\nimport { buildContext, extractRedFlags } from '@/lib/ai/context'\nimport {\n  validateMinimumData,\n  validateUserMessage,\n  DISCLAIMER_TEXT,\n} from '@/lib/ai/guardrails'\nimport { extractCitations } from '@/lib/ai/citations'\n\n// POST /api/chat/conversations/[id]/messages - Send message and get streaming response\nexport async function POST(\n  req: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const user = await getUser()\n\n    if (!user) {\n      return new Response('Unauthorized', { status: 401 })\n    }\n\n    const { id: conversationId } = await params\n    const body = await req.json()\n    const { content } = body as { content: string }\n\n    // Validate user message\n    const messageValidation = validateUserMessage(content)\n    if (!messageValidation.isValid) {\n      return new Response(\n        JSON.stringify({ error: messageValidation.errors[0] }),\n        {\n          status: 400,\n          headers: { 'Content-Type': 'application/json' },\n        }\n      )\n    }\n\n    // Fetch conversation with context\n    const conversation = await prisma.chatConversation.findUnique({\n      where: { id: conversationId, userId: user.id },\n      include: {\n        messages: {\n          orderBy: { createdAt: 'asc' },\n        },\n      },\n    })\n\n    if (!conversation) {\n      return new Response('Conversation not found', { status: 404 })\n    }\n\n    // Save user message\n    await prisma.chatMessage.create({\n      data: {\n        conversationId,\n        role: 'USER',\n        content,\n      },\n    })\n\n    // Build context from snapshot\n    let contextText = ''\n    let redFlags: string[] = []\n\n    if (conversation.contextSnapshot) {\n      const snapshot = conversation.contextSnapshot as {\n        syndromeName: string\n        syndromeDescription?: string\n        checkedItems: Array<{\n          id: string\n          category: string\n          displayText: string\n          narrativeText: string\n          isRedFlag: boolean\n          isNegative: boolean\n        }>\n        generatedText: string\n        redFlags: string[]\n      }\n\n      contextText = buildContext({\n        syndromeName: snapshot.syndromeName,\n        syndromeDescription: snapshot.syndromeDescription,\n        checkedItems: snapshot.checkedItems as Parameters<typeof buildContext>[0]['checkedItems'],\n        generatedText: snapshot.generatedText,\n        redFlags: snapshot.checkedItems.filter((c) => c.isRedFlag) as Parameters<typeof buildContext>[0]['redFlags'],\n      })\n      redFlags = snapshot.redFlags || []\n    }\n\n    // Build message history for context\n    const messageHistory: Message[] = conversation.messages.map((msg) => ({\n      id: msg.id,\n      role: msg.role === 'USER' ? 'user' : 'assistant',\n      content: msg.content,\n    }))\n\n    // Add current message\n    messageHistory.push({\n      id: 'current',\n      role: 'user',\n      content,\n    })\n\n    // Build system prompt with context\n    const systemPrompt = buildSystemPrompt(contextText, redFlags)\n\n    // Stream the response\n    const result = streamText({\n      model: openai(DEFAULT_MODEL),\n      system: systemPrompt,\n      messages: messageHistory,\n      temperature: MODEL_CONFIG.temperature,\n      maxTokens: MODEL_CONFIG.maxTokens,\n      onFinish: async ({ text }) => {\n        // Save assistant message after streaming completes\n        const citations = extractCitations(text)\n\n        await prisma.chatMessage.create({\n          data: {\n            conversationId,\n            role: 'ASSISTANT',\n            content: text,\n            citations: citations.length > 0 ? citations : undefined,\n          },\n        })\n\n        // Update conversation timestamp\n        await prisma.chatConversation.update({\n          where: { id: conversationId },\n          data: { updatedAt: new Date() },\n        })\n\n        // Audit log\n        await prisma.auditLog.create({\n          data: {\n            userId: user.id,\n            action: 'CHAT_MESSAGE_SENT',\n            resourceType: 'ChatConversation',\n            resourceId: conversationId,\n            metadata: {\n              messageLength: content.length,\n              responseLength: text.length,\n              citationCount: citations.length,\n            },\n          },\n        })\n      },\n    })\n\n    return result.toDataStreamResponse()\n  } catch (error) {\n    console.error('Error in chat:', error)\n    return new Response('Internal Server Error', { status: 500 })\n  }\n}\n\n// GET /api/chat/conversations/[id]/messages - Get messages for a conversation\nexport async function GET(\n  req: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const user = await getUser()\n\n    if (!user) {\n      return new Response('Unauthorized', { status: 401 })\n    }\n\n    const { id: conversationId } = await params\n\n    // Verify ownership\n    const conversation = await prisma.chatConversation.findUnique({\n      where: { id: conversationId, userId: user.id },\n    })\n\n    if (!conversation) {\n      return new Response('Conversation not found', { status: 404 })\n    }\n\n    const messages = await prisma.chatMessage.findMany({\n      where: { conversationId },\n      orderBy: { createdAt: 'asc' },\n    })\n\n    return Response.json(messages)\n  } catch (error) {\n    console.error('Error fetching messages:', error)\n    return new Response('Internal Server Error', { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/chat/conversations/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/chat/conversations/route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'buildContext' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'extractRedFlags' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server'\nimport { prisma } from '@/lib/db/prisma'\nimport { getUser } from '@/lib/supabase/server'\nimport { buildContext, extractRedFlags } from '@/lib/ai/context'\n\n// POST /api/chat/conversations - Create a new conversation\nexport async function POST(req: Request) {\n  try {\n    const user = await getUser()\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const { sessionId } = body as { sessionId?: string }\n\n    let contextSnapshot = null\n\n    // If sessionId provided, fetch session data for context\n    if (sessionId) {\n      const session = await prisma.anamneseSession.findUnique({\n        where: { id: sessionId, userId: user.id },\n        include: {\n          syndrome: {\n            include: {\n              checkboxes: true,\n            },\n          },\n        },\n      })\n\n      if (session) {\n        const checkedIds = session.checkedItems as string[]\n        const checkedItems = session.syndrome.checkboxes.filter((cb) =>\n          checkedIds.includes(cb.id)\n        )\n        const redFlags = checkedItems.filter((cb) => cb.isRedFlag)\n\n        contextSnapshot = {\n          syndromeName: session.syndrome.name,\n          syndromeDescription: session.syndrome.description,\n          checkedItems: checkedItems.map((cb) => ({\n            id: cb.id,\n            category: cb.category,\n            displayText: cb.displayText,\n            narrativeText: cb.narrativeText,\n            isRedFlag: cb.isRedFlag,\n            isNegative: cb.isNegative,\n          })),\n          generatedText: session.generatedText || '',\n          redFlags: redFlags.map((rf) => rf.displayText),\n        }\n      }\n    }\n\n    // Ensure user exists in database\n    let dbUser = await prisma.user.findUnique({\n      where: { id: user.id },\n    })\n\n    if (!dbUser) {\n      dbUser = await prisma.user.create({\n        data: {\n          id: user.id,\n          email: user.email!,\n          fullName: user.user_metadata?.full_name || 'Usuario',\n          crmNumber: user.user_metadata?.crm_number || '000000',\n          crmState: user.user_metadata?.crm_state || 'SP',\n        },\n      })\n    }\n\n    const conversation = await prisma.chatConversation.create({\n      data: {\n        userId: user.id,\n        sessionId: sessionId || null,\n        contextSnapshot: contextSnapshot ?? undefined,\n      },\n    })\n\n    // Audit log\n    await prisma.auditLog.create({\n      data: {\n        userId: user.id,\n        action: 'CHAT_CONVERSATION_CREATED',\n        resourceType: 'ChatConversation',\n        resourceId: conversation.id,\n        metadata: { sessionId },\n      },\n    })\n\n    return NextResponse.json(conversation)\n  } catch (error) {\n    console.error('Error creating conversation:', error)\n    return NextResponse.json(\n      { error: 'Failed to create conversation' },\n      { status: 500 }\n    )\n  }\n}\n\n// GET /api/chat/conversations - List user's conversations\nexport async function GET(req: Request) {\n  try {\n    const user = await getUser()\n\n    if (!user) {\n      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(req.url)\n    const limit = parseInt(searchParams.get('limit') || '20', 10)\n\n    const conversations = await prisma.chatConversation.findMany({\n      where: { userId: user.id },\n      orderBy: { updatedAt: 'desc' },\n      take: limit,\n      include: {\n        session: {\n          select: {\n            id: true,\n            syndrome: {\n              select: {\n                name: true,\n                code: true,\n              },\n            },\n          },\n        },\n        _count: {\n          select: { messages: true },\n        },\n      },\n    })\n\n    return NextResponse.json(conversations)\n  } catch (error) {\n    console.error('Error listing conversations:', error)\n    return NextResponse.json(\n      { error: 'Failed to list conversations' },\n      { status: 500 }\n    )\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/complaints/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/complaints/changes/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/complaints/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/health/route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_dbError' is defined but never used.","line":86,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Health Check Endpoint\n * \n * This endpoint provides health status information for monitoring and uptime checks.\n * Can be used by load balancers, monitoring tools, and deployment pipelines.\n * \n * Endpoints:\n * - GET /api/health - Basic health check\n * - GET /api/health?detailed=true - Detailed health information\n */\n\nimport { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/db/prisma'\n\nexport const dynamic = 'force-dynamic'\n\ninterface HealthStatus {\n  status: 'healthy' | 'degraded' | 'unhealthy'\n  timestamp: string\n  version?: string\n  uptime: number\n  environment: string\n  checks?: {\n    database: {\n      status: 'connected' | 'disconnected'\n      responseTime?: number\n    }\n    memory?: {\n      used: number\n      total: number\n      percentage: number\n    }\n  }\n}\n\n/**\n * Basic health check\n */\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams\n  const detailed = searchParams.get('detailed') === 'true'\n\n  try {\n    // Basic health check\n    const healthStatus: HealthStatus = {\n      status: 'healthy',\n      timestamp: new Date().toISOString(),\n      uptime: process.uptime(),\n      environment: process.env.NODE_ENV || 'unknown',\n    }\n\n    // Detailed health check (includes database and memory checks)\n    if (detailed) {\n      // Check database connection\n      const dbStart = Date.now()\n      try {\n        await prisma.$queryRaw`SELECT 1`\n        const dbResponseTime = Date.now() - dbStart\n\n        healthStatus.checks = {\n          database: {\n            status: 'connected',\n            responseTime: dbResponseTime,\n          },\n        }\n\n        // Add memory information\n        const memoryUsage = process.memoryUsage()\n        healthStatus.checks.memory = {\n          used: Math.round(memoryUsage.heapUsed / 1024 / 1024),\n          total: Math.round(memoryUsage.heapTotal / 1024 / 1024),\n          percentage: Math.round(\n            (memoryUsage.heapUsed / memoryUsage.heapTotal) * 100\n          ),\n        }\n\n        // Check if database response is slow\n        if (dbResponseTime > 1000) {\n          healthStatus.status = 'degraded'\n        }\n\n        // Check if memory usage is high\n        if (healthStatus.checks.memory.percentage > 90) {\n          healthStatus.status = 'degraded'\n        }\n      } catch (_dbError) {\n        healthStatus.status = 'unhealthy'\n        healthStatus.checks = {\n          database: {\n            status: 'disconnected',\n          },\n        }\n      }\n    }\n\n    // Return appropriate status code based on health\n    const statusCode = healthStatus.status === 'healthy' ? 200 : 503\n\n    return NextResponse.json(healthStatus, { status: statusCode })\n  } catch (error) {\n    // Catch-all for unexpected errors\n    return NextResponse.json(\n      {\n        status: 'unhealthy',\n        timestamp: new Date().toISOString(),\n        error: error instanceof Error ? error.message : 'Unknown error',\n        environment: process.env.NODE_ENV || 'unknown',\n      },\n      { status: 503 }\n    )\n  }\n}\n\n/**\n * HEAD request for simple alive check\n * Useful for load balancers that only need to know if the service is responding\n */\nexport async function HEAD() {\n  return new NextResponse(null, { status: 200 })\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/api/sentry-example-api/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/demo/glass-testimonials/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Stethoscope' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Brain' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HeartPulse' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { GlassTestimonialStack, Testimonial } from '@/components/ui/GlassTestimonialStack';\nimport { Stethoscope, Brain, HeartPulse, Activity } from 'lucide-react';\n\n// --- Mock Data ---\nconst demoTestimonials: Testimonial[] = [\n  {\n    id: 1,\n    initials: \"Dr. A\",\n    name: \"Dr. André Silva\",\n    role: \"Cardiologista Intervencionista\",\n    quote: \"A precisão dos scores de risco integrados ao fluxo de anamnese reduziu meu tempo de decisão em 40%. A interface é simplesmente invisível, permite focar 100% no paciente.\",\n    tags: [\n      { text: \"Alta Produtividade\", type: \"featured\" },\n      { text: \"UX Premium\", type: \"default\" }\n    ],\n    rating: 5,\n    avatarGradient: \"linear-gradient(135deg, #FF3B30, #FF9500)\" // Apple Red/Orange\n  },\n  {\n    id: 2,\n    initials: \"Dra. J\",\n    name: \"Dra. Julia Costa\",\n    role: \"Neurologista\",\n    quote: \"O Glass UI não é apenas bonito, é funcional. A hierarquia visual das notas inteligentes ajuda a identificar padrões neurológicos sutis que antes passavam despercebidos em prontuários comuns.\",\n    tags: [\n      { text: \"Design Inteligente\", type: \"featured\" },\n      { text: \"Clareza Clínica\", type: \"default\" }\n    ],\n    rating: 5,\n    avatarGradient: \"linear-gradient(135deg, #AF52DE, #5856D6)\" // Apple Purple/Indigo\n  },\n  {\n    id: 3,\n    initials: \"Dr. M\",\n    name: \"Dr. Marcos Rocha\",\n    role: \"Médico de Emergência\",\n    quote: \"Em um plantão caótico, a estabilidade e a fluidez do WellWave são essenciais. Os calculadores automáticos de sepse e risco cardiovascular são game-changers.\",\n    tags: [\n      { text: \"Confiabilidade\", type: \"featured\" },\n      { text: \"Emergência\", type: \"default\" }\n    ],\n    rating: 5,\n    avatarGradient: \"linear-gradient(135deg, #34C759, #00C7BE)\" // Apple Green/Teal\n  },\n  {\n    id: 4,\n    initials: \"Res. C\",\n    name: \"Camila Torres\",\n    role: \"Residente de Clínica Médica\",\n    quote: \"A curva de aprendizado é zero. O sistema parece antecipar o que eu preciso escrever. A interface 'liquid' traz uma paz visual que diminui o estresse do dia a dia.\",\n    tags: [\n      { text: \"Intuitivo\", type: \"featured\" },\n      { text: \"Zero Friction\", type: \"default\" }\n    ],\n    rating: 4,\n    avatarGradient: \"linear-gradient(135deg, #007AFF, #5AC8FA)\" // Apple Blue\n  }\n];\n\nexport default function GlassTestimonialDemoPage() {\n  return (\n    <div className=\"min-h-screen w-full bg-[#f5f5f7] dark:bg-black flex flex-col items-center justify-center p-8 relative overflow-hidden\">\n      \n      {/* Background Ambience similar to WellWave global styles */}\n      <div className=\"absolute inset-0 pointer-events-none\">\n         <div className=\"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_0%,rgba(0,78,146,0.1),transparent_70%)]\" />\n         <div className=\"absolute bottom-0 right-0 w-[500px] h-[500px] bg-blue-500/5 rounded-full blur-[100px]\" />\n      </div>\n\n      <div className=\"max-w-4xl w-full flex flex-col items-center gap-12 relative z-10\">\n        \n        {/* Header Section */}\n        <div className=\"text-center space-y-4\">\n           <div className=\"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/50 dark:bg-white/10 backdrop-blur-md border border-white/20 shadow-sm mb-4\">\n              <Activity className=\"w-4 h-4 text-blue-500\" />\n              <span className=\"text-xs font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400\">WellWave Design System</span>\n           </div>\n           \n           <h1 className=\"text-5xl md:text-7xl font-black text-slate-900 dark:text-white tracking-tighter\">\n             Liquid Feedback.\n           </h1>\n           <p className=\"text-lg md:text-xl text-slate-500 dark:text-slate-400 max-w-xl mx-auto leading-relaxed\">\n             Uma experiência de leitura de depoimentos que flui como vidro líquido. Toque, arraste e sinta a inércia.\n           </p>\n        </div>\n\n        {/* The Component Showcase */}\n        <div className=\"w-full py-10 scale-110\">\n           <GlassTestimonialStack testimonials={demoTestimonials} />\n        </div>\n\n        {/* Footer / Controls Hint */}\n        <div className=\"flex items-center gap-6 opacity-40\">\n           <div className=\"flex items-center gap-2\">\n              <div className=\"w-1.5 h-1.5 rounded-full bg-slate-400\" />\n              <span className=\"text-xs font-medium uppercase tracking-widest\">Swipe to Navigate</span>\n           </div>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dynamic' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Copy' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BookOpen' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Printer' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CaseUpper' is defined but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.","line":42,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getStructuredReferences' is defined but never used. Allowed unused vars must match /^_/u.","line":48,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2397,2400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2397,2400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BlockIcon' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":102,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'complaints' logical expression could make the dependencies of useMemo Hook (at line 127) change on every render. To fix this, wrap the initialization of 'complaints' in its own useMemo() Hook.","line":124,"column":9,"nodeType":"VariableDeclarator","endLine":124,"endColumn":52},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'complaints' logical expression could make the dependencies of useMemo Hook (at line 595) change on every render. To fix this, wrap the initialization of 'complaints' in its own useMemo() Hook.","line":124,"column":9,"nodeType":"VariableDeclarator","endLine":124,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4015,4018],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4015,4018],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setEditingBlockId' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":163,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":163,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isCalculatorOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":164,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":164,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAddModalOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":166,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":166,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7042,7045],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7042,7045],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleSaveCustomSymptom' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":270,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":270,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":861,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":861,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[36351,36354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[36351,36354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport * as React from 'react'\nimport dynamic from 'next/dynamic'\nimport { Sidebar } from '@/components/medical/Sidebar'\nimport { Header } from '@/components/medical/Header'\nimport { DashboardView } from '@/components/medical/DashboardView'\nimport { ComplaintSelection } from '@/components/medical/ComplaintSelection'\nimport { AnamnesisView } from '@/components/medical/AnamnesisView'\nimport { AccessibilityGuide } from '@/components/medical/AccessibilityGuide'\nimport { FlashAnamnesisFlow } from '@/components/medical/FlashAnamnesisFlow'\nimport { ChatWell } from '@/components/medical/ChatWell'\nimport { GlassPanel } from '@/components/glass/GlassPanel'\nimport { AnamnesisWorkspace } from '@/components/medical/AnamnesisWorkspace'\nimport { SmartNotePanel } from '@/components/medical/SmartNotePanel'\nimport { HeartScoreCalculator } from '@/components/medical/HeartScoreCalculator'\nimport {\n  Sparkles,\n  Copy,\n  Check,\n  AlertTriangle,\n  Stethoscope,\n  FileText,\n  Heart,\n  XCircle,\n  List,\n  Brain,\n  Siren,\n  BookOpen,\n  Printer,\n  Calculator,\n  CaseUpper,\n  GitBranch,\n  Activity,\n  ArrowLeft,\n  HeartPulse,\n  Wind,\n  Biohazard,\n  MessageSquare,\n} from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { Patient, AnamnesisSection, NoteBlock, KanbanTask, KanbanStatus } from '@/lib/types/medical'\nimport { buildComplaintGroups } from '@/lib/data/complaint-groups'\nimport {\n  getProtocolData,\n  getHypotheses,\n  getStructuredReferences,\n  mapComplaintToProtocol,\n  getCalculatorsForGroup,\n} from '@/lib/services/protocolService'\nimport { useToast } from '@/hooks/use-toast'\nimport { useComplaints } from '@/hooks/use-complaints'\n\nconst initialTasks: KanbanTask[] = [\n  {\n    id: '1',\n    patientName: 'J.S.M.',\n    age: '64a',\n    gender: 'M',\n    complaint: 'Dor Torácica',\n    acuity: 'orange',\n    waitTime: '12min',\n    status: 'exam',\n  },\n  {\n    id: '2',\n    patientName: 'M.A.L.',\n    age: '32a',\n    gender: 'F',\n    complaint: 'Cefaleia Súbita',\n    acuity: 'yellow',\n    waitTime: '45min',\n    status: 'wait',\n  },\n  {\n    id: '3',\n    patientName: 'R.P.S.',\n    age: '78a',\n    gender: 'M',\n    complaint: 'Dispneia',\n    acuity: 'red',\n    waitTime: '05min',\n    status: 'reval',\n  },\n]\n\n// Helper for Library Icons\nconst getLibraryIcon = (iconName: string) => {\n  const map: Record<string, any> = {\n    HeartPulse,\n    Wind,\n    Brain,\n    Activity,\n    Siren,\n    Biohazard,\n  }\n  const Icon = map[iconName] || Activity\n  return <Icon className=\"w-5 h-5 text-slate-500\" />\n}\n\nconst BlockIcon = ({ name }: { name: NoteBlock['iconName'] }) => {\n  const icons = {\n    heart: <Heart className=\"w-4 h-4 text-red-500\" />,\n    list: <List className=\"w-4 h-4 text-blue-500\" />,\n    x: <XCircle className=\"w-4 h-4 text-slate-500\" />,\n    stethoscope: <Stethoscope className=\"w-4 h-4 text-emerald-500\" />,\n    alert: <AlertTriangle className=\"w-4 h-4 text-orange-500\" />,\n    brain: <Brain className=\"w-4 h-4 text-purple-500\" />,\n    siren: <Siren className=\"w-4 h-4 text-rose-500 animate-pulse\" />,\n  }\n  return icons[name] || <FileText className=\"w-4 h-4 text-slate-500\" />\n}\n\nexport default function Home() {\n  const { toast } = useToast()\n  const [viewMode, setViewMode] = React.useState<\n    'dashboard' | 'selection' | 'protocol' | 'library' | 'accessibility' | 'flash' | 'chat-well'\n  >('dashboard')\n  const [activeProtocolId, setActiveProtocolId] = React.useState<string | null>(null)\n  const [activeComplaintId, setActiveComplaintId] = React.useState<string | null>(null)\n\n  const { data: complaintsResponse } = useComplaints({ limit: 500, isActive: true })\n  const complaints = complaintsResponse?.data ?? []\n  const activeComplaint = React.useMemo(\n    () => complaints.find((complaint) => complaint.id === activeComplaintId) ?? null,\n    [complaints, activeComplaintId]\n  )\n\n  // Data State lifted to App level for synchronization\n  const [anamnesisData, setAnamnesisData] = React.useState<Record<string, any>>({})\n  const [sections, setSections] = React.useState<AnamnesisSection[]>([])\n\n  const [noteBlocks, setNoteBlocks] = React.useState<NoteBlock[]>([])\n  const [tasks, setTasks] = React.useState<KanbanTask[]>(initialTasks)\n  const [patient, setPatient] = React.useState<Patient>({\n    id: '12345',\n    age: '45',\n    gender: 'F',\n    category: 'adult',\n    isPregnant: false,\n    phoneNumber: '',\n    allergies: ['Dipirona', 'Sulfa'],\n    medications: ['Sildenafil', 'Losartana', 'Aspirina'],\n    entryTime: '2025-01-01T00:00:00.000Z', // Static placeholder for initial render\n    status: 'in_progress',\n  })\n\n  // Track client-side mount to prevent hydration mismatch\n  const [isMounted, setIsMounted] = React.useState(false)\n\n  // Standardize dynamic patient data after mount to avoid hydration mismatch\n  React.useEffect(() => {\n    setIsMounted(true)\n    setPatient(prev => ({\n      ...prev,\n      entryTime: new Date(Date.now() - 1000 * 60 * 42).toISOString()\n    }))\n  }, [])\n\n  const [copiedId, setCopiedId] = React.useState<string | null>(null)\n  const [isUppercaseMode, setIsUppercaseMode] = React.useState(false)\n  const [editingBlockId, setEditingBlockId] = React.useState<string | null>(null)\n  const [isCalculatorOpen, setIsCalculatorOpen] = React.useState(false)\n  const [isFlowMenuOpen, setIsFlowMenuOpen] = React.useState(false)\n  const [isAddModalOpen, setIsAddModalOpen] = React.useState(false)\n  const [targetSectionId, setTargetSectionId] = React.useState<string | null>(null)\n  const [manualNoteEdits, setManualNoteEdits] = React.useState<Record<string, string>>({})\n  const [editingNoteBlockId, setEditingNoteBlockId] = React.useState<string | null>(null)\n  const [newSymptomName, setNewSymptomName] = React.useState('')\n  const [activeTool, setActiveTool] = React.useState<'chat' | 'calculators' | null>(null)\n\n  const handleApplyScore = (scoreResult: string) => {\n    // Basic logic to append to \"conduta\" block or create if missing\n    // For now, simpler approach: append to manualNoteEdits of 'conduta' block if it exists\n    const condutaBlock = noteBlocks.find(b => b.id === 'conduta')\n    if (condutaBlock) {\n      const currentContent = manualNoteEdits['conduta'] || condutaBlock.content\n      const newContent = currentContent + '\\n\\n' + scoreResult\n      setManualNoteEdits(prev => ({ ...prev, conduta: newContent }))\n      toast({\n        title: \"Score Aplicado\",\n        description: \"O resultado foi adicionado à conduta.\",\n      })\n    } else {\n       toast({\n        title: \"Bloco de Conduta não encontrado\",\n        description: \"Adicione um bloco de conduta para aplicar o score.\",\n        variant: \"destructive\"\n      })\n    }\n  }\n\n  // Check if current protocol has calculators\n  const hasCalculators = React.useMemo(() => {\n    if (!activeProtocolId) return false\n    const calcs = getCalculatorsForGroup(activeProtocolId)\n    return !!calcs\n  }, [activeProtocolId])\n\n  const copyBlockToClipboard = async (content: string, blockId: string) => {\n    const clipboard = (globalThis as any).navigator?.clipboard\n    if (!clipboard?.writeText) return\n\n    await clipboard.writeText(content)\n    setCopiedId(blockId)\n    globalThis.setTimeout?.(() => setCopiedId(null), 2000)\n  }\n\n  // Calculate Active Red Flags based on current data\n  const activeRedFlags = sections\n    .flatMap((s) => s.items)\n    .filter((i) => {\n      return i.isRedFlag && anamnesisData[i.id] === true\n    })\n\n  const selectComplaint = (complaintId: string, _groupCode: string) => {\n    const mappedProtocolId = mapComplaintToProtocol(complaintId)\n    setActiveProtocolId(mappedProtocolId)\n    setActiveComplaintId(complaintId)\n    const newSections = getProtocolData(mappedProtocolId)\n    setSections(newSections)\n    setAnamnesisData({})\n    setViewMode('protocol')\n  }\n\n  const handleSidebarNavigation = (viewId: string) => {\n    const map: Record<string, typeof viewMode> = {\n      protocolos: 'library',\n      anamnese: 'selection',\n      dashboard: 'dashboard',\n      acessibilidade: 'accessibility',\n      flash: 'flash',\n      'chat-well': 'chat-well',\n    }\n    setViewMode(map[viewId] || 'dashboard')\n  }\n\n  const handleSetFlow = (status: string) => {\n    const statusMap: Record<string, KanbanStatus> = {\n      'ambulatorial': 'done',\n      'observação': 'wait',\n      'internação': 'wait',\n      'uti': 'reval',\n      'emergência': 'exam'\n    }\n    \n    const finalStatus: KanbanStatus = statusMap[status.toLowerCase()] || 'wait'\n    const newTask: KanbanTask = {\n      id: Date.now().toString(),\n      patientName: patient.category === 'pediatric' ? 'Ped. Anônimo' : 'Paciente Anon.',\n      age: patient.age ? `${patient.age}a` : '--',\n      gender: patient.gender,\n      complaint: activeProtocolId || 'Queixa Geral',\n      acuity: activeRedFlags.length > 0 ? 'red' : 'green',\n      waitTime: '0min',\n      status: finalStatus,\n    }\n    setTasks((prev) => [...prev, newTask])\n    setIsFlowMenuOpen(false)\n    if (finalStatus === 'done') setViewMode('dashboard')\n  }\n\n  const handleOpenAddModal = (sectionId: string) => {\n    setTargetSectionId(sectionId)\n    setNewSymptomName('')\n    setIsAddModalOpen(true)\n  }\n\n  const handleSaveCustomSymptom = () => {\n    if (!newSymptomName.trim() || !targetSectionId) return\n    const newId = `custom-${Date.now()}`\n\n    setSections((prev) =>\n      prev.map((section) => {\n        if (section.id === targetSectionId) {\n          return {\n            ...section,\n            items: [\n              ...section.items,\n              {\n                id: newId,\n                label: newSymptomName,\n                type: 'boolean',\n                checked: false,\n                negative: false,\n              },\n            ],\n          }\n        }\n        return section\n      })\n    )\n\n    setAnamnesisData((prev) => ({ ...prev, [newId]: true }))\n\n    setIsAddModalOpen(false)\n    setTargetSectionId(null)\n    setNewSymptomName('')\n  }\n\n  // --- NOTE GENERATION LOGIC ---\n  const generateNote = React.useCallback(() => {\n    if (editingBlockId) return\n\n    const blocks: NoteBlock[] = []\n\n    // 1. Safety Alerts\n    const alerts: string[] = []\n    if (patient.medications) {\n      patient.medications.forEach((med) => {\n        patient.allergies.forEach((allergy) => {\n          if (\n            med.toLowerCase().includes(allergy.toLowerCase()) ||\n            allergy.toLowerCase().includes(med.toLowerCase())\n          ) {\n            alerts.push(`INTERAÇÃO GRAVE: Uso de ${med} em paciente alérgico a ${allergy}.`)\n          }\n        })\n      })\n    }\n    if (activeProtocolId === 'dor_toracica') {\n      if (patient.medications.some((m) => /sildenafil|tadalafila|viagra/i.test(m))) {\n        alerts.push('CONTRAINDICAÇÃO ABSOLUTA: Nitratos (risco de óbito com inibidores de PDE-5).')\n      }\n    }\n    if (alerts.length > 0) {\n      blocks.push({\n        id: 'safety_check',\n        title: 'ALERTAS DE SEGURANÇA',\n        iconName: 'siren',\n        content: alerts.join('\\n\\n'),\n      })\n    }\n\n    // 2. Allergies Block - Padrão texto corrido\n    let allergiesContent = ''\n    if (patient.allergies.length > 0) {\n      allergiesContent += `Refere alergia a ${patient.allergies.join(', ').toLowerCase()}. `\n    } else {\n      allergiesContent += 'Nega alergias medicamentosas conhecidas. '\n    }\n    if (patient.medications.length > 0) {\n      allergiesContent += `Em uso de ${patient.medications.join(', ')}.`\n    } else {\n      allergiesContent += 'Nega uso de medicações de uso contínuo.'\n    }\n    blocks.push({\n      id: 'allergies',\n      title: 'Alergias & Medicações',\n      iconName: 'alert',\n      content: allergiesContent.trim(),\n    })\n\n    // 3. HDA (History of Present Illness) - SYNCHRONIZED\n    // Padrão de escrita corrida técnico-médica com proteção jurídica implícita\n    const protocolName = activeComplaint?.title || 'Atendimento Geral'\n\n    const intensity = anamnesisData['meta_intensity'] || '0'\n    const chronicity = anamnesisData['meta_chronicity'] || 'Agudo'\n    const onset = anamnesisData['meta_onset'] || 'Súbito'\n    const duration = anamnesisData['meta_duration'] || 'não especificado'\n\n    // Mapeia intensidade para texto descritivo profissional\n    const intensityNum = parseInt(intensity, 10)\n    let intensityText = 'de intensidade não mensurada'\n    if (intensityNum > 0) {\n      if (intensityNum <= 3) intensityText = 'de leve intensidade'\n      else if (intensityNum <= 6) intensityText = 'de moderada intensidade'\n      else if (intensityNum <= 8) intensityText = 'de forte intensidade'\n      else intensityText = 'de severa intensidade'\n    }\n\n    // Mapeia cronicidade para texto narrativo técnico\n    const chronicityMap: Record<string, string> = {\n      'Agudo': 'caráter agudo',\n      'Subagudo': 'caráter subagudo',\n      'Crônico': 'caráter crônico',\n    }\n    const chronicityText = chronicityMap[chronicity] || 'caráter agudo'\n\n    // Mapeia início para texto narrativo técnico\n    const onsetMap: Record<string, string> = {\n      'Súbito': 'instalação súbita',\n      'Progressivo': 'instalação progressiva',\n      'Insidioso': 'instalação insidiosa',\n    }\n    const onsetText = onsetMap[onset] || 'instalação súbita'\n\n    // Texto corrido: Queixa Principal e HDA\n    let hda = `Paciente admitido na unidade de emergência apresentando ${protocolName.toLowerCase()}. `\n    hda += `Refere sintomatologia de ${chronicityText} e ${onsetText}`\n    if (duration && duration !== 'não especificado') {\n      hda += ` com tempo de evolução de aproximadamente ${duration}`\n    }\n    hda += `, referida como ${intensityText}. `\n\n    // Coleta achados positivos separados por categoria com terminologia médica\n    const sintomas: string[] = []\n    const localizacao: string[] = []\n    const caracteristicas: string[] = []\n\n    sections.forEach((section) => {\n      // Ignora metadados e exame físico no bloco da HDA\n      if (section.id !== 'meta_characterization' && section.id !== 'exame_fisico' && section.id !== 'general') {\n        section.items.forEach((item) => {\n          const val = anamnesisData[item.id]\n          const label = item.label.toLowerCase()\n\n          if (item.type === 'boolean' && val === true) {\n            if (label.includes('local') || label.includes('epigástrio') || label.includes('hipocôndrio') || label.includes('fossa')) {\n              localizacao.push(label.replace('local da dor:', '').replace('local:', '').trim())\n            } else if (label.includes('tipo') || label.includes('irradiação') || label.includes('contínua') || label.includes('intermitente')) {\n              caracteristicas.push(label.replace('tipo', '').replace(':', '').trim())\n            } else {\n              sintomas.push(label)\n            }\n          } else if (item.type === 'segment' && val && typeof val === 'string' && val !== 'Não' && val !== 'Ausente') {\n            const valLower = val.toLowerCase()\n            if (label.includes('local')) {\n              localizacao.push(`em ${valLower}`)\n            } else if (label.includes('tipo')) {\n              caracteristicas.push(`descrita como ${valLower}`)\n            } else if (label.includes('irradiação')) {\n              caracteristicas.push(`com irradiação para ${valLower}`)\n            } else {\n              caracteristicas.push(`${label}: ${valLower}`)\n            }\n          } else if (item.type === 'multiSelect' && Array.isArray(val) && val.length > 0) {\n            val.forEach((v: string) => {\n              const vLower = v.toLowerCase()\n              if (label.includes('local')) {\n                localizacao.push(`em ${vLower}`)\n              } else {\n                caracteristicas.push(vLower)\n              }\n            })\n          } else if (item.type === 'text' && val && val.trim() !== '') {\n            caracteristicas.push(`${label}: ${val}`)\n          }\n        })\n      }\n    })\n\n    // Monta narrativa médica estruturada\n    if (localizacao.length > 0) {\n      hda += `Localiza o quadro álgico principalmente ${localizacao.join(' e ')}. `\n    }\n    \n    if (caracteristicas.length > 0) {\n      hda += `A dor é ${caracteristicas.join(', ')}. `\n    }\n\n    if (sintomas.length > 0) {\n      hda += `Associa ao quadro ${sintomas.join(', ')}. `\n    }\n\n    // Negativas pertinentes automáticas baseadas no protocolo\n    const sintomasNegativos: string[] = []\n    sections.forEach((section) => {\n      if (section.id !== 'meta_characterization' && section.id !== 'exame_fisico') {\n        section.items.forEach((item) => {\n          if (item.type === 'boolean' && anamnesisData[item.id] === false) {\n             // Só adiciona negativas se forem importantes (ex: náuseas, vômitos, dispneia)\n             if (/náusea|vômito|dispneia|sudorese|desmaio|síncope/i.test(item.label)) {\n                sintomasNegativos.push(item.label.toLowerCase())\n             }\n          }\n        })\n      }\n    })\n\n    if (sintomasNegativos.length > 0) {\n      hda += `Nega ${sintomasNegativos.join(', ')}.`\n    } else {\n      hda += `Nega demais sintomas associados ou intercorrências até o presente momento.`\n    }\n\n    blocks.push({ id: 'hda', title: 'História da Doença Atual', iconName: 'heart', content: hda.trim() })\n\n    // 4. Physical Exam - Padrão: Apresenta (achados) / Evidencia (sinais objetivos)\n    const efSection = sections.find((s) => s.id === 'exame_fisico')\n    const achadosClinicosEF: string[] = []\n    const sinaisObjetivosEF: string[] = []\n\n    // Lista de sinais objetivos que usam \"Evidencia\"\n    const sinaisObjetivos = [\n      'sinal de murphy', 'sinal de blumberg', 'sinal de rovsing', 'sinal de psoas',\n      'sinal de giordano', 'sinal de kernig', 'sinal de brudzinski', 'rigidez de nuca',\n      'déficit neurológico', 'abdome em tábua', 'descompressão brusca', 'crepitações', 'sibilos'\n    ]\n\n    if (efSection) {\n      efSection.items.forEach((item) => {\n        const val = anamnesisData[item.id]\n        if (val !== undefined && val !== null && val !== '') {\n          const labelLower = item.label.toLowerCase()\n          let finding = ''\n\n          if (item.type === 'boolean' && val === true) {\n            finding = labelLower\n          } else if (item.type === 'multiSelect' && Array.isArray(val) && val.length > 0) {\n            finding = `${labelLower}: ${val.join(', ').toLowerCase()}`\n          } else if (item.type === 'segment' && val !== 'Normal' && val !== 'Ausente' && val !== 'Não') {\n            finding = `${labelLower}: ${String(val).toLowerCase()}`\n          } else if (item.type === 'text' && val) {\n            finding = `${labelLower}: ${String(val).toLowerCase()}`\n          }\n\n          if (finding) {\n            const isSinalObjetivo = sinaisObjetivos.some(s => labelLower.includes(s))\n            if (isSinalObjetivo) {\n              sinaisObjetivosEF.push(finding)\n            } else {\n              achadosClinicosEF.push(finding)\n            }\n          }\n        }\n      })\n    }\n\n    // Monta texto corrido do exame físico profissional\n    let efContent = 'Ao exame físico segmentar e direcionado, '\n    if (achadosClinicosEF.length > 0 || sinaisObjetivosEF.length > 0) {\n      if (achadosClinicosEF.length > 0) {\n        efContent += `apresenta ${achadosClinicosEF.join(', ')}. `\n      }\n      if (sinaisObjetivosEF.length > 0) {\n        efContent += `À ectoscopia/manobras especiais, evidencia ${sinaisObjetivosEF.join(', ')}.`\n      }\n    } else {\n      efContent += 'não se observa alterações clínicas significativas ou sinais de instabilidade no momento.'\n    }\n\n    blocks.push({\n      id: 'exame_fisico',\n      title: 'Exame Físico',\n      iconName: 'stethoscope',\n      content: efContent.trim(),\n    })\n\n    // 5. Hypotheses\n    blocks.push({\n      id: 'hypotheses',\n      title: 'Hipóteses',\n      iconName: 'brain',\n      content: getHypotheses(activeProtocolId).join('\\n'),\n    })\n\n    // 6. Conduct\n    let conduct =\n      activeRedFlags.length > 0\n        ? 'Protocolo de Alta Complexidade / Emergência.'\n        : 'Protocolo de Risco Habitual / Sintomáticos.'\n    if (alerts.length > 0) conduct += '\\n!!! ATENÇÃO AOS ALERTAS DE SEGURANÇA !!!'\n\n    blocks.push({\n      id: 'conduta',\n      title: 'Conduta',\n      iconName: 'alert',\n      content: conduct,\n      alerts: activeRedFlags.map((f) => f.label),\n    })\n    blocks.push({ id: 'sources', title: 'Referências', iconName: 'list', content: '' })\n\n    // Apply manual edits if they exist\n    const finalBlocks = blocks.map(block => {\n      if (manualNoteEdits[block.id]) {\n        return { ...block, content: manualNoteEdits[block.id] }\n      }\n      return block\n    })\n\n    setNoteBlocks(finalBlocks)\n  }, [anamnesisData, patient, activeProtocolId, activeComplaint, sections, editingBlockId, activeRedFlags, manualNoteEdits])\n\n  // Trigger Note Generation on Data Change\n  React.useEffect(() => {\n    if (viewMode === 'protocol') {\n      const timer = globalThis.setTimeout?.(generateNote, 300)\n      return () => {\n        if (timer !== undefined) {\n          globalThis.clearTimeout?.(timer)\n        }\n      }\n    }\n  }, [generateNote, viewMode])\n\n  const handlePrint = () => {\n    globalThis.print?.()\n  }\n\n  const complaintGroups = React.useMemo(() => {\n    return buildComplaintGroups(complaints, { includeAll: true })\n  }, [complaints])\n\n  return (\n    <div className=\"flex h-screen w-full bg-[#fbfbfd] dark:bg-[#000000] text-slate-900 dark:text-slate-100 font-sans selection:bg-blue-500/30 relative overflow-hidden\">\n      {/*\n        ULTRA-FIDELITY LIQUID BACKGROUND (Apple 2025)\n        Multi-layered mesh gradients with organic morphing\n        Only rendered on client to prevent hydration mismatch\n      */}\n      {isMounted && (\n        <div className=\"fixed inset-0 z-0 pointer-events-none overflow-hidden\">\n          {/* Primary Ambient Layer */}\n          <motion.div\n            animate={{\n              scale: [1, 1.2, 1],\n              x: [0, 50, 0],\n              y: [0, -30, 0]\n            }}\n            transition={{ duration: 25, repeat: Infinity, ease: 'easeInOut' }}\n            className=\"absolute -top-[20%] -left-[10%] w-[70%] h-[70%] bg-blue-400/10 dark:bg-blue-600/5 blur-[120px] rounded-full\"\n          />\n          {/* Secondary Warm Layer */}\n          <motion.div\n            animate={{\n              scale: [1, 1.3, 1],\n              x: [0, -40, 0],\n              y: [0, 60, 0]\n            }}\n            transition={{ duration: 30, repeat: Infinity, ease: 'easeInOut', delay: 2 }}\n            className=\"absolute top-[20%] -right-[10%] w-[60%] h-[60%] bg-indigo-400/10 dark:bg-indigo-600/5 blur-[140px] rounded-full\"\n          />\n          {/* Tertiary Liquid Bloom */}\n          <motion.div\n            animate={{\n              rotate: [0, 360],\n              scale: [1, 1.1, 1]\n            }}\n            transition={{ duration: 45, repeat: Infinity, ease: 'linear' }}\n            className=\"absolute bottom-[-10%] left-[20%] w-[50%] h-[50%] bg-blue-300/10 dark:bg-blue-500/5 blur-[160px] rounded-full\"\n          />\n\n          {/* Noise Grain - Tactile Texture */}\n          <div className=\"absolute inset-0 opacity-[0.03] dark:opacity-[0.05] pointer-events-none mix-blend-overlay bg-[url('https://grainy-gradients.vercel.app/noise.svg')]\" />\n        </div>\n      )}\n\n      <Sidebar currentView={viewMode} onNavigate={handleSidebarNavigation} />\n\n      <main className=\"flex-1 flex flex-col h-full min-w-0 relative z-0 p-4\">\n        {viewMode === 'dashboard' && (\n          <GlassPanel className=\"h-full overflow-hidden flex flex-col\" style={{ borderRadius: '24px' }}>\n            <DashboardView\n              tasks={tasks}\n              setTasks={setTasks}\n              onNewAttendance={() => setViewMode('selection')}\n              onSettings={() =>\n                toast({\n                  title: 'Em desenvolvimento',\n                  description: 'Painel de configurações em breve.',\n                })\n              }\n            />\n          </GlassPanel>\n        )}\n\n        {viewMode === 'flash' && (\n          <GlassPanel className=\"h-full overflow-hidden flex flex-col p-6\" style={{ borderRadius: '24px' }}>\n            <FlashAnamnesisFlow\n              patient={patient}\n              setPatient={setPatient}\n              onExit={() => setViewMode('dashboard')}\n              onApplyScore={handleApplyScore}\n            />\n          </GlassPanel>\n        )}\n\n        {viewMode === 'chat-well' && (\n          <GlassPanel className=\"h-full overflow-hidden p-6\" style={{ borderRadius: '24px' }}>\n            <ChatWell />\n          </GlassPanel>\n        )}\n\n        {viewMode !== 'dashboard' && viewMode !== 'flash' && viewMode !== 'chat-well' && (\n          <GlassPanel className=\"flex flex-col h-full overflow-hidden\" style={{ borderRadius: '24px' }}>\n            <div className=\"px-6 pt-6 shrink-0 z-20\">\n              <Header patient={patient} setPatient={setPatient} />\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 relative\">\n              {viewMode === 'selection' && (\n                <ComplaintSelection onSelect={selectComplaint} patient={patient} />\n              )}\n\n              {viewMode === 'library' && (\n                <div className=\"p-2\">\n                  <div className=\"flex items-center gap-3 mb-8\">\n                    <div className=\"p-3 rounded-2xl glass-pill bg-purple-500/10 text-purple-500\">\n                      <Activity className=\"w-6 h-6\" />\n                    </div>\n                    <div>\n                      <h2 className=\"text-2xl font-bold text-slate-800 dark:text-white tracking-tight\">\n                        Biblioteca de Protocolos\n                      </h2>\n                      <p className=\"text-sm text-slate-500 dark:text-slate-400\">\n                        Calculadoras e scores clínicos disponíveis.\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n                    {complaintGroups.map((group) => {\n                       const calculator = getCalculatorsForGroup(group.code)\n                       if (!calculator) return null\n                       return (\n                         <div key={`lib-${group.code}`} className=\"liquid-glass-material rounded-[24px] p-6 flex flex-col gap-4\">\n                           <div className=\"flex items-center gap-3\">\n                              <div className=\"w-10 h-10 rounded-xl flex items-center justify-center glass-pill\">\n                                {getLibraryIcon(group.icon)}\n                              </div>\n                              <h3 className=\"font-bold text-slate-700 dark:text-slate-200\">\n                                {group.label}\n                              </h3>\n                           </div>\n                           <div>\n                              <p className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1\">\n                                Ferramentas\n                              </p>\n                              <p className=\"text-sm font-medium text-slate-600 dark:text-slate-300\">\n                                {calculator}\n                              </p>\n                           </div>\n                           <Button\n                              variant=\"secondary\"\n                              size=\"sm\"\n                              className=\"mt-auto\"\n                              onClick={() => {\n                                if (group.code === 'CV') setIsCalculatorOpen(true)\n                              }}\n                           >\n                              <Calculator className=\"w-4 h-4 mr-2\" /> Acessar\n                           </Button>\n                         </div>\n                       )\n                    })}\n                  </div>\n                </div>\n              )}\n\n              {viewMode === 'accessibility' && <AccessibilityGuide />}\n\n              {viewMode === 'protocol' && (\n                <div className=\"h-full w-full overflow-hidden\">\n                   <AnamnesisWorkspace \n                      activeTool={activeTool}\n                      onActiveToolChange={setActiveTool}\n                      leftContent={\n                        <div className=\"flex flex-col h-full bg-transparent\">\n                           <div className=\"shrink-0 flex items-center gap-2 px-6 pt-5 pb-2\">\n                              <Button variant=\"secondary\" size=\"sm\" onClick={() => setViewMode('selection')}>\n                                 <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                                 Voltar\n                              </Button>\n                           </div>\n                           <div className=\"flex-1 overflow-hidden px-4\">\n                              <AnamnesisView\n                                 patient={patient}\n                                 sections={sections}\n                                 data={anamnesisData}\n                                 onDataChange={setAnamnesisData}\n                                 onAddSymptom={handleOpenAddModal}\n                                 complaint={activeComplaint}\n                              />\n                           </div>\n                        </div>\n                      }\n                      rightContent={\n                        <SmartNotePanel \n                           noteBlocks={noteBlocks}\n                           isUppercaseMode={isUppercaseMode}\n                           setIsUppercaseMode={setIsUppercaseMode}\n                           onPrint={handlePrint}\n                           editingBlockId={editingNoteBlockId}\n                           setEditingBlockId={setEditingNoteBlockId}\n                           manualEdits={manualNoteEdits}\n                           setManualEdits={setManualNoteEdits}\n                           copyBlock={copyBlockToClipboard}\n                           copiedId={copiedId}\n                           footer={\n                              <div className=\"flex flex-col gap-4 w-full\">\n                                {/* Segmented Control (ChatWW/Scores) - iOS Style */}\n                                <div className=\"w-full h-16 p-1.5 liquid-glass-material bg-white/40 dark:bg-black/40 backdrop-blur-3xl rounded-2xl border border-white/40 dark:border-white/10 shadow-[0_20px_50px_rgba(0,0,0,0.1)]\">\n                                  <div className=\"flex items-center gap-1.5 h-full relative\">\n\n                                    {/* Sliding White Pill Indicator */}\n                                    <div\n                                      className=\"absolute top-0 bottom-0 left-0 w-[calc(50%-3px)] bg-white dark:bg-white/20 rounded-[14px] shadow-lg transition-all duration-500 ease-[cubic-bezier(0.25,1,0.5,1)]\"\n                                      style={{\n                                        transform: activeTool === 'calculators' ? 'translateX(calc(100% + 6px))' : 'translateX(0)',\n                                        opacity: activeTool ? 1 : 0\n                                      }}\n                                    />\n\n                                    {/* ChatWW Segment */}\n                                    <button\n                                      onClick={() => setActiveTool(activeTool === 'chat' ? null : 'chat')}\n                                      className={`\n                                        relative z-10 flex-1 h-full rounded-[14px]\n                                        flex items-center justify-center gap-2.5\n                                        transition-all duration-300\n                                        ${activeTool === 'chat'\n                                          ? 'text-slate-900 dark:text-white'\n                                          : 'text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300'}\n                                      `}\n                                      role=\"tab\"\n                                      aria-selected={activeTool === 'chat'}\n                                      aria-label=\"ChatWW - Medical Assistant\"\n                                    >\n                                      <MessageSquare className=\"w-5 h-5\" />\n                                      <span className=\"text-[12px] font-black uppercase tracking-widest\">ChatWW</span>\n                                    </button>\n\n                                    {/* Scores Segment */}\n                                    <button\n                                      onClick={() => setActiveTool(activeTool === 'calculators' ? null : 'calculators')}\n                                      className={`\n                                        relative z-10 flex-1 h-full rounded-[14px]\n                                        flex items-center justify-center gap-2.5\n                                        transition-all duration-300\n                                        ${activeTool === 'calculators'\n                                          ? 'text-slate-900 dark:text-white'\n                                          : 'text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300'}\n                                      `}\n                                      role=\"tab\"\n                                      aria-selected={activeTool === 'calculators'}\n                                      aria-label=\"Scores - Medical Calculators\"\n                                    >\n                                      <div className=\"relative\">\n                                        <Calculator className=\"w-5 h-5\" />\n                                        {hasCalculators && !activeTool && (\n                                          <span className=\"absolute -top-1.5 -right-1.5 w-3 h-3 bg-rose-500 rounded-full border-2 border-white dark:border-slate-900 animate-pulse shadow-sm\" />\n                                        )}\n                                      </div>\n                                      <span className=\"text-[12px] font-black uppercase tracking-widest\">Scores</span>\n                                    </button>\n                                  </div>\n                                </div>\n\n                                {/* Definir Fluxo Button (Primary Action) */}\n                                <div className=\"relative w-full\">\n                                  <button\n                                    onClick={() => setIsFlowMenuOpen(!isFlowMenuOpen)}\n                                    className=\"w-full h-16 rounded-2xl bg-linear-to-r from-slate-900 to-slate-800 dark:from-white dark:to-slate-200 text-white dark:text-slate-900 transition-all duration-500 shadow-2xl shadow-blue-500/10 group border-0 text-[12px] font-black uppercase tracking-widest hover:scale-[1.02] active:scale-95 flex items-center justify-center relative overflow-hidden\"\n                                  >\n                                     <div className=\"absolute inset-0 bg-linear-to-r from-blue-600 to-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\n                                     <div className=\"relative z-10 flex items-center\">\n                                        <GitBranch className=\"w-5 h-5 mr-3 transition-transform duration-700 group-hover:rotate-180\" />\n                                        Definir Fluxo\n                                     </div>\n                                  </button>\n                                  \n                                  {isFlowMenuOpen && (\n                                    <div className=\"absolute bottom-full left-0 right-0 z-20 mb-6 w-full animate-in fade-in slide-in-from-bottom-4 duration-500 ease-[cubic-bezier(0.23,1,0.32,1)]\">\n                                      <div className=\"p-3 liquid-glass-material bg-white/80! dark:bg-black/70! backdrop-blur-3xl rounded-[32px] border border-white/40 dark:border-white/10 shadow-[0_40px_100px_rgba(0,0,0,0.3)]\">\n                                         <div className=\"grid grid-cols-2 gap-2\">\n                                            {['Ambulatorial', 'Observação', 'Internação', 'UTI', 'Emergência'].map((status) => (\n                                              <button\n                                                key={status}\n                                                onClick={() => handleSetFlow(status.toLowerCase() as any)}\n                                                className={`\n                                                  px-4 py-4 rounded-[20px] text-[12px] font-black uppercase tracking-widest text-left transition-all duration-300\n                                                  ${status === 'Emergência' ? 'bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white col-span-2' : 'hover:bg-blue-500/10 hover:text-blue-500'}\n                                                `}\n                                              >\n                                                {status}\n                                              </button>\n                                            ))}\n                                         </div>\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                           }\n                        />\n                      }\n                      sidebarContent={{\n                        chat: <ChatWell />,\n                        calculators: <HeartScoreCalculator \n                          isOpen={true} // Controlled by AnamnesisWorkspace overlay\n                          onClose={() => setActiveTool(null)}\n                          patient={patient}\n                          onApply={handleApplyScore}\n                          // Note: In real app, props for antecedents would pass here\n                        />\n                      }}\n                   />\n                </div>\n              )}\n            </div>\n          </GlassPanel>\n        )}\n      </main>\n      {/* ... (Modals) */}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/sentry-example-page/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/sentry-example-page/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":30,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport * as Sentry from \"@sentry/nextjs\";\nimport { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\n// Custom error classes for testing\nclass SentryExampleFrontendError extends Error {\n  constructor(message: string | undefined) {\n    super(message);\n    this.name = \"SentryExampleFrontendError\";\n  }\n}\n\nexport default function SentryExamplePage() {\n  const [status, setStatus] = useState<{\n    type: \"idle\" | \"success\" | \"error\" | \"blocked\";\n    message: string;\n  }>({ type: \"idle\", message: \"\" });\n  const [isConnected, setIsConnected] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  useEffect(() => {\n    // Check connectivity by attempting to send a test event\n    async function checkConnectivity() {\n      try {\n        // Simple connectivity check - if Sentry is configured, it should work\n        // We'll assume connected by default and let errors show if there's a problem\n        setIsConnected(true);\n      } catch (error) {\n        setIsConnected(false);\n      }\n    }\n    checkConnectivity();\n  }, []);\n\n  const handleThrowError = async () => {\n    setIsLoading(true);\n    setStatus({ type: \"idle\", message: \"\" });\n\n    try {\n      await Sentry.startSpan(\n        {\n          name: \"Example Frontend/Backend Span\",\n          op: \"test\",\n        },\n        async (span) => {\n          span.setAttribute(\"test_type\", \"error_demo\");\n          span.setAttribute(\"user_action\", \"button_click\");\n\n              const res = await fetch(\"/api/sentry-example-api\");\n              if (!res.ok) {\n            span.setAttribute(\"api_error\", true);\n          }\n        }\n      );\n\n      throw new SentryExampleFrontendError(\n        \"This error is raised on the frontend of the example page.\"\n      );\n    } catch (error) {\n      Sentry.captureException(error);\n      setStatus({\n        type: \"success\",\n        message: \"Erro enviado para o Sentry com sucesso!\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleTestSpan = async () => {\n    setIsLoading(true);\n    setStatus({ type: \"idle\", message: \"\" });\n\n    try {\n      await Sentry.startSpan(\n        {\n          op: \"ui.click\",\n          name: \"Test Button Click\",\n        },\n        async (span) => {\n          const value = \"some config\";\n          const metric = \"some metric\";\n\n          span.setAttribute(\"config\", value);\n          span.setAttribute(\"metric\", metric);\n\n          // Simulate some work\n          await new Promise((resolve) => {\n            globalThis.setTimeout?.(resolve, 500);\n          });\n        }\n      );\n\n      setStatus({\n        type: \"success\",\n        message: \"Span criado e enviado para o Sentry!\",\n      });\n    } catch (error) {\n      setStatus({\n        type: \"error\",\n        message: \"Erro ao criar span: \" + String(error),\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleTestLogs = () => {\n    setIsLoading(true);\n    setStatus({ type: \"idle\", message: \"\" });\n\n    try {\n      const { logger } = Sentry;\n\n      if (logger) {\n        logger.trace(\"Starting test operation\", { operation: \"log_test\" });\n        logger.debug(logger.fmt`Testing debug log with userId: ${\"user_123\"}`);\n        logger.info(\"Test operation completed\", { operationId: 345 });\n        logger.warn(\"Rate limit reached for endpoint\", {\n          endpoint: \"/api/test\",\n          isEnterprise: false,\n        });\n        logger.error(\"Test error log\", {\n          orderId: \"order_123\",\n          amount: 99.99,\n        });\n\n        setStatus({\n          type: \"success\",\n          message: \"Logs enviados para o Sentry!\",\n        });\n      } else {\n        setStatus({\n          type: \"error\",\n          message: \"Logger não está disponível. Verifique a configuração do Sentry.\",\n        });\n      }\n    } catch (error) {\n      setStatus({\n        type: \"error\",\n        message: \"Erro ao enviar logs: \" + String(error),\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleTestAPI = async () => {\n    setIsLoading(true);\n    setStatus({ type: \"idle\", message: \"\" });\n\n    try {\n      await Sentry.startSpan(\n        {\n          op: \"http.client\",\n          name: \"GET /api/sentry-example-api\",\n        },\n        async (span) => {\n          const response = await fetch(\"/api/sentry-example-api\");\n          span.setAttribute(\"http.status_code\", response.status);\n          span.setAttribute(\"http.method\", \"GET\");\n\n          if (!response.ok) {\n            span.setAttribute(\"error\", true);\n            const error = new Error(`API returned ${response.status}`);\n            Sentry.captureException(error);\n            throw error;\n          }\n\n          return await response.json();\n        }\n      );\n\n      setStatus({\n        type: \"success\",\n        message: \"Requisição API rastreada no Sentry!\",\n      });\n    } catch (error) {\n      Sentry.captureException(error);\n      setStatus({\n        type: \"error\",\n        message: \"Erro na requisição API (esperado para teste)\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleTestException = () => {\n    setIsLoading(true);\n    setStatus({ type: \"idle\", message: \"\" });\n\n    try {\n      const error = new Error(\"Exceção de teste capturada pelo Sentry\");\n      error.name = \"TestException\";\n      Sentry.captureException(error, {\n        tags: {\n          test_type: \"manual_exception\",\n        },\n        extra: {\n          context: \"Sentry Example Page\",\n          timestamp: new Date().toISOString(),\n        },\n      });\n\n      setStatus({\n        type: \"success\",\n        message: \"Exceção capturada e enviada para o Sentry!\",\n      });\n    } catch (error) {\n      setStatus({\n        type: \"error\",\n        message: \"Erro ao capturar exceção: \" + String(error),\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleTestUndefinedFunction = () => {\n    setIsLoading(true);\n    setStatus({ type: \"idle\", message: \"\" });\n\n    try {\n      throw new ReferenceError(\"myUndefinedFunction is not defined\");\n    } catch (error) {\n      // Capture the error explicitly to ensure it's sent to Sentry\n      Sentry.captureException(error, {\n        tags: {\n          test_type: \"undefined_function\",\n          error_type: \"ReferenceError\",\n        },\n        extra: {\n          context: \"Sentry Example Page - Undefined Function Test\",\n          timestamp: new Date().toISOString(),\n          function_name: \"myUndefinedFunction\",\n        },\n      });\n\n      setStatus({\n        type: \"success\",\n        message: \"Erro de função indefinida capturado e enviado para o Sentry!\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background flex flex-col items-center justify-center p-8\">\n      <div className=\"max-w-4xl w-full space-y-8\">\n        {/* Header */}\n        <div className=\"text-center space-y-4\">\n          <div className=\"flex items-center justify-center gap-3\">\n            <svg\n              height=\"40\"\n              width=\"40\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"text-primary\"\n            >\n              <path\n                d=\"M21.85 2.995a3.698 3.698 0 0 1 1.353 1.354l16.303 28.278a3.703 3.703 0 0 1-1.354 5.053 3.694 3.694 0 0 1-1.848.496h-3.828a31.149 31.149 0 0 0 0-3.09h3.815a.61.61 0 0 0 .537-.917L20.523 5.893a.61.61 0 0 0-1.057 0l-3.739 6.494a28.948 28.948 0 0 1 9.63 10.453 28.988 28.988 0 0 1 3.499 13.78v1.542h-9.852v-1.544a19.106 19.106 0 0 0-2.182-8.85 19.08 19.08 0 0 0-6.032-6.829l-1.85 3.208a15.377 15.377 0 0 1 6.382 12.484v1.542H3.696A3.694 3.694 0 0 1 0 34.473c0-.648.17-1.286.494-1.849l2.33-4.074a8.562 8.562 0 0 1 2.689 1.536L3.158 34.17a.611.611 0 0 0 .538.917h8.448a12.481 12.481 0 0 0-6.037-9.09l-1.344-.772 4.908-8.545 1.344.77a22.16 22.16 0 0 1 7.705 7.444 22.193 22.193 0 0 1 3.316 10.193h3.699a25.892 25.892 0 0 0-3.811-12.033 25.856 25.856 0 0 0-9.046-8.796l-1.344-.772 5.269-9.136a3.698 3.698 0 0 1 3.2-1.849c.648 0 1.285.17 1.847.495Z\"\n                fill=\"currentColor\"\n              />\n            </svg>\n            <h1 className=\"text-3xl font-bold text-foreground\">\n              Sentry Example Page\n            </h1>\n          </div>\n\n          <p className=\"text-muted-foreground max-w-2xl mx-auto\">\n            Teste as funcionalidades do Sentry nesta página. Clique nos botões\n            abaixo e visualize os eventos no{\" \"}\n            <a\n              href=\"https://wellwaveoficial.sentry.io/issues/?project=4510497457831936\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-primary hover:underline\"\n            >\n              Sentry Dashboard\n            </a>\n            . Para mais detalhes sobre configuração do Sentry,{\" \"}\n            <a\n              href=\"https://docs.sentry.io/platforms/javascript/guides/nextjs/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-primary hover:underline\"\n            >\n              leia nossa documentação\n            </a>\n            .\n          </p>\n        </div>\n\n        {/* Status Message */}\n        {status.type !== \"idle\" && (\n          <div\n            className={`p-4 rounded-lg border ${\n              status.type === \"success\"\n                ? \"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800 text-green-900 dark:text-green-100\"\n                : status.type === \"error\"\n                ? \"bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800 text-red-900 dark:text-red-100\"\n                : \"bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-800 text-yellow-900 dark:text-yellow-100\"\n            }`}\n          >\n            <p className=\"font-medium\">{status.message}</p>\n          </div>\n        )}\n\n        {/* Connectivity Warning */}\n        {!isConnected && (\n          <div className=\"p-4 rounded-lg bg-destructive/10 border border-destructive/20 text-destructive\">\n            <p className=\"font-medium\">\n              ⚠️ Requisições de rede para o Sentry estão sendo bloqueadas, o que\n              impedirá a captura de erros. Tente desabilitar seu bloqueador de\n              anúncios para completar o teste.\n            </p>\n          </div>\n        )}\n\n        {/* Test Buttons */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <Button\n            onClick={handleThrowError}\n            disabled={!isConnected || isLoading}\n            variant=\"destructive\"\n            className=\"w-full\"\n          >\n            {isLoading ? \"Enviando...\" : \"Lançar Erro Completo\"}\n          </Button>\n\n          <Button\n            onClick={handleTestSpan}\n            disabled={!isConnected || isLoading}\n            variant=\"default\"\n            className=\"w-full\"\n          >\n            {isLoading ? \"Criando...\" : \"Testar Span (UI Click)\"}\n          </Button>\n\n          <Button\n            onClick={handleTestAPI}\n            disabled={!isConnected || isLoading}\n            variant=\"outline\"\n            className=\"w-full\"\n          >\n            {isLoading ? \"Testando...\" : \"Testar Span (API Call)\"}\n          </Button>\n\n          <Button\n            onClick={handleTestLogs}\n            disabled={!isConnected || isLoading}\n            variant=\"secondary\"\n            className=\"w-full\"\n          >\n            {isLoading ? \"Enviando...\" : \"Testar Logs\"}\n          </Button>\n\n          <Button\n            onClick={handleTestException}\n            disabled={!isConnected || isLoading}\n            variant=\"outline\"\n            className=\"w-full\"\n          >\n            {isLoading ? \"Capturando...\" : \"Capturar Exceção Manual\"}\n          </Button>\n\n          <Button\n            onClick={handleTestUndefinedFunction}\n            disabled={!isConnected || isLoading}\n            variant=\"destructive\"\n            className=\"w-full\"\n          >\n            {isLoading ? \"Testando...\" : \"Testar Função Indefinida\"}\n          </Button>\n        </div>\n\n        {/* Info Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8\">\n          <div className=\"p-4 rounded-lg border bg-card\">\n            <h3 className=\"font-semibold mb-2\">Exceptions</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Captura exceções automaticamente ou manualmente usando{\" \"}\n              <code className=\"text-xs bg-muted px-1 rounded\">\n                captureException\n              </code>\n            </p>\n          </div>\n\n          <div className=\"p-4 rounded-lg border bg-card\">\n            <h3 className=\"font-semibold mb-2\">Spans</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Rastreia performance de operações usando{\" \"}\n              <code className=\"text-xs bg-muted px-1 rounded\">startSpan</code>{\" \"}\n              com atributos e métricas\n            </p>\n          </div>\n\n          <div className=\"p-4 rounded-lg border bg-card\">\n            <h3 className=\"font-semibold mb-2\">Logs</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Envia logs estruturados usando o logger do Sentry com níveis\n              trace, debug, info, warn, error e fatal\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/sitemap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/app/test-glass/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/admin/ExtractionReview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/admin/GlassUploadZone.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'errorMessage' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState, useRef } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { Upload, FileText, CheckCircle, Loader2 } from 'lucide-react'\nimport { cn } from '@/lib/utils'\nimport { uploadDocument } from '@/app/actions/import-actions'\nimport { useRouter } from 'next/navigation'\n\ntype ExtractionMode = 'syndrome' | 'guideline'\n\nexport function GlassUploadZone() {\n  const [mode, setMode] = useState<ExtractionMode>('syndrome')\n  const [isDragging, setIsDragging] = useState(false)\n  const [isUploading, setIsUploading] = useState(false)\n  const [uploadStatus, setUploadStatus] = useState<'idle' | 'success' | 'error'>('idle')\n  const [errorMessage, setErrorMessage] = useState<string | null>(null)\n  const fileInputRef = useRef<globalThis.HTMLInputElement>(null)\n  const router = useRouter()\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragging(true)\n  }\n\n  const handleDragLeave = () => {\n    setIsDragging(false)\n  }\n\n  const handleDrop = async (e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragging(false)\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      await handleFile(e.dataTransfer.files[0])\n    }\n  }\n\n  const handleFile = async (file: globalThis.File) => {\n    if (file.type !== 'application/pdf' && file.type !== 'text/plain') {\n      setErrorMessage('Apenas arquivos PDF ou TXT são permitidos.')\n      setUploadStatus('error')\n      return\n    }\n\n    setIsUploading(true)\n    setUploadStatus('idle')\n    setErrorMessage(null)\n\n    const formData = new globalThis.FormData()\n    formData.append('file', file)\n\n    const result = await uploadDocument(formData, mode)\n\n    setIsUploading(false)\n\n    if (result.success) {\n      setUploadStatus('success')\n      // Refresh to show new list\n      router.refresh()\n    } else {\n      setUploadStatus('error')\n    }\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Mode Selector */}\n      <div className=\"flex gap-3 rounded-2xl glass-pill p-2\">\n        <button\n          onClick={() => setMode('syndrome')}\n          className={cn(\n            'flex-1 rounded-xl px-6 py-3 text-sm font-medium transition-all duration-200',\n            mode === 'syndrome'\n              ? 'glass-pill bg-blue-500/90 text-white shadow-lg shadow-blue-500/20'\n              : 'text-slate-600 dark:text-slate-400 hover:bg-white/20 dark:hover:bg-white/10'\n          )}\n        >\n          <div className=\"flex flex-col items-center gap-1\">\n            <span>Syndrome Extraction</span>\n            <span className=\"text-xs opacity-70\">Standard medical protocol</span>\n          </div>\n        </button>\n        <button\n          onClick={() => setMode('guideline')}\n          className={cn(\n            'flex-1 rounded-xl px-6 py-3 text-sm font-medium transition-all duration-200',\n            mode === 'guideline'\n              ? 'btn-primary-glass text-white shadow-lg'\n              : 'text-slate-600 dark:text-slate-400 hover:bg-white/20 dark:hover:bg-white/10'\n          )}\n        >\n          <div className=\"flex flex-col items-center gap-1\">\n            <span>Brazilian Guideline (Flash + Anamnese)</span>\n            <span className=\"text-xs opacity-70\">Dual template generation</span>\n          </div>\n        </button>\n      </div>\n\n      {/* Upload Zone */}\n      <motion.div\n        className={cn(\n          'relative overflow-hidden rounded-3xl border-2 border-dashed transition-all duration-300',\n          'glass-molded rim-light-ios26 inner-glow-ios26',\n          isDragging\n            ? 'border-blue-500 bg-blue-500/10 scale-[1.02] ring-2 ring-blue-500/20'\n            : 'border-white/40 dark:border-white/20 hover:border-white/60'\n        )}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n      >\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        className=\"hidden\"\n        accept=\".pdf,.txt\"\n        onChange={(e) => e.target.files?.[0] && handleFile(e.target.files[0])}\n      />\n\n      <div className=\"flex flex-col items-center justify-center p-12 text-center\">\n        <AnimatePresence mode=\"wait\">\n          {isUploading ? (\n            <motion.div\n              key=\"uploading\"\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.8, opacity: 0 }}\n              className=\"flex flex-col items-center gap-4\"\n            >\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 animate-pulse rounded-full bg-blue-500/20 blur-xl\" />\n                <Loader2 className=\"h-16 w-16 animate-spin text-primary-blue\" />\n              </div>\n              <p className=\"text-lg font-medium text-slate-700\">Processando documento...</p>\n              <p className=\"text-sm text-slate-500\">Extraindo texto e analisando com IA</p>\n            </motion.div>\n          ) : uploadStatus === 'success' ? (\n            <motion.div\n              key=\"success\"\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              className=\"flex flex-col items-center gap-4\"\n            >\n              <div className=\"rounded-full glass-pill bg-green-500/20 p-4\">\n                <CheckCircle className=\"h-12 w-12 text-green-600 dark:text-green-400\" />\n              </div>\n              <p className=\"text-lg font-medium text-slate-700 dark:text-slate-200\">Upload concluído!</p>\n              <button\n                onClick={() => setUploadStatus('idle')}\n                className=\"text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline\"\n              >\n                Enviar outro arquivo\n              </button>\n            </motion.div>\n          ) : (\n            <motion.div\n              key=\"idle\"\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              className=\"flex flex-col items-center gap-6\"\n            >\n              <div className=\"rounded-2xl glass-pill rim-light-ios26 p-6\">\n                <Upload className=\"h-12 w-12 text-slate-600 dark:text-slate-400\" />\n              </div>\n              <div>\n                <h3 className=\"text-xl font-semibold text-slate-800 dark:text-slate-200\">\n                  {mode === 'guideline'\n                    ? 'Arraste sua diretriz médica brasileira aqui'\n                    : 'Arraste seu documento aqui'}\n                </h3>\n                <p className=\"mt-2 text-slate-500 dark:text-slate-400\">\n                  {mode === 'guideline'\n                    ? 'SBC, SBPT, AMB, Ministério da Saúde (PDF ou TXT)'\n                    : 'Suporta PDF e TXT (Protocolos, Diretrizes, Artigos)'}\n                </p>\n              </div>\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                className=\"btn-primary-glass text-white px-8 py-3 rounded-xl font-medium flex items-center gap-2 shadow-lg shadow-blue-500/20 hover:scale-105 transition-all\"\n              >\n                <FileText className=\"h-4 w-4\" />\n                Selecionar Arquivo\n              </button>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Mode Info Badge */}\n        {mode === 'guideline' && uploadStatus === 'idle' && (\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"mt-4 rounded-xl glass-pill px-4 py-3 text-xs text-slate-600 dark:text-slate-400\"\n          >\n            <strong>Guideline Mode:</strong> Generates Flash template (2-3 min) + Anamnese Well checkboxes (30-50 items) from Brazilian medical guidelines.\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/CategoryNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/CollaborationPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/EmergencyModeBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/ProgressStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/SectionForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/SeverityIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/anamnese-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":278,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":278,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":296,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":296,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_error' is defined but never used.","line":327,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":327,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState, useMemo, useTransition, useCallback, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { CheckboxCategory } from '@prisma/client'\nimport { Save, RotateCcw, FileText, List, MessageSquare } from 'lucide-react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { cn } from '@/lib/utils'\nimport { CheckboxGroup } from './checkbox-group'\nimport { NarrativePreview } from './narrative-preview'\nimport { RedFlagAlert } from './red-flag-alert'\nimport { ComplaintSelector } from './complaint-selector'\nimport { PriorityCheckboxPanel } from './priority-checkbox-panel'\nimport { generateNarrative, detectRedFlags, type OutputMode } from '@/lib/anamnese/generate-narrative'\nimport { saveAnamneseSession, markSessionAsCopied } from '@/lib/anamnese/actions'\nimport { useToast } from '@/hooks/use-toast'\nimport { analytics } from '@/lib/analytics'\nimport { usePatientStore } from '@/stores/patient-store'\nimport type { CheckboxCategory as CheckboxCategoryType } from '@/lib/types/medical'\n\ntype CheckboxData = {\n  id: string\n  category: CheckboxCategory\n  displayText: string\n  narrativeText: string\n  isRedFlag: boolean\n  isNegative: boolean\n  orderIndex: number\n}\n\ntype SyndromeData = {\n  id: string\n  name: string\n  code: string\n  checkboxes: CheckboxData[]\n}\n\ninterface AnamneseFormProps {\n  syndrome: SyndromeData\n}\n\nconst CATEGORY_LABELS: Record<CheckboxCategory, string> = {\n  QP: 'Queixa Principal',\n  HDA: 'Historia da Doenca Atual',\n  ANTECEDENTES: 'Antecedentes Pessoais',\n  MEDICACOES: 'Medicacoes em Uso',\n  ALERGIAS: 'Alergias',\n  HABITOS: 'Habitos de Vida',\n  EXAME_FISICO: 'Exame Fisico',\n  NEGATIVAS: 'Negativas Pertinentes',\n}\n\nconst CATEGORY_ORDER: CheckboxCategory[] = [\n  'QP',\n  'HDA',\n  'ANTECEDENTES',\n  'MEDICACOES',\n  'ALERGIAS',\n  'HABITOS',\n  'EXAME_FISICO',\n  'NEGATIVAS',\n]\n\nexport function AnamneseForm({ syndrome }: AnamneseFormProps) {\n  const router = useRouter()\n  const { toast } = useToast()\n  const [isPending, startTransition] = useTransition()\n\n  // Get patient context from store\n  const gender = usePatientStore((state) => state.gender)\n  const isPediatric = usePatientStore((state) => state.isPediatric)\n  const painIntensity = usePatientStore((state) => state.painIntensity)\n  const evolutionType = usePatientStore((state) => state.evolutionType)\n  const onsetType = usePatientStore((state) => state.onsetType)\n\n  const patientContext = useMemo(() => ({\n    gender,\n    isPediatric,\n    painIntensity: painIntensity > 0 ? painIntensity : undefined,\n    evolutionType,\n    onsetType,\n  }), [gender, isPediatric, painIntensity, evolutionType, onsetType])\n\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set())\n  const [outputMode, setOutputMode] = useState<OutputMode>('SUMMARY')\n  const [savedSessionId, setSavedSessionId] = useState<string | null>(null)\n\n  // State for complaint selector and priority checkboxes\n  const [selectedComplaintId, setSelectedComplaintId] = useState<string | null>(null)\n  const [prioritySelectedCheckboxes, setPrioritySelectedCheckboxes] = useState<Set<string>>(new Set())\n\n  // Group checkboxes by category\n  const groupedCheckboxes = useMemo(() => {\n    const groups: Record<CheckboxCategory, CheckboxData[]> = {} as Record<\n      CheckboxCategory,\n      CheckboxData[]\n    >\n\n    for (const category of CATEGORY_ORDER) {\n      groups[category] = syndrome.checkboxes\n        .filter((cb) => cb.category === category)\n        .sort((a, b) => a.orderIndex - b.orderIndex)\n    }\n\n    return groups\n  }, [syndrome.checkboxes])\n\n  // Get selected checkboxes data\n  const selectedCheckboxes = useMemo(() => {\n    return syndrome.checkboxes.filter((cb) => selectedIds.has(cb.id))\n  }, [syndrome.checkboxes, selectedIds])\n\n  // Generate narrative\n  const narrative = useMemo(() => {\n    return generateNarrative(selectedCheckboxes, outputMode, patientContext)\n  }, [selectedCheckboxes, outputMode, patientContext])\n\n  // Detect red flags\n  const redFlags = useMemo(() => {\n    return detectRedFlags(selectedCheckboxes)\n  }, [selectedCheckboxes])\n\n  const handleToggle = (id: string) => {\n    setSelectedIds((prev) => {\n      const next = new Set(prev)\n      if (next.has(id)) {\n        next.delete(id)\n      } else {\n        next.add(id)\n      }\n      return next\n    })\n    // Reset saved session when changing selection\n    setSavedSessionId(null)\n  }\n\n  const handleReset = () => {\n    setSelectedIds(new Set())\n    setSavedSessionId(null)\n    setSelectedComplaintId(null)\n    setPrioritySelectedCheckboxes(new Set())\n  }\n\n  // Handlers for complaint selector\n  const handleComplaintSelect = useCallback((complaintId: string) => {\n    setSelectedComplaintId(complaintId)\n    // Clear priority checkboxes when changing complaint\n    setPrioritySelectedCheckboxes(new Set())\n    // Track analytics\n    analytics.complaintSelection(complaintId, '')\n  }, [])\n\n  const handleComplaintClear = useCallback(() => {\n    setSelectedComplaintId(null)\n    setPrioritySelectedCheckboxes(new Set())\n  }, [])\n\n  // Helper function to find checkbox ID by label and category\n  const findCheckboxIdByLabel = useCallback((category: CheckboxCategory, label: string): string | null => {\n    const checkbox = syndrome.checkboxes.find(\n      cb => cb.category === category && cb.displayText === label\n    )\n    return checkbox?.id || null\n  }, [syndrome.checkboxes])\n\n  // Handler for priority checkboxes\n  const handlePriorityToggle = useCallback((label: string, category: CheckboxCategoryType) => {\n    const key = `${category}:${label}`\n    const checkboxId = findCheckboxIdByLabel(category, label)\n\n    // Se não encontrar o checkbox, logar e retornar\n    if (!checkboxId) {\n      console.warn(`Checkbox not found: ${category} - ${label}`)\n      return\n    }\n\n    // Atualizar estado visual do painel prioritário\n    setPrioritySelectedCheckboxes(prev => {\n      const next = new Set(prev)\n      if (next.has(key)) {\n        next.delete(key)\n      } else {\n        next.add(key)\n      }\n      return next\n    })\n\n    // CRÍTICO: Sincronizar com selectedIds para gerar narrativa\n    setSelectedIds(prev => {\n      const next = new Set(prev)\n      if (next.has(checkboxId)) {\n        next.delete(checkboxId)\n      } else {\n        next.add(checkboxId)\n      }\n      return next\n    })\n\n    // Reset saved session when changing selection\n    setSavedSessionId(null)\n  }, [findCheckboxIdByLabel])\n\n  // Sincronizar prioritySelectedCheckboxes quando selectedIds muda (sincronização reversa)\n  useEffect(() => {\n    if (!selectedComplaintId) return // Só sincroniza se houver queixa selecionada\n\n    setPrioritySelectedCheckboxes(prev => {\n      const next = new Set(prev)\n      let changed = false\n\n      // Para cada ID selecionado, adicionar ao set prioritário se não existir\n      selectedIds.forEach(id => {\n        const checkbox = syndrome.checkboxes.find(cb => cb.id === id)\n        if (checkbox) {\n          const key = `${checkbox.category}:${checkbox.displayText}`\n          if (!next.has(key)) {\n            next.add(key)\n            changed = true\n          }\n        }\n      })\n\n      // Remover do set prioritário se não estiver em selectedIds\n      Array.from(next).forEach(key => {\n        const [category, ...labelParts] = key.split(':')\n        const label = labelParts.join(':')\n        const checkboxId = findCheckboxIdByLabel(category as CheckboxCategory, label)\n        if (checkboxId && !selectedIds.has(checkboxId)) {\n          next.delete(key)\n          changed = true\n        }\n      })\n\n      return changed ? next : prev\n    })\n  }, [selectedIds, syndrome.checkboxes, findCheckboxIdByLabel, selectedComplaintId])\n\n  const handleSave = () => {\n    if (selectedIds.size === 0) {\n      toast({\n        title: 'Nenhum item selecionado',\n        description: 'Selecione pelo menos um item para salvar.',\n        variant: 'destructive',\n      })\n      return\n    }\n\n    startTransition(async () => {\n      try {\n        const session = await saveAnamneseSession({\n          syndromeId: syndrome.id,\n          checkedItems: Array.from(selectedIds),\n          generatedText: narrative,\n          outputMode,\n          redFlagsDetected: redFlags.map((rf) => rf.id),\n        })\n\n        setSavedSessionId(session.id)\n\n        // Track analytics events\n        analytics.anamneseCompleted(\n          syndrome.code,\n          selectedIds.size,\n          redFlags.length > 0,\n          outputMode\n        )\n        analytics.sessionSaved(syndrome.code, session.id)\n\n        // Track red flags if detected\n        redFlags.forEach((rf) => {\n          analytics.redFlagDetected(syndrome.code, rf.displayText, 'WARNING')\n        })\n\n        toast({\n          title: 'Anamnese salva!',\n          description: 'A anamnese foi salva no seu historico.',\n        })\n      } catch (_error) {\n        toast({\n          title: 'Erro ao salvar',\n          description: 'Ocorreu um erro ao salvar a anamnese. Tente novamente.',\n          variant: 'destructive',\n        })\n      }\n    })\n  }\n\n  const handleCopy = () => {\n    if (savedSessionId) {\n      // Track copy event\n      analytics.anamnaseCopied(syndrome.code, savedSessionId)\n\n      startTransition(async () => {\n        try {\n          await markSessionAsCopied(savedSessionId)\n        } catch (_error) {\n          // Silent fail - not critical\n        }\n      })\n    }\n  }\n\n  const handleOpenChat = () => {\n    if (!savedSessionId) {\n      toast({\n        title: 'Salve a anamnese primeiro',\n        description: 'Salve a anamnese antes de abrir o chat para ter contexto.',\n        variant: 'destructive',\n      })\n      return\n    }\n\n    startTransition(async () => {\n      try {\n        const response = await fetch('/api/chat/conversations', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ sessionId: savedSessionId }),\n        })\n\n        if (!response.ok) {\n          throw new Error('Failed to create conversation')\n        }\n\n        const conversation = await response.json()\n        router.push(`/chat/${conversation.id}`)\n      } catch (_error) {\n        toast({\n          title: 'Erro ao abrir chat',\n          description: 'Nao foi possivel iniciar o chat. Tente novamente.',\n          variant: 'destructive',\n        })\n      }\n    })\n  }\n\n  return (\n    <div className=\"grid gap-8 lg:grid-cols-[1fr,450px]\">\n      {/* Left Panel - Checkboxes */}\n      <div className=\"space-y-8\">\n        \n        {/* Complaint Selector */}\n        <div className=\"glass-molded rim-light-ios26 inner-glow-ios26 noise-grain rounded-[32px] p-6 shadow-xl\">\n          <ComplaintSelector\n            selectedComplaintId={selectedComplaintId}\n            onComplaintSelect={handleComplaintSelect}\n            onClear={handleComplaintClear}\n          />\n        </div>\n\n        {/* Priority Checkboxes Panel */}\n        {selectedComplaintId && (\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"glass-molded rim-light-ios26 inner-glow-ios26 noise-grain rounded-[32px] p-6 shadow-xl\"\n          >\n            <PriorityCheckboxPanel\n              complaintId={selectedComplaintId}\n              selectedCheckboxes={prioritySelectedCheckboxes}\n              onToggle={handlePriorityToggle}\n            />\n          </motion.div>\n        )}\n\n        {/* Mode Toggle and Main Controls */}\n        <div className=\"flex flex-wrap items-center justify-between gap-4 px-2\">\n          <div className=\"flex items-center gap-2 p-1.5 glass-pill rounded-2xl\">\n            <button\n              onClick={() => setOutputMode('SUMMARY')}\n              className={cn(\n                'flex items-center gap-2 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all',\n                outputMode === 'SUMMARY'\n                  ? 'glass-pill bg-blue-500/90 text-white shadow-lg shadow-blue-500/20'\n                  : 'text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-white/10'\n              )}\n            >\n              <List className=\"h-3.5 w-3.5\" />\n              Resumido\n            </button>\n            <button\n              onClick={() => setOutputMode('DETAILED')}\n              className={cn(\n                'flex items-center gap-2 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all',\n                outputMode === 'DETAILED'\n                  ? 'glass-pill bg-blue-500/90 text-white shadow-lg shadow-blue-500/20'\n                  : 'text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-white/10'\n              )}\n            >\n              <FileText className=\"h-3.5 w-3.5\" />\n              Detalhado\n            </button>\n          </div>\n\n          <div className=\"text-[10px] font-black text-slate-600 dark:text-slate-400 uppercase tracking-widest flex items-center gap-2 glass-pill px-4 py-2\">\n            <span className=\"w-2 h-2 rounded-full bg-blue-500 animate-pulse\" />\n            {selectedIds.size} Iten{selectedIds.size !== 1 ? 's' : ''} Selecionado{selectedIds.size !== 1 ? 's' : ''}\n          </div>\n        </div>\n\n        {/* Red Flag Alert */}\n        <RedFlagAlert redFlags={redFlags} />\n\n        {/* Checkbox Groups */}\n        <div className=\"space-y-10 px-1\">\n          {CATEGORY_ORDER.map((category) => (\n            <CheckboxGroup\n              key={category}\n              title={CATEGORY_LABELS[category]}\n              items={groupedCheckboxes[category]}\n              selectedIds={selectedIds}\n              onToggle={handleToggle}\n            />\n          ))}\n        </div>\n\n        {/* Sticky Action Footer for Mobile/Small Screens */}\n        <div className=\"flex flex-wrap items-center gap-4 border-t border-white/10 pt-8 pb-12\">\n          <button\n            onClick={handleReset}\n            disabled={selectedIds.size === 0}\n            className={cn(\n              'glass-pill px-4 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2',\n              selectedIds.size === 0\n                ? 'text-slate-400 cursor-not-allowed'\n                : 'text-slate-600 dark:text-slate-300 hover:bg-white/20 hover:scale-105'\n            )}\n          >\n            <RotateCcw className=\"h-3.5 w-3.5\" />\n            Limpar\n          </button>\n\n          <button\n            onClick={handleSave}\n            disabled={isPending || selectedIds.size === 0}\n            className={cn(\n              'px-8 py-3.5 rounded-[20px] font-black text-xs uppercase tracking-[0.2em] transition-all duration-300 flex items-center gap-3',\n              isPending || selectedIds.size === 0\n                ? 'glass-pill bg-slate-500/20 text-slate-400 cursor-not-allowed'\n                : 'btn-primary-glass text-white hover:scale-105 shadow-xl shadow-blue-500/10 active:scale-95'\n            )}\n          >\n            {isPending ? (\n              <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\n            ) : (\n              <Save className=\"h-4 w-4\" />\n            )}\n            {isPending ? 'Gravando...' : 'Finalizar Log'}\n          </button>\n\n          <button\n            onClick={handleOpenChat}\n            disabled={isPending || !savedSessionId}\n            className={cn(\n              'glass-pill px-4 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2',\n              isPending || !savedSessionId\n                ? 'text-slate-400 cursor-not-allowed'\n                : 'text-blue-600 dark:text-blue-400 hover:bg-blue-500/10 hover:scale-105'\n            )}\n          >\n            <MessageSquare className=\"h-3.5 w-3.5\" />\n            <span>Consultar EBM</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Right Panel - Preview */}\n      <div className=\"lg:sticky lg:top-8 lg:self-start\">\n        <NarrativePreview\n          narrative={narrative}\n          redFlagCount={redFlags.length}\n          onCopy={handleCopy}\n          className=\"h-full min-h-[500px]\"\n        />\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/anamnese-page-wrapper.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isContextSet' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":31,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { usePatientStore } from '@/stores/patient-store'\nimport { AnamneseForm } from './anamnese-form'\nimport { PatientContextModal } from './patient-context-modal'\nimport type { CheckboxCategory } from '@prisma/client'\n\ntype CheckboxData = {\n  id: string\n  category: CheckboxCategory\n  displayText: string\n  narrativeText: string\n  isRedFlag: boolean\n  isNegative: boolean\n  orderIndex: number\n}\n\ntype SyndromeData = {\n  id: string\n  name: string\n  code: string\n  checkboxes: CheckboxData[]\n}\n\ninterface AnamnesePageWrapperProps {\n  syndrome: SyndromeData\n}\n\nexport function AnamnesePageWrapper({ syndrome }: AnamnesePageWrapperProps) {\n  const { isContextSet, reset } = usePatientStore()\n  const [showModal, setShowModal] = useState(false)\n  const [isReady, setIsReady] = useState(false)\n\n  // Check if context is set on mount\n  useEffect(() => {\n    // Reset context for each new anamnese session\n    // This ensures the user always sets the context for the current patient\n    reset()\n    setShowModal(true)\n    setIsReady(true)\n  }, [reset])\n\n  const handleModalComplete = () => {\n    setShowModal(false)\n  }\n\n  // Don't render anything until we've checked the store\n  if (!isReady) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"animate-pulse text-muted-foreground\">Carregando...</div>\n      </div>\n    )\n  }\n\n  return (\n    <>\n      <PatientContextModal isOpen={showModal} onComplete={handleModalComplete} />\n      {!showModal && <AnamneseForm syndrome={syndrome} />}\n    </>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/checkbox-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/complaint-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/copy-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/narrative-preview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/patient-context-modal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsPediatric' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":20,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useState } from 'react'\nimport { User, ChevronRight, Phone as PhoneIcon, ShieldAlert, Calculator, Info } from 'lucide-react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { usePatientStore } from '@/stores/patient-store'\n\ninterface PatientContextModalProps {\n  isOpen: boolean\n  onComplete: () => void\n}\n\nexport const PatientContextModal: React.FC<PatientContextModalProps> = ({\n  isOpen,\n  onComplete,\n}) => {\n  const { setContext, markContextSet } = usePatientStore()\n\n  const [gender, setGender] = useState<'M' | 'F'>('M')\n  const [isPediatric, setIsPediatric] = useState(false)\n  const [age, setAge] = useState<string>('')\n  const [phone, setPhone] = useState<string>('')\n  const [allergies, setAllergies] = useState<string>('')\n  const [painIntensity, setPainIntensity] = useState(0)\n  const [showAdvanced, setShowAdvanced] = useState(false)\n  const [evolutionType, setEvolutionType] = useState<'agudo' | 'subagudo' | 'crônico' | undefined>()\n  const [onsetType, setOnsetType] = useState<'súbito' | 'progressivo' | 'insidioso' | undefined>()\n\n  if (!isOpen) return null\n\n  const handleComplete = () => {\n    setContext({\n      gender,\n      isPediatric: age ? parseInt(age) < 18 : isPediatric,\n      age,\n      phoneNumber: phone,\n      allergies,\n      painIntensity: painIntensity > 0 ? painIntensity : undefined,\n      evolutionType,\n      onsetType,\n    })\n    markContextSet()\n    onComplete()\n  }\n\n  const intensityLabel = (value: number): string => {\n    if (value === 0) return 'Sem dor'\n    if (value <= 3) return 'Leve'\n    if (value <= 6) return 'Moderada'\n    return 'Intensa'\n  }\n\n  const getIntensityColorClass = (value: number) => {\n    if (value === 0) return 'text-slate-500 bg-slate-100 dark:bg-slate-800'\n    if (value <= 3) return 'text-emerald-500 bg-emerald-500/10 border-emerald-500/30'\n    if (value <= 6) return 'text-amber-500 bg-amber-500/10 border-amber-500/30'\n    return 'text-rose-500 bg-rose-500/10 border-rose-500/30'\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-100 flex items-center justify-center p-4 overflow-hidden\">\n      <motion.div \n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        className=\"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-md\"\n      />\n      \n      <motion.div \n        initial={{ opacity: 0, scale: 0.95, y: 20, filter: 'blur(10px)' }}\n        animate={{ opacity: 1, scale: 1, y: 0, filter: 'blur(0px)' }}\n        className=\"w-full max-w-md bg-white/70 dark:bg-[#1c1c1e]/60 backdrop-blur-[60px] rounded-[48px] shadow-2xl border border-white/40 dark:border-white/10 overflow-hidden z-10\"\n      >\n        {/* Header */}\n        <div className=\"px-8 py-6 border-b border-white/20 dark:border-white/5 bg-white/20 dark:bg-white/5\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"p-3 rounded-2xl bg-blue-500 text-white shadow-lg shadow-blue-500/20\">\n              <User className=\"w-5 h-5\" />\n            </div>\n            <div>\n               <h2 className=\"text-2xl font-black tracking-tighter text-slate-900 dark:text-white leading-tight\">\n                Contexto Clínico\n              </h2>\n              <p className=\"text-[10px] text-slate-500 dark:text-slate-400 font-black uppercase tracking-[0.2em]\">\n                Otimizando a Narrativa\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Body */}\n        <div className=\"p-8 space-y-6 max-h-[70vh] overflow-y-auto custom-scrollbar\">\n          \n          {/* 1. Sexo e Idade */}\n          <section className=\"space-y-4\">\n            <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1\">\n              1. Identificação Essencial\n            </h3>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button\n                onClick={() => setGender('M')}\n                className={`flex flex-col items-center justify-center gap-2 p-5 rounded-[32px] border transition-all duration-300\n                  ${gender === 'M' \n                    ? 'bg-blue-500/20 border-blue-500/50 text-blue-600 dark:text-blue-400' \n                    : 'bg-white/5 border-white/10 text-slate-400 hover:bg-white/10'}`}\n              >\n                <span className=\"text-2xl font-black\">♂</span>\n                <span className=\"text-xs font-black uppercase tracking-widest\">Homem</span>\n              </button>\n              <button\n                onClick={() => setGender('F')}\n                className={`flex flex-col items-center justify-center gap-2 p-5 rounded-[32px] border transition-all duration-300\n                  ${gender === 'F' \n                    ? 'bg-rose-500/20 border-rose-500/50 text-rose-600 dark:text-rose-400' \n                    : 'bg-white/5 border-white/10 text-slate-400 hover:bg-white/10'}`}\n              >\n                <span className=\"text-2xl font-black\">♀</span>\n                <span className=\"text-xs font-black uppercase tracking-widest\">Mulher</span>\n              </button>\n            </div>\n\n            <div className=\"relative group\">\n                <input \n                  type=\"number\"\n                  value={age}\n                  onChange={(e) => setAge(e.target.value)}\n                  placeholder=\"Idade (opcional)\"\n                  className=\"w-full age-input-glass pl-12 text-sm\"\n                />\n                <Calculator className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-blue-500 transition-colors\" />\n                <span className=\"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-slate-400\">ANOS</span>\n            </div>\n          </section>\n\n          {/* 2. Contato e Alergias */}\n          <section className=\"space-y-3\">\n            <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1\">\n              2. Informações Adicionais\n            </h3>\n            <div className=\"grid grid-cols-1 gap-3\">\n                <div className=\"relative group\">\n                    <input \n                      type=\"text\"\n                      value={phone}\n                      onChange={(e) => setPhone(e.target.value)}\n                      placeholder=\"Telefone (opcional)\"\n                      className=\"w-full age-input-glass pl-10 text-sm\"\n                    />\n                    <PhoneIcon className=\"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-blue-500 transition-colors\" />\n                </div>\n                <div className=\"relative group\">\n                    <input \n                      type=\"text\"\n                      value={allergies}\n                      onChange={(e) => setAllergies(e.target.value)}\n                      placeholder=\"Alergias (opcional)\"\n                      className=\"w-full age-input-glass pl-10 text-sm\"\n                    />\n                    <ShieldAlert className=\"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-rose-500 transition-colors\" />\n                </div>\n            </div>\n          </section>\n\n          {/* 3. Dor */}\n          <section className=\"space-y-4\">\n            <div className=\"flex items-center justify-between px-1\">\n              <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest\">\n                3. Intensidade da Dor\n              </h3>\n              <div className={`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${getIntensityColorClass(painIntensity)}`}>\n                {intensityLabel(painIntensity)}\n              </div>\n            </div>\n            \n            <div className=\"relative h-12 flex items-center\">\n              <input\n                type=\"range\"\n                min=\"0\" max=\"10\"\n                value={painIntensity}\n                onChange={(e) => setPainIntensity(parseInt(e.target.value))}\n                className=\"w-full h-1.5 bg-slate-200 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-blue-500\"\n              />\n              <div className=\"absolute -bottom-1 w-full flex justify-between px-0.5 pointer-events-none\">\n                {[0, 2, 4, 6, 8, 10].map(val => (\n                  <span key={val} className=\"text-[8px] font-black text-slate-400\">{val}</span>\n                ))}\n              </div>\n            </div>\n          </section>\n\n          {/* Advanced Toggles */}\n          <div className=\"space-y-4 pt-4 border-t border-white/10\">\n            <button\n              onClick={() => setShowAdvanced(!showAdvanced)}\n              className=\"flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] text-blue-500 hover:text-blue-600 transition-colors\"\n            >\n              <ChevronRight className={`w-3.5 h-3.5 transition-transform duration-300 ${showAdvanced ? 'rotate-90' : ''}`} />\n              Parâmetros Avançados\n            </button>\n\n            <AnimatePresence>\n              {showAdvanced && (\n                <motion.div\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: 'auto' }}\n                  exit={{ opacity: 0, height: 0 }}\n                  className=\"space-y-6 overflow-hidden\"\n                >\n                  <section className=\"space-y-2\">\n                    <p className=\"text-[9px] font-black text-slate-400 uppercase tracking-widest pl-1\">Evolução</p>\n                    <div className=\"flex gap-2\">\n                      {(['agudo', 'subagudo', 'crônico'] as const).map((type) => (\n                        <button\n                          key={type}\n                          onClick={() => setEvolutionType(evolutionType === type ? undefined : type)}\n                          className={`flex-1 py-3 rounded-xl text-[10px] font-black uppercase border transition-all\n                            ${evolutionType === type ? 'bg-blue-500 text-white border-transparent' : 'bg-white/5 border-white/10 text-slate-400'}`}\n                        >\n                          {type}\n                        </button>\n                      ))}\n                    </div>\n                  </section>\n\n                  <section className=\"space-y-2\">\n                    <p className=\"text-[9px] font-black text-slate-400 uppercase tracking-widest pl-1\">Início</p>\n                    <div className=\"flex gap-2\">\n                      {(['súbito', 'progressivo', 'insidioso'] as const).map((type) => (\n                        <button\n                          key={type}\n                          onClick={() => setOnsetType(onsetType === type ? undefined : type)}\n                          className={`flex-1 py-3 rounded-xl text-[10px] font-black uppercase border transition-all\n                            ${onsetType === type ? 'bg-blue-500 text-white border-transparent' : 'bg-white/5 border-white/10 text-slate-400'}`}\n                        >\n                          {type}\n                        </button>\n                      ))}\n                    </div>\n                  </section>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-8 pt-4\">\n          <button\n            onClick={handleComplete}\n            className=\"w-full py-5 rounded-[24px] bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black text-xs uppercase tracking-[0.2em] shadow-xl hover:scale-[1.02] active:scale-95 transition-all\"\n          >\n            Iniciar Anamnese\n          </button>\n          <div className=\"mt-4 flex items-center justify-center gap-2 opacity-40\">\n               <Info className=\"w-3 h-3\" />\n               <p className=\"text-[8px] font-black uppercase tracking-widest\">Identificação Básica Opcional</p>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/priority-checkbox-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/anamnese/red-flag-alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/auth/forgot-password-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/auth/login-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/auth/register-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/cards/BloodPressureCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/cards/HeartRateCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[364,367],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[364,367],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React from 'react';\nimport { Heart, ChevronRight } from 'lucide-react';\nimport { ResponsiveContainer, AreaChart, Area, Tooltip } from 'recharts';\n\nconst data = [\n  { v: 65 }, { v: 68 }, { v: 62 }, { v: 75 }, { v: 85 }, { v: 80 }, { v: 72 }, { v: 68 }, { v: 75 }, { v: 82 }, { v: 70 }, { v: 65 }\n];\n\nconst CustomTooltip = ({ active, payload }: any) => {\n  if (active && payload && payload.length) {\n    return (\n      <div className=\"bg-white/80 dark:bg-slate-800/80 backdrop-blur-md px-3 py-2 rounded-xl border border-white/20 dark:border-white/10 shadow-[0_8px_16px_rgba(0,0,0,0.1)]\">\n        <p className=\"text-sm font-bold text-slate-700 dark:text-slate-200\">\n          {payload[0].value} <span className=\"text-xs font-medium text-slate-500 dark:text-slate-400\">bpm</span>\n        </p>\n      </div>\n    );\n  }\n  return null;\n};\n\nexport const HeartRateCard: React.FC = () => {\n  return (\n    <div className=\"w-full h-full p-6 rounded-[32px] bg-white/40 dark:bg-slate-800/40 backdrop-blur-2xl backdrop-saturate-[180%] border border-white/50 dark:border-white/10 shadow-[0_8px_30px_rgb(0,0,0,0.04)] relative overflow-hidden group hover:bg-white/50 dark:hover:bg-slate-800/60 transition-colors duration-500\">\n      <div className=\"flex justify-between items-start mb-2 relative z-10\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 rounded-full bg-red-500/10 dark:bg-red-500/20 flex items-center justify-center\">\n             <Heart className=\"w-5 h-5 text-red-500 fill-red-500\" />\n          </div>\n          <h3 className=\"font-bold text-lg text-slate-800 dark:text-slate-100 tracking-tight transition-colors\">Coração</h3>\n        </div>\n        <button className=\"w-8 h-8 rounded-full bg-white/50 dark:bg-slate-700/50 hover:bg-white dark:hover:bg-slate-600 flex items-center justify-center text-slate-400 dark:text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-all shadow-sm\">\n          <ChevronRight className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      <div className=\"h-40 w-[110%] -ml-[5%] -mb-6 mt-2\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={data}>\n            <defs>\n              <linearGradient id=\"colorHeart\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#EF4444\" stopOpacity={0.4}/>\n                <stop offset=\"95%\" stopColor=\"#EF4444\" stopOpacity={0}/>\n              </linearGradient>\n            </defs>\n            <Tooltip content={<CustomTooltip />} cursor={{ stroke: '#EF4444', strokeWidth: 1, strokeDasharray: '4 4' }} />\n            <Area \n              type=\"monotone\" \n              dataKey=\"v\" \n              stroke=\"#EF4444\" \n              strokeWidth={4}\n              fill=\"url(#colorHeart)\" \n              animationDuration={2000}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/cards/MedicationsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/cards/RemindersCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/cards/SmallStatsCards.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[464,467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[464,467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React from 'react';\nimport { Moon, Activity, Scale, RefreshCw, ChevronRight } from 'lucide-react';\nimport { ResponsiveContainer, BarChart, Bar, LineChart, Line, Tooltip } from 'recharts';\n\nconst sleepData = [\n  { v: 4 }, { v: 6 }, { v: 5 }, { v: 7 }, { v: 3 }, { v: 4 }, { v: 2 }\n];\n\nconst weightData = [\n  { v: 70 }, { v: 71 }, { v: 70.5 }, { v: 72 }, { v: 72.5 }, { v: 72 }, { v: 72.5 }\n];\n\nconst CustomTooltip = ({ active, payload, unit }: any) => {\n  if (active && payload && payload.length) {\n    return (\n      <div className=\"bg-white/80 dark:bg-slate-800/80 backdrop-blur-md px-2.5 py-1.5 rounded-lg border border-white/20 dark:border-white/10 shadow-lg z-50\">\n        <p className=\"text-xs font-bold text-slate-700 dark:text-slate-200\">\n          {payload[0].value} <span className=\"font-medium text-slate-500 dark:text-slate-400\">{unit}</span>\n        </p>\n      </div>\n    );\n  }\n  return null;\n};\n\n// Reusable Header\nconst CardHeader: React.FC<{ title: string; icon?: React.ReactNode }> = ({ title, icon }) => (\n  <div className=\"flex items-center justify-between w-full mb-3\">\n    <div className=\"flex items-center gap-2\">\n      {icon && <div className=\"scale-90\">{icon}</div>}\n      <h4 className=\"text-sm font-bold text-slate-700 dark:text-slate-200 tracking-tight transition-colors\">{title}</h4>\n    </div>\n    <button className=\"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors bg-white/40 dark:bg-slate-700/40 p-1 rounded-full\">\n      <ChevronRight className=\"w-3 h-3\" />\n    </button>\n  </div>\n);\n\nconst GlassCard: React.FC<{ children: React.ReactNode }> = ({ children }) => (\n  <div className=\"group relative p-5 rounded-[32px] bg-white/40 dark:bg-slate-800/40 backdrop-blur-2xl backdrop-saturate-[180%] border border-white/50 dark:border-white/10 shadow-[0_8px_30px_rgb(0,0,0,0.04)] hover:shadow-[0_8px_30px_rgb(0,0,0,0.08)] transition-all duration-300 flex flex-col h-full hover:bg-white/50 dark:hover:bg-slate-800/60 overflow-hidden\">\n    {/* Subtle Shine Effect */}\n    <div className=\"absolute inset-0 -translate-x-[150%] group-hover:translate-x-[150%] transition-transform duration-[1000ms] ease-in-out bg-gradient-to-r from-transparent via-white/30 dark:via-white/10 to-transparent skew-x-12 pointer-events-none z-0\" />\n    \n    {/* Content Wrapper */}\n    <div className=\"relative z-10 flex flex-col h-full flex-1\">\n      {children}\n    </div>\n  </div>\n);\n\nexport const SleepCard: React.FC = () => (\n  <GlassCard>\n    <CardHeader title=\"Sono\" icon={<Moon className=\"w-4 h-4 text-indigo-500 fill-indigo-500\" />} />\n    <div className=\"flex-1 flex flex-col justify-end\">\n        <p className=\"text-2xl font-bold text-slate-900 dark:text-white mb-2 tracking-tight transition-colors\">8<span className=\"text-sm text-slate-500 dark:text-slate-400 font-medium\">h</span> 12<span className=\"text-sm text-slate-500 dark:text-slate-400 font-medium\">m</span></p>\n        <div className=\"h-16 w-full rounded-xl overflow-hidden\">\n             <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <BarChart data={sleepData}>\n                    <Tooltip content={<CustomTooltip unit=\"h\" />} cursor={{ fill: 'rgba(99, 102, 241, 0.1)', radius: 4 }} />\n                    <Bar dataKey=\"v\" fill=\"#6366F1\" radius={[3, 3, 3, 3]} />\n                </BarChart>\n            </ResponsiveContainer>\n        </div>\n    </div>\n  </GlassCard>\n);\n\nexport const VigilanceCard: React.FC = () => (\n  <GlassCard>\n    <CardHeader title=\"Vigilância\" />\n    <div className=\"relative w-full h-full min-h-[100px] flex items-center justify-center\">\n         {/* Simple SVG Donut */}\n         <svg className=\"w-24 h-24 -rotate-90 drop-shadow-lg\" viewBox=\"0 0 36 36\">\n            <path className=\"text-white/40 dark:text-white/10 transition-colors\" d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\" />\n            <path className=\"text-emerald-500\" strokeDasharray=\"75, 100\" d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\" strokeLinecap=\"round\" />\n        </svg>\n        <Activity className=\"absolute w-6 h-6 text-emerald-600 dark:text-emerald-400\" />\n    </div>\n  </GlassCard>\n);\n\nexport const WeightCard: React.FC = () => (\n  <GlassCard>\n    <CardHeader title=\"Peso\" icon={<Scale className=\"w-4 h-4 text-orange-500\" />} />\n     <div className=\"flex-1 flex flex-col justify-end\">\n        <p className=\"text-2xl font-bold text-slate-900 dark:text-white mb-2 tracking-tight transition-colors\">72,5 <span className=\"text-sm font-medium text-slate-500 dark:text-slate-400\">kg</span></p>\n        <div className=\"h-16 w-full rounded-xl overflow-hidden relative\">\n             <ResponsiveContainer width=\"110%\" height=\"100%\">\n                <LineChart data={weightData}>\n                    <Tooltip content={<CustomTooltip unit=\"kg\" />} cursor={{ stroke: '#F97316', strokeWidth: 1, strokeDasharray: '2 2' }} />\n                    <Line type=\"monotone\" dataKey=\"v\" stroke=\"#F97316\" strokeWidth={3} dot={false} />\n                </LineChart>\n            </ResponsiveContainer>\n        </div>\n    </div>\n  </GlassCard>\n);\n\nexport const CycleCard: React.FC = () => (\n  <GlassCard>\n    <CardHeader title=\"Ciclo\" />\n     <div className=\"relative w-full h-full min-h-[100px] flex items-center justify-center\">\n         {/* Simple SVG Donut */}\n         <svg className=\"w-24 h-24 -rotate-90 drop-shadow-lg\" viewBox=\"0 0 36 36\">\n            <path className=\"text-white/40 dark:text-white/10 transition-colors\" d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\" />\n            <path className=\"text-pink-500\" strokeDasharray=\"60, 100\" d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\" strokeLinecap=\"round\" />\n        </svg>\n        <RefreshCw className=\"absolute w-6 h-6 text-pink-500 dark:text-pink-400\" />\n    </div>\n  </GlassCard>\n);","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/cards/SummaryCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/chat/chat-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/chat/chat-interface.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/chat/chatwell-demo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/chat/citation-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/chat/message-bubble.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/chat/typing-indicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/error-boundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/glass/GlassPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/AccessibilityGuide.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'description' is defined but never used. Allowed unused args must match /^_/u.","line":17,"column":104,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":115}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\n\nimport React from 'react';\nimport { Check, X, Info } from 'lucide-react';\n\ninterface ContrastRowProps {\n  bgName: string;\n  bgClass: string;\n  textName: string;\n  textClass: string;\n  ratio: string;\n  level: 'AA' | 'AAA' | 'Fail';\n  description: string;\n}\n\nconst ContrastRow: React.FC<ContrastRowProps> = ({ bgName, bgClass, textName, textClass, ratio, level, description }) => (\n  <div className=\"grid grid-cols-12 gap-4 items-center p-4 border-b border-slate-200 dark:border-white/5 last:border-0 hover:bg-black/5 dark:hover:bg-white/5 transition-colors\">\n    {/* Visual Preview */}\n    <div className=\"col-span-12 md:col-span-4 relative h-16 rounded-xl overflow-hidden shadow-sm ring-1 ring-black/5 dark:ring-white/10\">\n       {/* Base Background (to simulate glass effect over it) */}\n       <div className=\"absolute inset-0 bg-gradient-to-br from-slate-200 to-blue-100 dark:from-slate-900 dark:to-black\"></div>\n       \n       {/* The Material Being Tested */}\n       <div className={`absolute inset-0 flex items-center justify-center ${bgClass} backdrop-blur-md`}>\n          <span className={`text-sm font-bold ${textClass}`}>Texto de Exemplo</span>\n       </div>\n    </div>\n\n    {/* Details */}\n    <div className=\"col-span-6 md:col-span-3\">\n       <p className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1\">Fundo</p>\n       <p className=\"text-sm font-semibold text-slate-700 dark:text-slate-200\">{bgName}</p>\n       <code className=\"text-[10px] text-slate-500 bg-slate-100 dark:bg-white/10 px-1.5 py-0.5 rounded mt-1 inline-block\">{bgClass}</code>\n    </div>\n\n    <div className=\"col-span-6 md:col-span-3\">\n       <p className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1\">Texto</p>\n       <p className=\"text-sm font-semibold text-slate-700 dark:text-slate-200\">{textName}</p>\n       <code className=\"text-[10px] text-slate-500 bg-slate-100 dark:bg-white/10 px-1.5 py-0.5 rounded mt-1 inline-block\">{textClass}</code>\n    </div>\n\n    {/* Score */}\n    <div className=\"col-span-12 md:col-span-2 flex items-center justify-end gap-3\">\n       <div className=\"text-right\">\n          <p className=\"text-xs font-bold text-slate-400 uppercase\">Ratio</p>\n          <p className=\"font-mono font-bold text-slate-700 dark:text-slate-200\">{ratio}</p>\n       </div>\n       <div className={`\n          flex items-center justify-center w-10 h-10 rounded-full border-2 font-bold text-xs\n          ${level === 'AAA' ? 'bg-emerald-100 border-emerald-500 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400' : \n            level === 'AA' ? 'bg-blue-100 border-blue-500 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400' :\n            'bg-red-100 border-red-500 text-red-700 dark:bg-red-900/30 dark:text-red-400'}\n       `}>\n          {level}\n       </div>\n    </div>\n  </div>\n);\n\nexport const AccessibilityGuide: React.FC = () => {\n  return (\n    <div className=\"h-full bg-white/40 dark:bg-slate-800/40 backdrop-blur-3xl backdrop-saturate-[180%] rounded-[36px] border border-white/60 dark:border-white/5 shadow-sm overflow-y-auto custom-scrollbar p-8 animate-in fade-in duration-500\">\n       \n       <div className=\"flex items-center gap-3 mb-8\">\n          <div className=\"p-3 rounded-2xl bg-indigo-500/10 text-indigo-500\">\n             <Check className=\"w-6 h-6\" />\n          </div>\n          <div>\n            <h2 className=\"text-2xl font-bold text-slate-800 dark:text-white tracking-tight\">Guia de Acessibilidade & Contraste</h2>\n            <p className=\"text-sm text-slate-500 dark:text-slate-400\">Validação WCAG 2.1 para materiais translúcidos e tipografia.</p>\n          </div>\n       </div>\n\n       <div className=\"space-y-8\">\n          {/* Section 1: Light Mode Glass */}\n          <div className=\"bg-white/60 dark:bg-black/20 rounded-[24px] border border-white/50 dark:border-white/5 overflow-hidden\">\n             <div className=\"px-6 py-4 border-b border-slate-200 dark:border-white/5 bg-slate-50/50 dark:bg-white/5 flex justify-between items-center\">\n                <h3 className=\"font-bold text-slate-700 dark:text-slate-200\">Modo Claro (Light Mode)</h3>\n                <span className=\"text-[10px] font-bold uppercase tracking-widest text-slate-400\">Target: Glassmorphism</span>\n             </div>\n             \n             <ContrastRow \n                bgName=\"Glass Surface (Default)\"\n                bgClass=\"bg-white/40\"\n                textName=\"Primary Text\"\n                textClass=\"text-slate-900\"\n                ratio=\"14.2 : 1\"\n                level=\"AAA\"\n                description=\"Texto principal sobre cartões padrão.\"\n             />\n             <ContrastRow \n                bgName=\"Glass Surface (Default)\"\n                bgClass=\"bg-white/40\"\n                textName=\"Secondary Text\"\n                textClass=\"text-slate-500\"\n                ratio=\"5.4 : 1\"\n                level=\"AA\"\n                description=\"Texto de apoio e legendas.\"\n             />\n             <ContrastRow \n                bgName=\"Active Element\"\n                bgClass=\"bg-white\"\n                textName=\"Accent Blue\"\n                textClass=\"text-blue-600\"\n                ratio=\"4.6 : 1\"\n                level=\"AA\"\n                description=\"Links e botões ativos.\"\n             />\n             <ContrastRow \n                bgName=\"Destructive Bg\"\n                bgClass=\"bg-red-100\"\n                textName=\"Destructive Text\"\n                textClass=\"text-red-700\"\n                ratio=\"5.8 : 1\"\n                level=\"AA\"\n                description=\"Alertas e erros (Badges).\"\n             />\n          </div>\n\n          {/* Section 2: Dark Mode Glass */}\n          <div className=\"bg-white/60 dark:bg-black/20 rounded-[24px] border border-white/50 dark:border-white/5 overflow-hidden\">\n             <div className=\"px-6 py-4 border-b border-slate-200 dark:border-white/5 bg-slate-50/50 dark:bg-white/5 flex justify-between items-center\">\n                <h3 className=\"font-bold text-slate-700 dark:text-slate-200\">Modo Escuro (Dark Mode)</h3>\n                <span className=\"text-[10px] font-bold uppercase tracking-widest text-slate-400\">Target: Depth</span>\n             </div>\n             \n             <ContrastRow \n                bgName=\"Dark Surface (Base)\"\n                bgClass=\"bg-slate-900/60\"\n                textName=\"Primary Text\"\n                textClass=\"text-white\"\n                ratio=\"16.5 : 1\"\n                level=\"AAA\"\n                description=\"Texto principal sobre fundo escuro.\"\n             />\n             <ContrastRow \n                bgName=\"Dark Surface (Base)\"\n                bgClass=\"bg-slate-900/60\"\n                textName=\"Secondary Text\"\n                textClass=\"text-slate-400\"\n                ratio=\"6.1 : 1\"\n                level=\"AA\"\n                description=\"Texto de apoio em modo noturno.\"\n             />\n             <ContrastRow \n                bgName=\"Accent Surface\"\n                bgClass=\"bg-blue-900/30\"\n                textName=\"Accent Text\"\n                textClass=\"text-blue-400\"\n                ratio=\"5.2 : 1\"\n                level=\"AA\"\n                description=\"Elementos interativos e destaques.\"\n             />\n          </div>\n\n          {/* Info Box */}\n          <div className=\"flex gap-4 p-5 rounded-2xl bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30\">\n             <Info className=\"w-6 h-6 text-blue-600 dark:text-blue-400 shrink-0\" />\n             <div>\n                <h4 className=\"font-bold text-blue-800 dark:text-blue-200 text-sm mb-1\">Critérios de Aprovação</h4>\n                <p className=\"text-xs text-blue-700 dark:text-blue-300 leading-relaxed\">\n                   O sistema utiliza a escala WCAG 2.1. Nível <strong>AA</strong> requer contraste de 4.5:1 para texto normal e 3:1 para texto grande/interface. Nível <strong>AAA</strong> requer 7:1 para texto normal. Materiais translúcidos são calculados baseando-se na cor média do \"borrão\" (blur) sobre o fundo padrão da aplicação.\n                </p>\n             </div>\n          </div>\n       </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/AnamnesisView.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9978,9981],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9978,9981],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'activeSectionId'. Either include it or remove the dependency array.","line":302,"column":6,"nodeType":"ArrayExpression","endLine":302,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [activeSectionId, sections]","fix":{"range":[12071,12081],"text":"[activeSectionId, sections]"}}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":306,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12203,12206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12203,12206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":344,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":344,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13513,13516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13513,13516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":351,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":351,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13800,13803],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13800,13803],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/AnamnesisWorkspace.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/AutoRedFlagAlert.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'result.hasRedFlags'. Either include it or remove the dependency array.","line":38,"column":6,"nodeType":"ArrayExpression","endLine":38,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [result.alerts.length, result.hasRedFlags]","fix":{"range":[1044,1066],"text":"[result.alerts.length, result.hasRedFlags]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport * as React from 'react'\nimport { useEffect, useState } from 'react'\nimport { AlertTriangle, AlertCircle, XCircle, ChevronDown, ChevronUp, X } from 'lucide-react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport {\n  DetectionResult,\n  RedFlagAlert as RedFlagAlertType,\n  groupAlertsBySeverity\n} from '@/lib/anamnese/red-flag-detector'\n\ninterface AutoRedFlagAlertProps {\n  result: DetectionResult\n  onDismiss?: () => void\n  onActionClick?: (alert: RedFlagAlertType) => void\n  expanded?: boolean\n}\n\n/**\n * Componente de alerta automático para Red Flags\n * Exibe alertas detectados baseados nos sintomas selecionados\n */\nexport function AutoRedFlagAlert({\n  result,\n  onDismiss,\n  onActionClick,\n  expanded: defaultExpanded = true\n}: AutoRedFlagAlertProps) {\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded)\n  const [dismissed, setDismissed] = useState(false)\n\n  // Reset dismissed state when new alerts appear\n  useEffect(() => {\n    if (result.hasRedFlags) {\n      setDismissed(false)\n    }\n  }, [result.alerts.length])\n\n  if (!result.hasRedFlags || dismissed) {\n    return null\n  }\n\n  const grouped = groupAlertsBySeverity(result.alerts)\n  const hasMultipleAlerts = result.alerts.length > 1\n\n  // Cores e ícones baseados na severidade\n  const severityConfig = {\n    critical: {\n      bg: 'bg-red-50 dark:bg-red-950/40',\n      border: 'border-red-200 dark:border-red-800',\n      text: 'text-red-800 dark:text-red-200',\n      icon: XCircle,\n      iconColor: 'text-red-500',\n      badge: 'bg-red-500 text-white',\n      pulse: true\n    },\n    danger: {\n      bg: 'bg-orange-50 dark:bg-orange-950/40',\n      border: 'border-orange-200 dark:border-orange-800',\n      text: 'text-orange-800 dark:text-orange-200',\n      icon: AlertTriangle,\n      iconColor: 'text-orange-500',\n      badge: 'bg-orange-500 text-white',\n      pulse: false\n    },\n    warning: {\n      bg: 'bg-yellow-50 dark:bg-yellow-950/40',\n      border: 'border-yellow-200 dark:border-yellow-800',\n      text: 'text-yellow-800 dark:text-yellow-200',\n      icon: AlertCircle,\n      iconColor: 'text-yellow-600',\n      badge: 'bg-yellow-500 text-white',\n      pulse: false\n    }\n  }\n\n  const config = severityConfig[result.highestSeverity as keyof typeof severityConfig] || severityConfig.warning\n  const Icon = config.icon\n\n  const handleDismiss = () => {\n    setDismissed(true)\n    onDismiss?.()\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: -20, scale: 0.95 }}\n      animate={{ opacity: 1, y: 0, scale: 1 }}\n      exit={{ opacity: 0, y: -20, scale: 0.95 }}\n      transition={{ type: 'spring', stiffness: 300, damping: 25 }}\n      className={`\n        rounded-2xl border-2 ${config.bg} ${config.border}\n        overflow-hidden shadow-lg\n        ${config.pulse ? 'animate-pulse-subtle' : ''}\n      `}\n    >\n      {/* Header */}\n      <div\n        className={`\n          flex items-center justify-between px-4 py-3 cursor-pointer\n          hover:bg-black/5 dark:hover:bg-white/5 transition-colors\n        `}\n        onClick={() => hasMultipleAlerts && setIsExpanded(!isExpanded)}\n      >\n        <div className=\"flex items-center gap-3\">\n          <div className={`${config.iconColor} ${config.pulse ? 'animate-bounce' : ''}`}>\n            <Icon className=\"w-6 h-6\" />\n          </div>\n\n          <div>\n            <h3 className={`font-semibold ${config.text}`}>\n              {result.highestSeverity === 'critical' && '🚨 ALERTA CRÍTICO'}\n              {result.highestSeverity === 'danger' && '⚠️ Sinais de Alarme'}\n              {result.highestSeverity === 'warning' && 'ℹ️ Pontos de Atenção'}\n            </h3>\n            <p className={`text-sm opacity-80 ${config.text}`}>\n              {result.alerts.length} {result.alerts.length === 1 ? 'alerta detectado' : 'alertas detectados'}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          {result.requiresImmediateAction && (\n            <span className={`px-2 py-0.5 rounded-full text-xs font-bold ${config.badge}`}>\n              AÇÃO IMEDIATA\n            </span>\n          )}\n\n          {hasMultipleAlerts && (\n            <button\n              className={`p-1 rounded-lg hover:bg-black/10 dark:hover:bg-white/10 ${config.text}`}\n            >\n              {isExpanded ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\n            </button>\n          )}\n\n          {onDismiss && (\n            <button\n              onClick={(e) => { e.stopPropagation(); handleDismiss(); }}\n              className={`p-1 rounded-lg hover:bg-black/10 dark:hover:bg-white/10 ${config.text}`}\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Alert List */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"px-4 pb-4 space-y-3\">\n              {/* Critical Alerts */}\n              {grouped.critical.length > 0 && (\n                <AlertGroup\n                  alerts={grouped.critical}\n                  severity=\"critical\"\n                  onActionClick={onActionClick}\n                />\n              )}\n\n              {/* Danger Alerts */}\n              {grouped.danger.length > 0 && (\n                <AlertGroup\n                  alerts={grouped.danger}\n                  severity=\"danger\"\n                  onActionClick={onActionClick}\n                />\n              )}\n\n              {/* Warning Alerts */}\n              {grouped.warning.length > 0 && (\n                <AlertGroup\n                  alerts={grouped.warning}\n                  severity=\"warning\"\n                  onActionClick={onActionClick}\n                />\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  )\n}\n\n// Sub-component for alert groups\ninterface AlertGroupProps {\n  alerts: RedFlagAlertType[]\n  severity: 'critical' | 'danger' | 'warning'\n  onActionClick?: (alert: RedFlagAlertType) => void\n}\n\nfunction AlertGroup({ alerts, severity, onActionClick }: AlertGroupProps) {\n  const colors = {\n    critical: {\n      dot: 'bg-red-500',\n      action: 'bg-red-100 hover:bg-red-200 dark:bg-red-900/50 dark:hover:bg-red-800/50 text-red-700 dark:text-red-300'\n    },\n    danger: {\n      dot: 'bg-orange-500',\n      action: 'bg-orange-100 hover:bg-orange-200 dark:bg-orange-900/50 dark:hover:bg-orange-800/50 text-orange-700 dark:text-orange-300'\n    },\n    warning: {\n      dot: 'bg-yellow-500',\n      action: 'bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-900/50 dark:hover:bg-yellow-800/50 text-yellow-700 dark:text-yellow-300'\n    }\n  }\n\n  const config = colors[severity]\n\n  return (\n    <div className=\"space-y-2\">\n      {alerts.map((alert) => (\n        <div\n          key={alert.id}\n          className=\"flex items-start gap-3 p-3 rounded-xl bg-white/50 dark:bg-black/20\"\n        >\n          <div className={`w-2 h-2 rounded-full ${config.dot} mt-2 flex-shrink-0`} />\n\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"font-medium text-slate-900 dark:text-white text-sm\">\n              {alert.message}\n            </p>\n\n            <button\n              onClick={() => onActionClick?.(alert)}\n              className={`\n                mt-2 px-3 py-1.5 rounded-lg text-xs font-medium\n                transition-colors ${config.action}\n              `}\n            >\n              → {alert.action}\n            </button>\n\n            {alert.triggeredBy.length > 0 && (\n              <p className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">\n                Baseado em: {alert.triggeredBy.join(', ')}\n              </p>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\n// Exporta tipos úteis\nexport type { AutoRedFlagAlertProps }\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/CalculatorTriggerButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/ChatWell.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreHorizontal' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[695,698],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[695,698],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":149,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":149,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5900,5903],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5900,5903],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react'\nimport { Send, Paperclip, Sparkles, MoreHorizontal } from 'lucide-react'\nimport { motion, AnimatePresence } from 'framer-motion'\n\ninterface Message {\n  id: string\n  text: string\n  sender: 'user' | 'bot'\n  timestamp: Date\n}\n\nexport const ChatWell: React.FC = () => {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: '1',\n      text: 'Olá! Sou o ChatWW, seu assistente médico inteligente. Como posso ajudar você hoje?',\n      sender: 'bot',\n      timestamp: new Date(),\n    },\n  ])\n  const [inputValue, setInputValue] = useState('')\n  const [isTyping, setIsTyping] = useState(false)\n  const messagesEndRef = useRef<any>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages, isTyping])\n\n  const handleSend = () => {\n    if (!inputValue.trim()) return\n\n    const newMessage: Message = {\n      id: Date.now().toString(),\n      text: inputValue,\n      sender: 'user',\n      timestamp: new Date(),\n    }\n\n    setMessages((prev) => [...prev, newMessage])\n    setInputValue('')\n    setIsTyping(true)\n\n    // Simulate bot response\n    globalThis.setTimeout(() => {\n      const botResponse: Message = {\n        id: (Date.now() + 1).toString(),\n        text: 'Entendido. Estou analisando sua solicitação com base nos protocolos clínicos mais recentes e no contexto atual do paciente. Um momento, por favor.',\n        sender: 'bot',\n        timestamp: new Date(),\n      }\n      setMessages((prev) => [...prev, botResponse])\n      setIsTyping(false)\n    }, 2000)\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      handleSend()\n    }\n  }\n\n  return (\n    <div className=\"h-full flex flex-col overflow-hidden w-full relative\">\n      {/* MESSAGES AREA */}\n      <div className=\"flex-1 overflow-y-auto custom-scrollbar space-y-6 px-2 py-4\">\n        <AnimatePresence initial={false}>\n          {messages.map((msg) => (\n            <motion.div\n              key={msg.id}\n              initial={{ opacity: 0, scale: 0.9, y: 10, filter: 'blur(10px)' }}\n              animate={{ opacity: 1, scale: 1, y: 0, filter: 'blur(0px)' }}\n              transition={{ type: 'spring', damping: 20, stiffness: 150 }}\n              className={`flex w-full ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}\n            >\n              <div\n                className={`\n                  relative max-w-[85%] p-4 rounded-[28px] shadow-lg transition-all duration-300\n                  ${\n                    msg.sender === 'user'\n                      ? 'bg-linear-to-br from-blue-600 to-indigo-600 text-white rounded-tr-sm shadow-blue-500/20'\n                      : 'liquid-glass-material bg-white/40! dark:bg-white/5! border-white/40 dark:border-white/10 text-slate-800 dark:text-slate-100 rounded-tl-sm glass-texture'\n                  }\n                `}\n              >\n                {/* Subtle highlight for bot messages */}\n                {msg.sender === 'bot' && (\n                  <div className=\"absolute inset-0 rounded-[28px] border border-white/30 pointer-events-none\" />\n                )}\n                \n                <p className=\"text-[14px] leading-relaxed font-medium whitespace-pre-wrap\">{msg.text}</p>\n                <span\n                  className={`\n                    text-[9px] font-black mt-2 block uppercase tracking-widest opacity-60\n                    ${msg.sender === 'user' ? 'text-blue-100' : 'text-slate-500'}\n                  `}\n                >\n                  {msg.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                </span>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n\n        {isTyping && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            className=\"flex justify-start w-full\"\n          >\n            <div\n              className=\"liquid-glass-material bg-white/30! dark:bg-white/5! px-4 py-3 rounded-2xl rounded-tl-sm flex items-center gap-1.5\"\n            >\n              <span className=\"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce [animation-delay:-0.3s]\" />\n              <span className=\"w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce [animation-delay:-0.15s]\" />\n              <span className=\"w-1.5 h-1.5 bg-blue-300 rounded-full animate-bounce\" />\n            </div>\n          </motion.div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* INPUT AREA */}\n      <div className=\"p-4 pt-2 relative z-20\">\n        <motion.div\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          className=\"p-2 rounded-[32px] liquid-glass-material bg-white/40! dark:bg-black/30! backdrop-blur-3xl border-white/40 dark:border-white/10 shadow-2xl flex items-end gap-2 group focus-within:ring-2 focus-within:ring-blue-500/30 transition-all duration-500\"\n        >\n          <button\n            className=\"p-3.5 rounded-2xl hover:bg-blue-500/10 text-slate-500 dark:text-slate-400 transition-all duration-300 shrink-0 hover:scale-110 active:scale-95\"\n          >\n            <Paperclip className=\"w-5 h-5\" />\n          </button>\n\n          <textarea\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Perguntar ao ChatWW...\"\n            className=\"w-full bg-transparent border-none focus:ring-0 p-3.5 text-slate-800 dark:text-white placeholder:text-slate-500 font-medium resize-none max-h-32 min-h-[48px] custom-scrollbar text-[14px]\"\n            rows={1}\n            style={{ height: 'auto' }}\n            onInput={(e) => {\n              const target = e.target as any\n              target.style.height = 'auto'\n              target.style.height = target.scrollHeight + 'px'\n            }}\n          />\n\n          <button\n            onClick={handleSend}\n            disabled={!inputValue.trim()}\n            className={`\n              p-3.5 rounded-2xl transition-all duration-500 shrink-0\n              ${\n                inputValue.trim()\n                  ? 'bg-linear-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/40 hover:scale-110 active:scale-90 scale-105'\n                  : 'bg-slate-200 dark:bg-white/5 text-slate-400 cursor-not-allowed'\n              }\n            `}\n          >\n            <Send className=\"w-5 h-5\" />\n          </button>\n        </motion.div>\n        \n        <p className=\"text-[9px] text-center mt-3 text-slate-400 font-black uppercase tracking-widest opacity-60\">\n          IA MÉDICA DE ALTA FIDELIDADE • APPLE VISION PROTOCOL\n        </p>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/ComplaintSelection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/DashboardSettingsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DashboardPreferences' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9393,9396],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9393,9396],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\n\nimport React, { useState, useRef } from 'react';\nimport { X, GripVertical, Check, Eye, EyeOff, RotateCcw, Layout, Rows, Columns } from 'lucide-react';\nimport { useDashboardPreferences } from '@/contexts/DashboardPreferencesContext';\nimport { DashboardPreferences } from '@/lib/types/medical';\nimport { cn } from '@/lib/utils';\n\ninterface DashboardSettingsModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst KPI_LABELS: Record<string, string> = {\n  thoracic: 'Dor Torácica',\n  patients: 'Pacientes/Hora',\n  revals: 'Reavaliações',\n  ecg: 'Tempo Porta-ECG'\n};\n\nconst COLUMN_LABELS: Record<string, string> = {\n  exam: 'Aguardando Exame',\n  wait: 'Aguardando Resultados',\n  reval: 'Reavaliação Médica',\n  done: 'Alta / Internação'\n};\n\nexport const DashboardSettingsModal: React.FC<DashboardSettingsModalProps> = ({ isOpen, onClose }) => {\n  const { preferences, updatePreferences, resetPreferences } = useDashboardPreferences();\n  \n  // Local state for dragging (to avoid constant context updates during drag)\n  const [localKpiOrder, setLocalKpiOrder] = useState(preferences.kpiOrder);\n  const dragItem = useRef<number | null>(null);\n  const dragOverItem = useRef<number | null>(null);\n\n  if (!isOpen) return null;\n\n  // DnD Handlers\n  const handleSort = () => {\n    if (dragItem.current === null || dragOverItem.current === null) return;\n    \n    const _kpiOrder = [...localKpiOrder];\n    const draggedItemContent = _kpiOrder[dragItem.current];\n    \n    _kpiOrder.splice(dragItem.current, 1);\n    _kpiOrder.splice(dragOverItem.current, 0, draggedItemContent);\n    \n    dragItem.current = null;\n    dragOverItem.current = null;\n    \n    setLocalKpiOrder(_kpiOrder);\n    updatePreferences({ kpiOrder: _kpiOrder });\n  };\n\n  const toggleKpiVisibility = (id: string) => {\n    const current = preferences.visibleKpiCards;\n    const isVisible = current.includes(id);\n    const updated = isVisible ? current.filter(k => k !== id) : [...current, id];\n    updatePreferences({ visibleKpiCards: updated });\n  };\n\n  const toggleColumnVisibility = (id: string) => {\n    const current = preferences.visibleKanbanColumns;\n    const isVisible = current.includes(id);\n    const updated = isVisible ? current.filter(c => c !== id) : [...current, id];\n    updatePreferences({ visibleKanbanColumns: updated });\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200\">\n       <div className=\"w-full max-w-2xl liquid-glass-material rim-light-ios26 inner-glow-ios26 rounded-[32px] shadow-2xl overflow-hidden flex flex-col max-h-[85vh]\">\n          \n          {/* Header */}\n          <div className=\"px-6 py-5 border-b border-slate-200/50 dark:border-white/5 flex items-center justify-between shrink-0\">\n             <div className=\"flex items-center gap-3\">\n                <div className=\"p-2.5 rounded-xl glass-pill text-slate-600 dark:text-slate-200\">\n                   <Layout className=\"w-5 h-5\" />\n                </div>\n                <div>\n                   <h2 className=\"text-xl font-bold text-slate-800 dark:text-white leading-tight\">Personalizar Home</h2>\n                   <p className=\"text-xs text-slate-500 dark:text-slate-400 font-medium\">Ajuste a visualização do seu painel.</p>\n                </div>\n             </div>\n             <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={resetPreferences}\n                  className=\"px-3 py-1.5 rounded-lg text-xs font-bold text-slate-500 glass-pill hover:bg-white/20 dark:hover:bg-white/10 transition-colors flex items-center gap-1.5\"\n                >\n                  <RotateCcw className=\"w-3.5 h-3.5\" /> Padrão\n                </button>\n                <button\n                  onClick={onClose}\n                  className=\"p-2 rounded-full glass-pill hover:bg-white/20 dark:hover:bg-white/10 transition-colors text-slate-400\"\n                >\n                   <X className=\"w-5 h-5\" />\n                </button>\n             </div>\n          </div>\n\n          {/* Body */}\n          <div className=\"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8\">\n             \n             {/* 1. KPI Cards (Reorder & Toggle) */}\n             <section>\n                <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                   <Layout className=\"w-3.5 h-3.5\" /> Indicadores (Arraste para ordenar)\n                </h3>\n                <div className=\"space-y-2\">\n                   {localKpiOrder.map((kpiId, index) => {\n                      const isVisible = preferences.visibleKpiCards.includes(kpiId);\n                      return (\n                         <div\n                           key={kpiId}\n                           draggable\n                           onDragStart={() => { dragItem.current = index; }}\n                           onDragEnter={() => { dragOverItem.current = index; }}\n                           onDragEnd={handleSort}\n                           onDragOver={(e) => e.preventDefault()}\n                           className={cn(\n                             'group flex items-center gap-3 p-3 rounded-2xl transition-all duration-200',\n                             isVisible\n                                ? 'glass-pill'\n                                : 'glass-pill opacity-60'\n                           )}\n                         >\n                            <div className=\"p-2 cursor-grab active:cursor-grabbing text-slate-300 hover:text-slate-500 dark:text-slate-600 dark:hover:text-slate-300\">\n                               <GripVertical className=\"w-5 h-5\" />\n                            </div>\n                            <span className=\"flex-1 text-sm font-bold text-slate-700 dark:text-slate-200\">\n                               {KPI_LABELS[kpiId]}\n                            </span>\n                            <button\n                               onClick={() => toggleKpiVisibility(kpiId)}\n                               className={cn(\n                                 'p-2 rounded-xl transition-colors glass-pill',\n                                 isVisible ? 'text-blue-500 bg-blue-500/10' : 'text-slate-400'\n                               )}\n                            >\n                               {isVisible ? <Eye className=\"w-4 h-4\" /> : <EyeOff className=\"w-4 h-4\" />}\n                            </button>\n                         </div>\n                      );\n                   })}\n                </div>\n             </section>\n\n             {/* 2. Layout & Density */}\n             <section className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                   <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                      <Rows className=\"w-3.5 h-3.5\" /> Seções\n                   </h3>\n                   <div className=\"space-y-3\">\n                      {/* Greeting Toggle */}\n                      <label className=\"flex items-center justify-between p-3 rounded-2xl glass-pill cursor-pointer\">\n                         <span className=\"text-sm font-semibold text-slate-700 dark:text-slate-200\">Saudação (Bom dia...)</span>\n                         <div\n                            className={`w-11 h-6 rounded-full p-1 transition-colors duration-300 ${preferences.showGreeting ? 'bg-green-500' : 'bg-slate-300 dark:bg-slate-600'}`}\n                            onClick={(e) => { e.preventDefault(); updatePreferences({ showGreeting: !preferences.showGreeting }); }}\n                         >\n                            <div className={`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform duration-300 ${preferences.showGreeting ? 'translate-x-5' : 'translate-x-0'}`} />\n                         </div>\n                      </label>\n\n                      {/* Alert Toggle */}\n                      <label className=\"flex items-center justify-between p-3 rounded-2xl glass-pill cursor-pointer\">\n                         <span className=\"text-sm font-semibold text-slate-700 dark:text-slate-200\">Linha de Alertas</span>\n                         <div\n                            className={`w-11 h-6 rounded-full p-1 transition-colors duration-300 ${preferences.showAlertRow ? 'bg-green-500' : 'bg-slate-300 dark:bg-slate-600'}`}\n                            onClick={(e) => { e.preventDefault(); updatePreferences({ showAlertRow: !preferences.showAlertRow }); }}\n                         >\n                            <div className={`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform duration-300 ${preferences.showAlertRow ? 'translate-x-5' : 'translate-x-0'}`} />\n                         </div>\n                      </label>\n                   </div>\n                </div>\n\n                <div>\n                   <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                      <Layout className=\"w-3.5 h-3.5\" /> Densidade\n                   </h3>\n                   <div className=\"flex gap-3 glass-pill p-1.5 rounded-2xl\">\n                      {['default', 'compact'].map((mode) => (\n                         <button\n                           key={mode}\n                           onClick={() => updatePreferences({ density: mode as any })}\n                           className={cn(\n                             'flex-1 py-2.5 text-xs font-bold rounded-xl transition-all duration-300 capitalize',\n                             preferences.density === mode\n                               ? 'glass-pill bg-white/50 dark:bg-white/10 text-slate-900 dark:text-white shadow-sm'\n                               : 'text-slate-500 hover:text-slate-700 dark:text-slate-400'\n                           )}\n                         >\n                           {mode === 'default' ? 'Padrão' : 'Compacto'}\n                         </button>\n                      ))}\n                   </div>\n                   <p className=\"text-[11px] text-slate-400 mt-2.5 px-1 leading-relaxed\">\n                      O modo compacto reduz espaçamentos verticais para exibir mais informações em telas menores.\n                   </p>\n                </div>\n             </section>\n\n             {/* 3. Kanban Columns */}\n             <section>\n                <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                   <Columns className=\"w-3.5 h-3.5\" /> Colunas do Quadro\n                </h3>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                   {Object.entries(COLUMN_LABELS).map(([id, label]) => {\n                      const isVisible = preferences.visibleKanbanColumns.includes(id);\n                      return (\n                         <button\n                           key={id}\n                           onClick={() => toggleColumnVisibility(id)}\n                           className={cn(\n                             'flex items-center justify-between p-3.5 rounded-2xl transition-all duration-200 text-left',\n                             isVisible\n                               ? 'glass-pill bg-blue-500/10 text-blue-700 dark:text-blue-300'\n                               : 'glass-pill opacity-60'\n                           )}\n                         >\n                            <span className={cn(\n                              'text-sm font-semibold',\n                              isVisible ? 'text-blue-700 dark:text-blue-300' : 'text-slate-600 dark:text-slate-400'\n                            )}>\n                               {label}\n                            </span>\n                            <div className={cn(\n                               'w-5 h-5 rounded-full flex items-center justify-center transition-all',\n                               isVisible ? 'bg-blue-500 text-white' : 'bg-slate-200 dark:bg-slate-700 text-transparent'\n                            )}>\n                               <Check className=\"w-3 h-3 stroke-[3px]\" />\n                            </div>\n                         </button>\n                      );\n                   })}\n                </div>\n             </section>\n\n          </div>\n\n          {/* Footer */}\n          <div className=\"p-5 border-t border-slate-200/50 dark:border-white/5 glass-pill flex justify-end gap-3\">\n             <button\n                onClick={onClose}\n                className=\"px-6 py-3 rounded-xl font-bold text-sm text-slate-500 glass-pill hover:bg-white/20 dark:hover:bg-white/10 transition-colors\"\n             >\n                Cancelar\n             </button>\n             <button\n                onClick={onClose}\n                className=\"px-8 py-3 rounded-xl btn-primary-glass text-white font-bold text-sm shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all\"\n             >\n                Concluir\n             </button>\n          </div>\n\n       </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/DashboardView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timer' is defined but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1488,1491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1488,1491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1990,1993],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1990,1993],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2033,2036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2033,2036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":311,"column":4,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":311,"endColumn":7,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14500,14503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14500,14503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":345,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16098,16101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16098,16101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'kpiCardsMap' object makes the dependencies of useMemo Hook (at line 441) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'kpiCardsMap' in its own useMemo() Hook.","line":388,"column":9,"nodeType":"VariableDeclarator","endLine":393,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":395,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":395,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18677,18680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18677,18680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":424,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":424,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19695,19698],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19695,19698],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":543,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":543,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25796,25799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25796,25799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport * as React from 'react';\nimport { useState, useMemo } from 'react';\nimport { \n  AlertTriangle,\n  ArrowRightLeft,\n  ArrowUpRight, \n  CheckCircle2,\n  Clock,\n  FileCheck2,\n  Filter, \n  HeartPulse,\n  Microscope,\n  MoreHorizontal, \n  PlayCircle,\n  Plus, \n  Settings2,\n  Sparkles,\n  Stethoscope,\n  Sun,\n  Zap,\n  Users,\n  Timer,\n  Activity\n} from 'lucide-react';\nimport { AreaChart, Area, ResponsiveContainer, Tooltip } from 'recharts';\nimport { motion } from 'framer-motion';\nimport { KanbanTask, KanbanStatus } from '@/lib/types/medical';\nimport { useDashboardPreferences } from '@/contexts/DashboardPreferencesContext';\nimport { DashboardSettingsModal } from './DashboardSettingsModal';\n\n// --- Mock Data for Charts (Organic Curves) ---\nconst chartDataOrange = [\n  { value: 12 }, { value: 18 }, { value: 15 }, { value: 25 }, { value: 32 }, { value: 45 }, { value: 38 }, { value: 50 }, { value: 42 }\n];\nconst chartDataBlue = [\n  { value: 30 }, { value: 25 }, { value: 35 }, { value: 30 }, { value: 45 }, { value: 35 }, { value: 55 }, { value: 50 }, { value: 60 }\n];\nconst chartDataGreen = [\n  { value: 20 }, { value: 25 }, { value: 30 }, { value: 28 }, { value: 35 }, { value: 45 }, { value: 40 }, { value: 48 }, { value: 55 }\n];\nconst chartDataPurple = [\n  { value: 65 }, { value: 58 }, { value: 62 }, { value: 55 }, { value: 50 }, { value: 45 }, { value: 48 }, { value: 42 }, { value: 40 }\n];\n\n// --- Sub-components ---\n\nconst CustomChartTooltip = ({ active, payload }: any) => {\n   if (active && payload && payload.length) {\n      return (\n         <div className=\"glass-molded-3d liquid-glass-rim liquid-glass-specular px-3 py-2 rounded-xl shadow-xl transform -translate-y-2\">\n            <p className=\"text-lg font-black text-slate-800 dark:text-white leading-none\">\n               {payload[0].value}\n            </p>\n         </div>\n      );\n   }\n   return null;\n};\n\nconst MetricCard = ({ title, value, sub, icon: Icon, colorTheme, trend, trendValue, data, density }: any) => {\n  const themeMap: Record<string, any> = {\n     orange: {\n        stroke: '#F97316',\n        fillStart: '#F97316',\n        glow: 'from-orange-500/30 to-amber-500/30',\n        iconColor: 'text-orange-500',\n        iconBg: 'bg-orange-50 dark:bg-orange-500/20',\n        trendColor: 'text-orange-600 dark:text-orange-400',\n        trendBg: 'bg-orange-100/50 dark:bg-orange-500/10'\n     },\n     blue: {\n        stroke: '#3B82F6',\n        fillStart: '#3B82F6',\n        glow: 'from-blue-500/30 to-cyan-500/30',\n        iconColor: 'text-blue-500',\n        iconBg: 'bg-blue-50 dark:bg-blue-500/20',\n        trendColor: 'text-blue-600 dark:text-blue-400',\n        trendBg: 'bg-blue-100/50 dark:bg-blue-500/10'\n     },\n     green: {\n        stroke: '#10B981',\n        fillStart: '#10B981',\n        glow: 'from-emerald-500/30 to-teal-500/30',\n        iconColor: 'text-emerald-500',\n        iconBg: 'bg-emerald-50 dark:bg-emerald-500/20',\n        trendColor: 'text-emerald-600 dark:text-emerald-400',\n        trendBg: 'bg-emerald-100/50 dark:bg-emerald-500/10'\n     },\n     purple: {\n        stroke: '#8B5CF6',\n        fillStart: '#8B5CF6',\n        glow: 'from-violet-500/30 to-fuchsia-500/30',\n        iconColor: 'text-violet-500',\n        iconBg: 'bg-violet-50 dark:bg-violet-500/20',\n        trendColor: 'text-violet-600 dark:text-violet-400',\n        trendBg: 'bg-violet-100/50 dark:bg-violet-500/10'\n     }\n  };\n\n  const theme = themeMap[colorTheme] || themeMap.blue;\n  const gradId = `grad-${title.replace(/\\s/g, '')}`;\n  const isCompact = density === 'compact';\n\n  return (\n    <div\n      className={`relative overflow-hidden p-0 flex flex-col justify-between group glass-molded-3d liquid-glass-rim liquid-glass-specular liquid-glass-interactive noise-grain ${isCompact ? 'h-[180px]' : 'h-[240px]'}`}\n    >\n      \n      {/* Dynamic Brilliance Layer */}\n      <div className={`absolute inset-0 bg-linear-to-tr from-white/15 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000 pointer-events-none`} />\n      <div className={`absolute -top-20 -right-20 w-60 h-60 bg-linear-to-br ${theme.glow} opacity-20 blur-[70px] rounded-full pointer-events-none group-hover:opacity-45 transition-opacity duration-700`} />\n\n      {/* Content Container */}\n      <div className={`relative z-20 flex flex-col h-full pointer-events-none ${isCompact ? 'p-4' : 'p-6'}`}>\n         <div className=\"flex items-center justify-between pointer-events-auto\">\n            <div className={`glass-icon-circle ${theme.iconBg.includes('orange') ? 'glass-icon-circle--warning' : theme.iconBg.includes('blue') ? 'glass-icon-circle--info' : theme.iconBg.includes('emerald') ? 'glass-icon-circle--success' : 'glass-icon-circle--danger'}`}>\n               <Icon className={`w-5 h-5 ${theme.iconColor} filter drop-shadow-[0_2px_4px_rgba(0,0,0,0.1)]`} />\n            </div>\n            \n            <div className={`glass-pill px-3 py-1.5 rounded-full text-[11px] font-apple-semibold flex items-center gap-1.5 ${theme.trendColor}`}>\n               {trend === 'up' ? <ArrowUpRight className=\"w-3 h-3 stroke-[3px]\" /> : <ArrowUpRight className=\"w-3 h-3 rotate-90 stroke-[3px]\" />}\n               <span className=\"tracking-wide\">{trendValue}</span>\n            </div>\n         </div>\n\n         <div className={`pointer-events-auto ${isCompact ? 'mt-auto' : 'mt-5'}`}>\n             <p className=\"text-[12px] font-apple-semibold text-slate-500 dark:text-slate-400 uppercase tracking-apple-label mb-1 opacity-80\">\n                {title}\n             </p>\n             <div className=\"flex items-baseline gap-2\">\n                <h3 className={`${isCompact ? 'text-[34px]' : 'text-[44px]'} font-apple-thin text-slate-800 dark:text-white tracking-apple-display leading-none filter drop-shadow-md`}>{value}</h3>\n             </div>\n             {!isCompact && <p className=\"text-sm font-apple-medium text-slate-400 dark:text-slate-500 mt-1.5 tracking-tight\">{sub}</p>}\n         </div>\n      </div>\n\n      {/* Chart Area - Seamless Bottom (Translúcido, não opaco) */}\n      <div className={`absolute bottom-0 left-0 right-0 w-full z-10 opacity-90 ${isCompact ? 'h-24' : 'h-36'} bg-linear-to-b from-transparent via-slate-500/5 to-slate-500/15`}>\n         <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <AreaChart data={data} margin={{ top: 0, right: 0, left: 0, bottom: 0 }}>\n               <defs>\n                  <linearGradient id={gradId} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                     <stop offset=\"0%\" stopColor={theme.fillStart} stopOpacity={0.25} />\n                     <stop offset=\"90%\" stopColor={theme.fillStart} stopOpacity={0.0} />\n                  </linearGradient>\n                  <filter id=\"lineGlow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\n                    <feGaussianBlur stdDeviation=\"3\" result=\"blur\" />\n                    <feComposite in=\"SourceGraphic\" in2=\"blur\" operator=\"over\" />\n                  </filter>\n               </defs>\n               <Tooltip content={<CustomChartTooltip />} cursor={false} />\n               <Area \n                 type=\"monotone\" \n                 dataKey=\"value\" \n                 stroke={theme.stroke} \n                 strokeWidth={3}\n                 fill={`url(#${gradId})`} \n                 filter=\"url(#lineGlow)\"\n                 animationDuration={1500}\n                 isAnimationActive={true}\n                 activeDot={{ r: 6, strokeWidth: 0, fill: theme.stroke, stroke: '#fff' }}\n               />\n            </AreaChart>\n         </ResponsiveContainer>\n      </div>\n    </div>\n  );\n};\n\n// --- Kanban Components ---\n\nconst KanbanCard: React.FC<{ \n  task: KanbanTask; \n  onDragStart: (e: React.DragEvent, id: string) => void;\n  onDragEnd: (e: React.DragEvent) => void;\n  onStatusChange: (taskId: string, newStatus: string) => void;\n  isDragging: boolean;\n  density?: 'compact' | 'comfortable';\n}> = ({ task, onDragStart, onDragEnd, onStatusChange, isDragging, density = 'comfortable' }) => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const isCompact = density === 'compact';\n\n  const statusOptions: { id: KanbanStatus, label: string, color: string }[] = [\n      { id: 'exam', label: 'Aguardando Exame', color: 'text-blue-500' },\n      { id: 'wait', label: 'Aguardando Resultados', color: 'text-yellow-500' },\n      { id: 'reval', label: 'Reavaliação', color: 'text-orange-500' },\n      { id: 'done', label: 'Alta / Internação', color: 'text-emerald-500' }\n  ];\n\n  return (\n    <motion.div\n       layout\n       draggable=\"true\"\n       onDragStart={(e) => onDragStart(e, task.id)}\n       onDragEnd={onDragEnd}\n       initial={{ opacity: 0, scale: 0.95 }}\n       animate={{ opacity: 1, scale: 1 }}\n       exit={{ opacity: 0, scale: 0.95 }}\n       whileHover={!isDragging ? {\n         scale: 1.02,\n         y: -4,\n         boxShadow: \"0 20px 40px rgba(0,0,0,0.15)\"\n       } : {}}\n       whileTap={{ scale: 0.98 }}\n       transition={{ type: \"spring\", stiffness: 450, damping: 32 }}\n       className={`group relative w-full z-[1]\n         transition-all duration-300\n         cursor-grab active:cursor-grabbing\n         p-4 rounded-[24px]\n         glass-molded-3d liquid-glass-rim liquid-glass-specular liquid-glass-interactive noise-grain\n         ${isDragging\n            ? 'opacity-50 scale-95'\n            : 'hover:z-50 hover:bg-white/85 hover:backdrop-blur-[24px] dark:hover:bg-white/10 hover:border-white/50 dark:hover:border-white/20'\n         }\n         ${task.acuity === 'red' ? 'border-l-4 border-red-500 shadow-[-4px_0_20px_-8px_rgba(239,68,68,0.2)]' : ''}\n       `}\n    >\n       {/* Acuity Left Bar - Subtle Volumetric */}\n       <div className={`absolute left-0 top-0 bottom-0 w-1 rounded-l-[28px] opacity-60 ${\n          task.acuity === 'red' ? 'bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.3)]' :\n          task.acuity === 'orange' ? 'bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.3)]' :\n          task.acuity === 'yellow' ? 'bg-yellow-400 shadow-[0_0_8px_rgba(250,204,21,0.3)]' :\n          'bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.3)]'\n       }`} />\n      \n       {/* Identity Header */}\n       <div className={`flex items-start justify-between ${isCompact ? 'mb-2' : 'mb-3.5'}`}>\n          <div className=\"flex items-center gap-3\">\n             <div className={`\n                rounded-full flex items-center justify-center text-xs font-apple-black shadow-inner ring-1 ring-white/30\n                ${isCompact ? 'w-8.5 h-8.5' : 'w-10.5 h-10.5'}\n                ${task.gender === 'F' \n                   ? 'bg-linear-to-br from-pink-500/25 to-rose-500/15 text-pink-600 dark:text-pink-300 border border-pink-500/25' \n                   : 'bg-linear-to-br from-blue-500/25 to-indigo-500/15 text-blue-600 dark:text-blue-300 border border-blue-500/25'\n                }\n             `}>\n                {task.patientName.substring(0, 2).toUpperCase()}\n             </div>\n             <div>\n                <h5 className={`font-apple-semibold tracking-apple-tight ${isCompact ? 'text-[12px]' : 'text-[15px]'} text-slate-800 dark:text-white leading-tight`}>\n                   {task.patientName}\n                </h5>\n                <p className=\"text-[10px] font-apple-bold text-slate-400 dark:text-slate-500 mt-0.5 flex items-center gap-1.5 uppercase tracking-apple-caps opacity-90\">\n                   {task.age} ANOS • {task.gender === 'F' ? 'Fem' : 'Mas'}\n                </p>\n             </div>\n          </div>\n          \n          {/* Acuity Indicator - Glowing Ping */}\n          <div className=\"relative\">\n             <div className={`w-3 h-3 rounded-full shadow-md ring-2 ring-white/60 dark:ring-white/15\n                ${task.acuity === 'red' ? 'bg-red-500' : \n                  task.acuity === 'orange' ? 'bg-orange-500' : \n                  task.acuity === 'yellow' ? 'bg-yellow-400' : 'bg-green-500'\n                }\n             `}>\n                 <span className={`absolute inset-0 rounded-full opacity-50 animate-ping ${\n                    task.acuity === 'red' ? 'bg-red-500' : \n                    task.acuity === 'orange' ? 'bg-orange-500' : 'hidden'\n                 }`} />\n             </div>\n          </div>\n       </div>\n\n       {/* Complaint & Info */}\n       <div className={`${isCompact ? 'mb-2.5' : 'mb-4'}`}>\n          <p className={`${isCompact ? 'text-[12px]' : 'text-[14px]'} font-apple-semibold text-slate-600 dark:text-slate-200 leading-relaxed tracking-apple-tight opacity-90`}>\n             {task.complaint}\n          </p>\n       </div>\n       \n       {/* Footer */}\n       <div className={`flex items-center justify-between border-t border-slate-100 dark:border-white/5 ${isCompact ? 'pt-2' : 'pt-3'}`}>\n          <div className=\"flex items-center gap-1.5 text-xs font-semibold text-slate-400 dark:text-slate-500 bg-slate-100/50 dark:bg-white/5 px-2 py-1 rounded-lg\">\n             <Clock className=\"w-3.5 h-3.5\" />\n             {task.waitTime}\n          </div>\n          \n          <div className=\"relative\">\n              <button \n                onClick={(e) => { e.stopPropagation(); setIsMenuOpen(!isMenuOpen); }}\n                className=\"p-1.5 rounded-full hover:bg-slate-100 dark:hover:bg-white/10 text-slate-300 hover:text-primary transition-colors\"\n              >\n                <ArrowRightLeft className=\"w-4 h-4 stroke-[2px] icon-volumetric\" />\n              </button>\n\n              {isMenuOpen && (\n                 <div className=\"absolute top-8 right-0 w-48 bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 dark:border-white/10 p-1.5 z-50 animate-in fade-in zoom-in-95 duration-200\">\n                    {statusOptions.filter(opt => opt.id !== task.status).map(option => (\n                        <button\n                           key={option.id}\n                           onClick={() => { onStatusChange(task.id, option.id); setIsMenuOpen(false); }}\n                           className=\"w-full text-left px-3 py-2 rounded-xl text-xs font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center justify-between group\"\n                        >\n                           {option.label}\n                        </button>\n                    ))}\n                 </div>\n              )}\n          </div>\n       </div>\n    </motion.div>\n  );\n};\n\nconst KanbanColumn = ({ \n  id, title, icon: Icon, tasks, isDropTarget, draggedTaskId, density,\n  onDragStart, onDragEnd, onDragOver, onDragLeave, onDrop, onStatusChange\n}: any) => {\n  const isCompact = density === 'compact';\n  \n  return (\n    <div\n        className={`flex flex-col h-full min-w-[320px] w-full p-2 transition-all duration-700 sidebar-liquid-glass rounded-[32px] overflow-visible\n        ${isDropTarget\n            ? 'bg-blue-50/60! dark:bg-blue-900/20! scale-[1.01]'\n            : ''}\n        `}\n        onDragOver={onDragOver}\n        onDragLeave={onDragLeave}\n        onDrop={(e) => onDrop(e, id)}\n    >\n       {/* Minimalist Header */}\n       <div className={`relative z-10 flex items-center justify-between ${isCompact ? 'px-4 py-3' : 'px-5 py-5'}`}>\n          <div className=\"flex items-center gap-3\">\n             <div className={`glass-pill rounded-2xl text-slate-500 dark:text-slate-400 ${isCompact ? 'p-2' : 'p-2.5'}`}>\n               <Icon className=\"w-5 h-5 stroke-[2px] icon-volumetric fill-current/10\" />\n             </div>\n             <h4 className=\"text-[16px] font-bold text-slate-800 dark:text-slate-100 tracking-tight\">\n               {title}\n               <span className=\"ml-2 text-xs font-semibold text-slate-400 glass-pill px-2 py-0.5 rounded-full\">\n                 {tasks.length}\n               </span>\n             </h4>\n          </div>\n          <button className=\"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\">\n             <MoreHorizontal className=\"w-5 h-5\" />\n          </button>\n       </div>\n\n       {/* Task List */}\n       <div className={`flex-1 overflow-y-auto overflow-x-visible px-2 pb-2 custom-scrollbar ${isCompact ? 'space-y-2' : 'space-y-3'}`}>\n          {tasks.map((task: any) => (\n             <KanbanCard \n               key={task.id}\n               task={task}\n               isDragging={draggedTaskId === task.id}\n               onDragStart={onDragStart}\n               onDragEnd={onDragEnd}\n               onStatusChange={onStatusChange}\n               density={density}\n             />\n          ))}\n          \n          <button className=\"w-full py-4 rounded-[24px] border border-dashed border-slate-300/60 dark:border-white/10 text-slate-400 dark:text-slate-500 font-bold text-sm flex items-center justify-center gap-2 hover:bg-white/40 dark:hover:bg-white/5 transition-all group\">\n             <div className=\"w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-500 dark:text-slate-400 group-hover:bg-blue-500 group-hover:text-white transition-colors\">\n                <Plus className=\"w-3.5 h-3.5\" />\n             </div>\n             Novo Atendimento\n          </button>\n       </div>\n    </div>\n  );\n};\n\n// --- Main View ---\n\ninterface DashboardViewProps {\n  tasks: KanbanTask[];\n  setTasks: React.Dispatch<React.SetStateAction<KanbanTask[]>>;\n  onNewAttendance?: () => void;\n  onSettings?: () => void;\n}\n\nexport const DashboardView: React.FC<DashboardViewProps> = ({ \n  tasks, \n  setTasks,\n  onNewAttendance\n}) => {\n  const { preferences } = useDashboardPreferences();\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [draggedTaskId, setDraggedTaskId] = useState<string | null>(null);\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n\n  // Map of all available cards for easier rendering\n  const kpiCardsMap: Record<string, React.ReactElement> = {\n    thoracic: <MetricCard key=\"thoracic\" title=\"Dor Torácica (3h)\" value=\"08\" sub=\"Alta Demanda\" icon={AlertTriangle} colorTheme=\"orange\" trend=\"up\" trendValue=\"12%\" data={chartDataOrange} density={preferences.density} />,\n    patients: <MetricCard key=\"patients\" title=\"Pcts / Hora\" value=\"4.2\" sub=\"Fluxo Intenso\" icon={Zap} colorTheme=\"blue\" trend=\"down\" trendValue=\"5%\" data={chartDataBlue} density={preferences.density} />,\n    revals: <MetricCard key=\"revals\" title=\"Reavaliações\" value=\"03\" sub=\"Pendentes\" icon={CheckCircle2} colorTheme=\"green\" trend=\"up\" trendValue=\"2%\" data={chartDataGreen} density={preferences.density} />,\n    ecg: <MetricCard key=\"ecg\" title=\"Tempo Porta-ECG\" value=\"08'\" sub=\"Meta: < 10min\" icon={HeartPulse} colorTheme=\"purple\" trend=\"down\" trendValue=\"15%\" data={chartDataPurple} density={preferences.density} />\n  };\n\n  const kanbanColumnsConfig: Record<string, any> = {\n    exam: { title: \"Aguardando Exame\", icon: Stethoscope },\n    wait: { title: \"Aguardando Resultados\", icon: Microscope },\n    reval: { title: \"Reavaliação Médica\", icon: PlayCircle },\n    done: { title: \"Alta / Internação\", icon: FileCheck2 }\n  };\n\n  const handleDragStart = (e: React.DragEvent, taskId: string) => {\n    // Delay setting state to avoid affecting the drag snapshot\n    globalThis.setTimeout?.(() => {\n      setDraggedTaskId(taskId);\n    }, 0);\n    e.dataTransfer.effectAllowed = 'move';\n  };\n\n  const handleDragEnd = () => {\n    setDraggedTaskId(null);\n    setDragOverColumn(null);\n  };\n\n  const handleDragOver = (e: React.DragEvent, columnId: string) => {\n    e.preventDefault(); \n    if (dragOverColumn !== columnId) setDragOverColumn(columnId);\n  };\n\n  const handleDrop = (e: React.DragEvent, newStatus: string) => {\n    e.preventDefault();\n    setDragOverColumn(null);\n    if (draggedTaskId) {\n        setTasks(prev => prev.map(t => t.id === draggedTaskId ? { ...t, status: newStatus as any } : t));\n        setDraggedTaskId(null);\n    }\n  };\n\n  const handleStatusChange = (taskId: string, newStatus: KanbanStatus) => {\n    setTasks(prev => prev.map(t => t.id === taskId ? { ...t, status: newStatus } : t));\n  };\n\n  const currentHour = new Date().getHours();\n  const greeting = currentHour < 12 ? 'Bom dia' : currentHour < 18 ? 'Boa tarde' : 'Boa noite';\n  \n  // Renderable KPI Cards based on order and visibility\n  const renderableKpiCards = useMemo(() => {\n    return preferences.kpiOrder\n      .filter(id => preferences.visibleKpiCards.includes(id))\n      .map(id => kpiCardsMap[id]);\n  }, [preferences.kpiOrder, preferences.visibleKpiCards, kpiCardsMap]);\n\n  return (\n    <div className=\"h-full flex flex-col bg-transparent overflow-hidden px-2 relative animate-in fade-in duration-700\">\n       \n       <DashboardSettingsModal isOpen={isSettingsOpen} onClose={() => setIsSettingsOpen(false)} />\n\n       {/* 1. Header & KPIs */}\n       <div className={`shrink-0 px-4 ${preferences.density === 'compact' ? 'pt-4 pb-1' : 'pt-6 pb-2'}`}>\n          \n          {/* Top Control Bar */}\n          <div className=\"flex items-center justify-between mb-8\">\n             <div>\n                <h1 className=\"text-[32px] font-black text-slate-900 dark:text-white tracking-tighter leading-tight\">Visão Geral</h1>\n                \n                {preferences.showGreeting && (\n                    <div className=\"glass-pill flex items-center gap-2 mt-2 px-3 py-1.5 rounded-full animate-in fade-in slide-in-from-left-4\">\n                       <span className=\"flex h-2.5 w-2.5 relative\">\n                          <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\n                          <span className=\"relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500\"></span>\n                       </span>\n                       <p className=\"text-sm font-semibold text-slate-600 dark:text-slate-300\">Plantão Ativo • Dr. André</p>\n                    </div>\n                )}\n             </div>\n\n             <div className=\"flex gap-4\">\n                 <button\n                    onClick={() => setIsSettingsOpen(true)}\n                    className=\"glass-btn-ghost h-11 px-5 font-bold text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2\"\n                 >\n                    <Settings2 className=\"w-4 h-4\" />\n                    Configurar\n                 </button>\n                 <button\n                    onClick={onNewAttendance}\n                    className=\"btn-primary-glass h-11 px-6 text-white font-bold text-sm flex items-center gap-2 active:scale-95\"\n                 >\n                    <Plus className=\"w-4 h-4 stroke-[3px]\" />\n                    Novo Atendimento\n                 </button>\n             </div>\n          </div>\n\n          {/* KPI Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n             {renderableKpiCards}\n          </div>\n       </div>\n\n        {/* 2. Priority Insight Row (Refined) */}\n       {preferences.showAlertRow && (\n           <div className={`px-4 shrink-0 flex items-center justify-between animate-in fade-in slide-in-from-bottom-2 duration-1000 delay-200 ${preferences.density === 'compact' ? 'mt-3 mb-2' : 'mt-6 mb-4'}`}>\n               <div className=\"flex items-center gap-5\">\n                  <div className=\"glass-pill flex items-center gap-2 px-4 py-2 rounded-full shadow-sm\">\n                     <Sun className=\"w-5 h-5 text-amber-500\" />\n                     <span className=\"text-sm font-bold text-slate-700 dark:text-slate-200\">{greeting}</span>\n                  </div>\n                  <div className=\"h-6 w-px bg-slate-200 dark:bg-white/10\" />\n                  <div className=\"flex items-center gap-2.5\">\n                     <div className=\"w-8 h-8 rounded-full bg-linear-to-br from-orange-400 via-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-orange-500/20 pulse-brilliance\">\n                        <Sparkles className=\"w-4 h-4 text-white\" />\n                     </div>\n                     <p className=\"text-sm font-semibold text-slate-600 dark:text-slate-300\">\n                        <strong className=\"text-slate-900 dark:text-white flex items-center gap-1.5\">\n                          <Zap className=\"w-3.5 h-3.5 text-blue-500 fill-blue-500/20\" />\n                          Insight:\n                        </strong> 1 paciente aguarda reavaliação prioritária.\n                     </p>\n                  </div>\n               </div>\n               \n               <div className=\"flex items-center gap-3\">\n                  <button className=\"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/5 transition-colors text-slate-400\">\n                     <Filter className=\"w-5 h-5\" />\n                  </button>\n                  <div className=\"flex items-center gap-2 text-xs font-bold text-slate-400 uppercase tracking-widest px-3\">\n                     Fluxo em Tempo Real\n                  </div>\n               </div>\n           </div>\n       )}\n\n       {/* 3. Kanban Board */}\n       <div className={`flex-1 overflow-x-auto overflow-y-hidden px-4 ${preferences.density === 'compact' ? 'pb-3 mt-2' : 'pb-6 mt-0'}`}>\n          <div className=\"flex h-full gap-6 min-w-[1200px]\">\n             {preferences.visibleKanbanColumns.map(colId => {\n                const config = kanbanColumnsConfig[colId];\n                if (!config) return null;\n                \n                return (\n                   <KanbanColumn \n                      key={colId}\n                      id={colId} \n                      title={config.title} \n                      icon={config.icon}\n                      tasks={tasks.filter(t => t.status === colId)} \n                      isDropTarget={dragOverColumn === colId}\n                      draggedTaskId={draggedTaskId}\n                      density={preferences.density}\n                      onDragStart={handleDragStart} \n                      onDragEnd={handleDragEnd} \n                      onDragOver={(e: any) => handleDragOver(e, colId)}\n                      onDragLeave={() => setDragOverColumn(null)} \n                      onDrop={handleDrop} \n                      onStatusChange={handleStatusChange}\n                   />\n                );\n             })}\n          </div>\n       </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/FlashAnamnesisFlow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/FlashForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useState } from 'react'\nimport { FlashInput } from '@/lib/data/flashTemplates'\nimport { motion } from 'framer-motion'\nimport { applePhysics } from '@/lib/design-system/animation-tokens'\nimport {\n  ArrowRight,\n  Activity,\n  Thermometer,\n  Clock,\n  Brain,\n  Heart,\n  Wind,\n  Droplets,\n} from 'lucide-react'\n\ninterface FlashFormProps {\n  initialData: FlashInput['dados_variaveis']\n  onUpdate: (data: FlashInput['dados_variaveis']) => void\n  templateId: string\n  onSubmit?: () => void\n}\n\nexport const FlashForm: React.FC<FlashFormProps> = ({ initialData, onUpdate, templateId, onSubmit }) => {\n  const [formData, setFormData] = useState(initialData)\n\n  const handleChange = (field: keyof FlashInput['dados_variaveis'], value: string) => {\n    const newData = { ...formData, [field]: value }\n    setFormData(newData)\n    onUpdate(newData)\n  }\n\n  const isFaringo = templateId === 'faringoamigdalite'\n\n  return (\n    <div className=\"flex flex-col p-6 md:p-8 space-y-10 overflow-y-auto custom-scrollbar\">\n      <div className=\"px-2 space-y-1\">\n        <h2 className=\"text-2xl font-black text-slate-900 dark:text-white tracking-tighter\">Sinais Vitais & Dados</h2>\n        <p className=\"text-[10px] text-blue-500 font-black uppercase tracking-[0.3em] opacity-80\">Entrada de dados • Fluxo Vision 2025</p>\n      </div>\n\n      <div className=\"space-y-10\">\n        <DurationSelector\n          value={formData.tempo_sintomas}\n          onChange={(v) => handleChange('tempo_sintomas', v)}\n        />\n\n        <div className=\"grid grid-cols-2 gap-5\">\n          <InputGroup\n            label=\"Temp (°C)\"\n            icon={<Thermometer className=\"w-4 h-4 text-rose-500\" />}\n            value={formData.temperatura || ''}\n            onChange={(v) => handleChange('temperatura', v)}\n            placeholder=\"37.8\"\n            type=\"number\"\n          />\n          <InputGroup\n            label=\"FC (bpm)\"\n            icon={<Heart className=\"w-4 h-4 text-pink-500\" />}\n            value={formData.fc || ''}\n            onChange={(v) => handleChange('fc', v)}\n            placeholder=\"80\"\n            type=\"number\"\n          />\n          <InputGroup\n            label=\"FR (irpm)\"\n            icon={<Wind className=\"w-4 h-4 text-emerald-500\" />}\n            value={formData.fr || ''}\n            onChange={(v) => handleChange('fr', v)}\n            placeholder=\"16\"\n            type=\"number\"\n          />\n          <InputGroup\n            label=\"SpO2 (%)\"\n            icon={<Droplets className=\"w-4 h-4 text-blue-500\" />}\n            value={formData.spo2 || ''}\n            onChange={(v) => handleChange('spo2', v)}\n            placeholder=\"98\"\n            type=\"number\"\n          />\n        </div>\n\n        <div className=\"relative p-8 rounded-[32px] liquid-glass-material rim-light-ios26 inner-glow-ios26 overflow-hidden\">\n          <div className=\"absolute top-0 left-0 w-1 h-full bg-blue-500/30\" />\n          <div className=\"flex gap-6 items-end\">\n            <InputGroup\n              label=\"PA Sistólica\"\n              value={formData.pa_sistolica || ''}\n              onChange={(v) => handleChange('pa_sistolica', v)}\n              placeholder=\"120\"\n              type=\"number\"\n            />\n            <span className=\"pb-5 text-slate-400 font-black text-xs opacity-40\">X</span>\n            <InputGroup\n              label=\"PA Diastólica\"\n              value={formData.pa_diastolica || ''}\n              onChange={(v) => handleChange('pa_diastolica', v)}\n              placeholder=\"80\"\n              type=\"number\"\n            />\n          </div>\n        </div>\n\n        <InputGroup\n          label=\"Nível de Consciência (Glasgow)\"\n          icon={<Brain className=\"w-4 h-4 text-purple-500\" />}\n          value={formData.glasgow || '15'}\n          onChange={(v) => handleChange('glasgow', v)}\n          placeholder=\"15\"\n          type=\"number\"\n        />\n\n        {isFaringo && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            className=\"p-8 rounded-[32px] liquid-glass-material rim-light-ios26 inner-glow-ios26 border border-purple-500/20 shadow-lg shadow-purple-500/5\"\n          >\n            <h3 className=\"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-[0.2em] mb-6 opacity-80\">Específico: Score de Centor</h3>\n            <InputGroup\n              label=\"Centor Score\"\n              value={formData.centor_score || ''}\n              onChange={(v) => handleChange('centor_score', v)}\n              placeholder=\"0-4\"\n              type=\"number\"\n            />\n          </motion.div>\n        )}\n      </div>\n\n      {onSubmit && (\n        <div className=\"pt-6 pb-2\">\n          <motion.button\n            whileHover={{ scale: 1.02, translateY: -2 }}\n            whileTap={applePhysics.haptic}\n            transition={applePhysics.glass}\n            onClick={onSubmit}\n            className=\"w-full h-16 btn-primary-glass text-white rounded-[32px] font-black text-base shadow-xl shadow-blue-500/20 flex items-center justify-center gap-3 active:scale-95 transition-all overflow-hidden relative group\"\n          >\n            <div className=\"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity\" />\n            <span>Finalizar Atendimento</span>\n            <ArrowRight className=\"w-5 h-5 stroke-[3px] group-hover:translate-x-1 transition-transform\" />\n          </motion.button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst InputGroup: React.FC<{\n  label: string\n  icon?: React.ReactNode\n  value: string\n  onChange: (value: string) => void\n  placeholder?: string\n  type?: string\n}> = ({ label, icon, value, onChange, placeholder, type = 'text' }) => (\n  <div className=\"space-y-3 flex-1 group/field\">\n    <label className=\"text-[10px] font-black text-slate-500 dark:text-slate-500 ml-1.5 flex items-center gap-2.5 uppercase tracking-widest opacity-60 group-focus-within/field:opacity-100 transition-opacity\">\n      {icon} {label}\n    </label>\n    <div className=\"relative group/input\">\n      <input\n        type={type}\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        placeholder={placeholder}\n        className=\"w-full liquid-glass-material rim-light-ios26 rounded-[24px] px-6 py-4 text-slate-900 dark:text-white font-bold text-base focus:outline-none focus:ring-4 focus:ring-blue-500/10 transition-all placeholder:font-medium placeholder:text-slate-300 dark:placeholder:text-slate-700\"\n      />\n      <div className=\"absolute inset-x-0 bottom-0 h-1 bg-linear-to-r from-transparent via-blue-500/30 to-transparent opacity-0 group-focus-within/input:opacity-100 transition-all rounded-full\" />\n    </div>\n  </div>\n)\n\nconst DurationSelector: React.FC<{\n  value: string\n  onChange: (value: string) => void\n}> = ({ value, onChange }) => {\n  const presets = ['1d', '2d', '3d', '5d', '7d', '>7d']\n  \n  return (\n    <div className=\"space-y-5\">\n      <label className=\"text-[10px] font-black text-slate-500 dark:text-slate-500 ml-1.5 flex items-center gap-2.5 uppercase tracking-widest opacity-60\">\n        <Clock className=\"w-4 h-4 text-blue-500\" /> Tempo de Sintomas\n      </label>\n      <div className=\"flex flex-wrap gap-3\">\n        {presets.map((preset) => (\n          <motion.button\n            key={preset}\n            whileTap={applePhysics.haptic}\n            transition={applePhysics.default}\n            onClick={() => onChange(preset)}\n            className={`\n              px-6 py-3 rounded-full text-[13px] font-black transition-all glass-pill\n              ${value === preset\n                  ? 'bg-blue-500/90 text-white shadow-lg shadow-blue-500/30 scale-105 z-10'\n                  : 'text-slate-500 dark:text-slate-400 hover:bg-white/20 dark:hover:bg-white/10'\n              }\n            `}\n          >\n            {preset}\n          </motion.button>\n        ))}\n        <motion.button\n          whileTap={applePhysics.haptic}\n          onClick={() => onChange('')}\n          className=\"px-6 py-3 rounded-full text-[13px] font-black glass-pill text-slate-400 hover:text-blue-500 hover:bg-white/20 dark:hover:bg-white/10 transition-all\"\n        >\n          Outro\n        </motion.button>\n      </div>\n    </div>\n  )\n}\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/FlashPatientEntry.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldAlert' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PhoneIcon' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":77,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":86}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\nimport { User, Baby, Check, ChevronRight, UserCircle, ShieldAlert, Phone as PhoneIcon, LucideIcon, Info, Smile, Accessibility } from 'lucide-react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { applePhysics } from '@/lib/design-system/animation-tokens'\n\ninterface SelectionPillProps {\n  isActive: boolean\n  onClick: () => void\n  icon?: LucideIcon\n  label: string\n  color: 'blue' | 'purple' | 'rose' | 'indigo'\n}\n\nconst SelectionPill: React.FC<SelectionPillProps> = ({ isActive, onClick, icon: Icon, label, color }) => {\n  const colorMap = {\n    blue: {\n      active: 'border-blue-500/50 bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 shadow-[0_0_25px_rgba(59,130,246,0.2)]',\n      iconBox: 'bg-blue-500 text-white shadow-blue-500/40',\n      glow: 'after:bg-blue-500/20'\n    },\n    purple: {\n      active: 'border-purple-500/50 bg-purple-500/10 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400 shadow-[0_0_25px_rgba(168,85,247,0.2)]',\n      iconBox: 'bg-purple-500 text-white shadow-purple-500/40',\n      glow: 'after:bg-purple-500/20'\n    },\n    rose: {\n      active: 'border-rose-500/50 bg-rose-500/10 dark:bg-rose-500/20 text-rose-600 dark:text-rose-400 shadow-[0_0_25px_rgba(244,63,94,0.2)]',\n      iconBox: 'bg-rose-500 text-white shadow-rose-500/40',\n      glow: 'after:bg-rose-500/20'\n    },\n    indigo: {\n      active: 'border-indigo-500/50 bg-indigo-500/10 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-400 shadow-[0_0_25px_rgba(99,102,241,0.2)]',\n      iconBox: 'bg-indigo-500 text-white shadow-indigo-500/40',\n      glow: 'after:bg-indigo-500/20'\n    }\n  }\n\n  const styles = colorMap[color];\n\n  return (\n    <motion.button\n      whileTap={applePhysics.haptic}\n      transition={applePhysics.glass}\n      onClick={onClick}\n      className={`\n        relative flex flex-col items-center justify-center gap-4 p-8 rounded-[40px] outline-none\n        transition-all duration-500 ease-[cubic-bezier(0.23,1,0.32,1)] border backdrop-blur-2xl\n        after:absolute after:inset-0 after:rounded-[40px] after:opacity-0 after:transition-opacity after:duration-500\n        ${isActive \n          ? `${styles.active} ring-1 scale-[1.02] z-10 after:opacity-100 ${styles.glow}` \n          : 'bg-white/5 border-white/10 hover:bg-white/10 text-slate-500 dark:text-slate-400 hover:scale-[1.01] hover:border-white/20'\n        }\n      `}\n    >\n      {/* Dynamic Glow Layer */}\n      <div className={`absolute -inset-px rounded-[40px] bg-linear-to-br from-white/20 to-transparent opacity-0 transition-opacity duration-500 ${isActive ? 'opacity-100' : ''}`} />\n      \n      {Icon && (\n        <div className={`\n          relative z-10 w-16 h-16 rounded-[24px] flex items-center justify-center transition-all duration-500\n          ${isActive \n            ? `${styles.iconBox} scale-110 shadow-xl rotate-0` \n            : 'bg-slate-100 dark:bg-white/5 text-slate-400 group-hover:scale-105'\n          }\n        `}>\n          <Icon className={`w-7 h-7 transition-transform duration-500 ${isActive ? 'stroke-[2.5px]' : 'stroke-[1.5px]'}`} />\n        </div>\n      )}\n      \n      <span className={`\n        relative z-10 text-[13px] font-black uppercase tracking-[0.15em] transition-all duration-500\n        ${isActive ? 'text-current translate-y-0 opacity-100' : 'opacity-60 translate-y-1'}\n      `}>\n        {label}\n      </span>\n      \n      {isActive && (\n        <motion.div\n          layoutId={`check-${label}`}\n          className={`absolute top-5 right-5 w-7 h-7 rounded-full flex items-center justify-center text-white shadow-lg z-20 ${styles.iconBox}`}\n          initial={{ scale: 0, rotate: -45 }}\n          animate={{ scale: 1, rotate: 0 }}\n          transition={applePhysics.default}\n        >\n          <Check className=\"w-4 h-4 stroke-[4px]\" />\n        </motion.div>\n      )}\n    </motion.button>\n  )\n}\n\ninterface FlashPatientEntryProps {\n  onComplete: (data: {\n    category: 'adult' | 'pediatric'\n    gender: 'M' | 'F'\n    isPregnant: boolean\n    age?: number\n  }) => void\n}\n\nexport const FlashPatientEntry: React.FC<FlashPatientEntryProps> = ({ onComplete }) => {\n  const [category, setCategory] = useState<'lactente' | 'crianca' | 'adulto' | 'idoso' | null>(null)\n  const [gender, setGender] = useState<'M' | 'F' | null>(null)\n  const [isPregnant, setIsPregnant] = useState(false)\n\n  const handleComplete = () => {\n    if (gender && category) {\n      const finalCategory = (category === 'lactente' || category === 'crianca') ? 'pediatric' : 'adult'\n      const ageMap = {\n        lactente: 1,\n        crianca: 8,\n        adulto: 35,\n        idoso: 75\n      }\n\n      onComplete({ \n        category: finalCategory, \n        gender, \n        isPregnant,\n        age: ageMap[category]\n      })\n    }\n  }\n\n  const handleGenderSelect = (selectedGender: 'M' | 'F') => {\n    setGender(selectedGender)\n    if (selectedGender === 'M') {\n      setIsPregnant(false)\n    }\n  }\n\n  const isReady = !!gender && !!category\n\n  return (\n    <div className=\"h-full flex flex-col items-center justify-center p-4 sm:p-8\">\n      <motion.div \n        initial={applePhysics.blur.initial}\n        animate={applePhysics.blur.animate}\n        className=\"max-w-xl w-full liquid-glass-material p-8 space-y-8 shadow-2xl\"\n      >\n        {/* Header Section */}\n        <div className=\"text-center space-y-1\">\n          <h2 className=\"text-3xl font-black tracking-tighter text-slate-900 dark:text-white\">\n            Identificação\n          </h2>\n          <p className=\"text-[10px] text-blue-500 font-black uppercase tracking-[0.3em] opacity-80\">\n            Fluxo Vision 2025\n          </p>\n        </div>\n\n        <div className=\"space-y-8\">\n          {/* 1. Sexo Biológico */}\n          <div className=\"space-y-4\">\n             <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] ml-2 text-center\">1. Sexo Biológico</p>\n             <div className=\"grid grid-cols-2 gap-4\">\n                <SelectionPill \n                  isActive={gender === 'M'} \n                  onClick={() => handleGenderSelect('M')}\n                  label=\"Homem\"\n                  color=\"blue\"\n                  icon={UserCircle}\n                />\n                <SelectionPill \n                  isActive={gender === 'F'} \n                  onClick={() => handleGenderSelect('F')}\n                  label=\"Mulher\"\n                  color=\"rose\"\n                  icon={UserCircle}\n                />\n             </div>\n          </div>\n\n          {/* 2. Faixa Etária */}\n          <AnimatePresence>\n            {gender && (\n              <motion.div \n                initial={{ opacity: 0, y: 10, filter: 'blur(8px)' }}\n                animate={{ opacity: 1, y: 0, filter: 'blur(0px)' }}\n                className=\"space-y-4 pt-4 border-t border-white/10\"\n              >\n                 <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] ml-2 text-center\">2. Faixa Etária</p>\n                 \n                 <div className=\"grid grid-cols-2 gap-3\">\n                    <SelectionPill \n                      isActive={category === 'lactente'} \n                      onClick={() => setCategory('lactente')}\n                      label=\"Lactente\"\n                      color=\"indigo\"\n                      icon={Baby}\n                    />\n                    <SelectionPill \n                      isActive={category === 'crianca'} \n                      onClick={() => setCategory('crianca')}\n                      label=\"Criança\"\n                      color=\"indigo\"\n                      icon={Smile}\n                    />\n                    <SelectionPill \n                      isActive={category === 'adulto'} \n                      onClick={() => setCategory('adulto')}\n                      label=\"Adulto\"\n                      color=\"indigo\"\n                      icon={UserCircle}\n                    />\n                    <SelectionPill \n                      isActive={category === 'idoso'} \n                      onClick={() => setCategory('idoso')}\n                      label=\"Idoso\"\n                      color=\"indigo\"\n                      icon={Accessibility}\n                    />\n                 </div>\n\n                 {/* 3. Gestante */}\n                 {gender === 'F' && (category === 'adulto' || category === 'idoso') && (\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.95, filter: 'blur(4px)' }}\n                        animate={{ opacity: 1, scale: 1, filter: 'blur(0px)' }}\n                        className=\"pt-4\"\n                    >\n                        <motion.button\n                        whileTap={applePhysics.haptic}\n                        onClick={() => setIsPregnant(!isPregnant)}\n                        className={`\n                            w-full flex items-center justify-between p-5 rounded-[28px] border transition-all duration-500\n                            ${isPregnant \n                            ? 'bg-rose-500/10 border-rose-500/30 shadow-[0_10px_30px_rgba(244,63,94,0.1)]' \n                            : 'bg-white/5 border-white/10 hover:bg-white/10'\n                            }\n                        `}\n                        >\n                        <div className=\"flex items-center gap-3\">\n                            <div className={`p-2.5 rounded-2xl transition-colors duration-500 ${isPregnant ? 'bg-rose-500 text-white shadow-lg shadow-rose-500/30' : 'bg-slate-200 dark:bg-slate-800 text-slate-400'}`}>\n                            <Baby className=\"w-5 h-5\" />\n                            </div>\n                            <div className=\"text-left\">\n                            <p className={`text-[10px] font-black uppercase tracking-widest ${isPregnant ? 'text-rose-500' : 'text-slate-500'}`}>Condição Particular</p>\n                            <h4 className={`text-sm font-black transition-colors duration-500 ${isPregnant ? 'text-rose-600 dark:text-rose-300' : 'text-slate-700 dark:text-slate-300'}`}>Gestante</h4>\n                            </div>\n                        </div>\n                        <div className={`w-12 h-6 rounded-full p-1 transition-colors duration-500 ${isPregnant ? 'bg-rose-500' : 'bg-slate-300 dark:bg-slate-700'}`}>\n                            <motion.div \n                                animate={{ x: isPregnant ? 24 : 0 }}\n                                transition={applePhysics.default}\n                                className=\"w-4 h-4 bg-white rounded-full shadow-sm\" \n                            />\n                        </div>\n                        </motion.button>\n                    </motion.div>\n                )}\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Action Button */}\n        <div className=\"pt-4\">\n          <motion.button\n            whileTap={applePhysics.haptic}\n            onClick={isReady ? handleComplete : undefined}\n            className={`\n               w-full group relative flex items-center justify-center gap-3 py-5 rounded-[32px] text-base font-black uppercase tracking-widest\n               transition-all duration-500 shadow-xl\n               ${!isReady \n                 ? 'bg-slate-100 dark:bg-slate-800/50 text-slate-400 cursor-not-allowed opacity-50' \n                 : 'bg-slate-900 dark:bg-white text-white dark:text-slate-900 hover:scale-[1.02] shadow-blue-500/20 active:scale-95'\n               }\n            `}\n          >\n            <span>Gerar Anamnese</span>\n            <ChevronRight className={`w-5 h-5 transition-transform duration-300 ${isReady ? 'group-hover:translate-x-1' : ''}`} />\n          </motion.button>\n          \n          <div className=\"mt-4 flex items-center justify-center gap-2 opacity-40 text-center\">\n               <Info className=\"w-3 h-3\" />\n               <p className=\"text-[9px] font-black uppercase tracking-widest\">Selecione o sexo e a faixa etária para continuar</p>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  )\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/FlashPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/FlashTemplateSelection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/Header.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronUp' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":83},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[677,680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[677,680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useState } from 'react';\nimport { Bell, Activity, Phone, User, Baby, Plus, X, Minus, ChevronDown, ChevronUp } from 'lucide-react';\nimport { Patient } from '@/lib/types/medical';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface HeaderProps {\n  patient: Patient;\n  setPatient: React.Dispatch<React.SetStateAction<Patient>>;\n}\n\nexport const Header: React.FC<HeaderProps> = ({ patient, setPatient }) => {\n  const [newAllergy, setNewAllergy] = useState('');\n  const [isAddingAllergy, setIsAddingAllergy] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const updatePatient = (field: keyof Patient, value: any) => {\n    setPatient(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleAgeChange = (e: React.MouseEvent, delta: number) => {\n    e.stopPropagation();\n    const currentAge = parseInt(patient.age) || 0;\n    const newAge = Math.max(0, currentAge + delta);\n    updatePatient('age', newAge.toString());\n  };\n\n  const addAllergy = () => {\n    if (newAllergy.trim()) {\n      updatePatient('allergies', [...patient.allergies, newAllergy.trim()]);\n      setNewAllergy('');\n    }\n    setIsAddingAllergy(false);\n  };\n\n  const removeAllergy = (e: React.MouseEvent, allergyToRemove: string) => {\n    e.stopPropagation();\n    updatePatient('allergies', patient.allergies.filter(a => a !== allergyToRemove));\n  };\n\n  const getStatusConfig = (status: string) => {\n    switch (status) {\n      case 'in_progress': return { label: 'Em Atendimento', color: 'bg-emerald-500', text: 'text-emerald-700 dark:text-emerald-400', bg: 'bg-emerald-500/10', border: 'border-emerald-500/20' };\n      case 'waiting': return { label: 'Aguardando', color: 'bg-amber-500', text: 'text-amber-700 dark:text-amber-400', bg: 'bg-amber-500/10', border: 'border-amber-500/20' };\n      default: return { label: 'Finalizado', color: 'bg-slate-500', text: 'text-slate-700 dark:text-slate-400', bg: 'bg-slate-500/10', border: 'border-slate-500/20' };\n    }\n  };\n\n  const statusStyle = getStatusConfig(patient.status);\n\n  return (\n    <header className=\"w-full mb-6 px-1\">\n      {/* Smart Patient Capsule */}\n      <motion.div \n        initial={{ opacity: 0, scale: 0.98 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"relative w-full liquid-glass-material bg-white/40 dark:bg-black/30 p-1 rounded-[40px] shadow-2xl border border-white/50 dark:border-white/10 overflow-hidden\"\n      >\n        {/* Main Header Bar - Unified Summary */}\n        <div \n          className=\"flex items-center justify-between px-4 py-2 min-h-[72px] cursor-pointer\"\n          onClick={() => setIsExpanded(!isExpanded)}\n        >\n          {/* Section: Left - Identity */}\n          <div className=\"flex items-center gap-4 flex-1 min-w-0\">\n            {/* Avatar Capsule */}\n            <div className=\"relative shrink-0\">\n                <div className={`w-14 h-14 rounded-[24px] flex items-center justify-center text-2xl shadow-lg ring-1 ring-white/50 dark:ring-white/10 transition-all duration-500 ${\n                  patient.category === 'pediatric' ? 'bg-linear-to-br from-blue-50 to-blue-100 dark:from-blue-900/40 dark:to-blue-800/20 text-blue-500' :\n                  patient.category === 'elderly' ? 'bg-linear-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 text-slate-500' :\n                  patient.isPregnant ? 'bg-linear-to-br from-pink-50 to-pink-100 dark:from-pink-900/40 dark:to-pink-800/20 text-pink-500' :\n                  'bg-linear-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/40 dark:to-emerald-800/20 text-emerald-600'\n                }`}>\n                  {patient.category === 'pediatric' ? <Baby className=\"w-7 h-7\" /> : <User className=\"w-7 h-7\" />}\n                </div>\n            </div>\n\n            {/* Quick Details */}\n            <div className=\"flex-1 min-w-0\">\n               <div className=\"flex items-center gap-3\">\n                  <h2 className=\"text-xl font-black text-slate-900 dark:text-white tracking-tighter truncate leading-none\">\n                    {patient.category === 'pediatric' ? 'Pediátrico' : patient.category === 'elderly' ? 'Idoso' : 'Adulto'}\n                  </h2>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"px-2.5 py-0.5 bg-slate-900/5 dark:bg-white/10 rounded-full text-[10px] font-black tracking-widest text-slate-500 dark:text-slate-400 uppercase border border-white/20\">\n                      {patient.age || '--'} ANOS\n                    </span>\n                    <span className={`px-2 py-0.5 rounded-full text-[10px] font-black border ${\n                      patient.gender === 'F' ? 'bg-pink-100/50 dark:bg-pink-900/20 text-pink-500 border-pink-200/50' : 'bg-blue-100/50 dark:bg-blue-900/20 text-blue-500 border-blue-200/50'\n                    }`}>\n                      {patient.gender === 'F' ? 'FEM' : 'MASC'}\n                    </span>\n                  </div>\n               </div>\n               <div className=\"flex items-center gap-2 mt-1.5 overflow-hidden\">\n                  <Activity className=\"w-3.5 h-3.5 text-slate-400 shrink-0\" />\n                  <p className=\"text-[11px] font-bold text-slate-500 dark:text-slate-400 tracking-tight truncate\">\n                    {patient.allergies.length > 0 ? `Alergias: ${patient.allergies.join(', ')}` : 'Sem alergias registradas'}\n                  </p>\n               </div>\n            </div>\n          </div>\n\n          {/* Section: Right - Actions & Status */}\n          <div className=\"flex items-center gap-3 shrink-0\">\n            {/* Status Integrated Plate */}\n            <div className={`hidden sm:flex items-center gap-2.5 px-4 py-2 rounded-2xl ${statusStyle.bg} ${statusStyle.border} border backdrop-blur-md shadow-inner transition-all duration-500`}>\n                <div className={`w-2 h-2 rounded-full ${statusStyle.color} animate-pulse`} />\n                <span className={`text-[10px] font-black uppercase tracking-widest ${statusStyle.text}`}>{statusStyle.label}</span>\n            </div>\n\n            {/* Notifications */}\n            <div className=\"relative group\">\n               <button className=\"w-11 h-11 rounded-[18px] bg-slate-100 dark:bg-white/5 hover:bg-white dark:hover:bg-white/10 flex items-center justify-center text-slate-400 hover:text-blue-500 transition-all border border-transparent hover:border-white/50 active:scale-90\" onClick={(e) => e.stopPropagation()}>\n                 <Bell className=\"w-5 h-5\" />\n                 <span className=\"absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full ring-2 ring-white dark:ring-slate-900\"></span>\n               </button>\n            </div>\n\n            {/* Expansion Arrow */}\n            <button \n              className={`w-11 h-11 rounded-[18px] bg-slate-900 dark:bg-white text-white dark:text-slate-900 flex items-center justify-center transition-all duration-500 shadow-xl ${isExpanded ? 'rotate-180' : ''}`}\n              onClick={(e) => { e.stopPropagation(); setIsExpanded(!isExpanded); }}\n            >\n              <ChevronDown className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Expanded Controls - Optimized Grid */}\n        <AnimatePresence>\n          {isExpanded && (\n            <motion.div \n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              transition={{ duration: 0.5, ease: [0.16, 1, 0.3, 1] }}\n              className=\"w-full border-t border-white/20 dark:border-white/5 bg-slate-900/2 dark:bg-white/2\"\n            >\n              <div className=\"p-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6\">\n                  \n                  {/* Category & Gender - Left Column (lg:col-span-6) */}\n                  <div className=\"lg:col-span-6 space-y-5\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div className=\"space-y-2\">\n                            <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1\">Categoria</p>\n                            <div className=\"flex bg-slate-200/50 dark:bg-black/40 p-1 rounded-2xl border border-white/10\">\n                            {(['pediatric', 'adult', 'elderly'] as const).map(cat => (\n                                <button\n                                key={cat}\n                                onClick={() => updatePatient('category', cat)}\n                                className={`flex-1 py-1.5 text-[10px] font-black rounded-xl transition-all uppercase ${\n                                    patient.category === cat \n                                    ? 'bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-md' \n                                    : 'text-slate-500 dark:text-slate-400'\n                                }`}\n                                >\n                                {cat === 'pediatric' ? 'Ped' : cat === 'adult' ? 'Adul' : 'Idos'}\n                                </button>\n                            ))}\n                            </div>\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1\">Sexo</p>\n                            <div className=\"flex bg-slate-200/50 dark:bg-black/40 p-1 rounded-2xl border border-white/10\">\n                            {(['M', 'F'] as const).map(g => (\n                                <button\n                                    key={g}\n                                    onClick={() => updatePatient('gender', g)}\n                                    className={`flex-1 py-1.5 text-[10px] font-black rounded-xl transition-all ${\n                                        patient.gender === g \n                                        ? (g === 'M' ? 'bg-white dark:bg-slate-700 text-blue-600 shadow-md' : 'bg-white dark:bg-slate-700 text-pink-500 shadow-md')\n                                        : 'text-slate-400'\n                                    }`}\n                                >{g === 'F' ? 'FEM' : 'MASC'}</button>\n                            ))}\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div className=\"space-y-2\">\n                            <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1\">Idade</p>\n                            <div className=\"flex items-center bg-white/60 dark:bg-black/40 rounded-2xl border border-white/20 p-1 h-11\">\n                                <button onClick={(e) => handleAgeChange(e, -1)} className=\"w-9 h-full flex items-center justify-center rounded-xl hover:bg-white/80 dark:hover:bg-slate-700 text-slate-400 active:scale-90 transition-all\"><Minus className=\"w-3.5 h-3.5\" /></button>\n                                <input type=\"number\" value={patient.age} onChange={(e) => updatePatient('age', e.target.value)} className=\"w-full bg-transparent text-center font-black text-slate-800 dark:text-white text-sm focus:outline-none\" placeholder=\"0\" />\n                                <button onClick={(e) => handleAgeChange(e, 1)} className=\"w-9 h-full flex items-center justify-center rounded-xl hover:bg-white/80 dark:hover:bg-slate-700 text-slate-400 active:scale-90 transition-all\"><Plus className=\"w-3.5 h-3.5\" /></button>\n                            </div>\n                        </div>\n                        <div className=\"space-y-2\">\n                            <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1\">Telefone</p>\n                            <div className=\"flex items-center bg-white/60 dark:bg-black/40 rounded-2xl border border-white/20 px-3 h-11 gap-2\">\n                                <Phone className=\"w-3.5 h-3.5 text-slate-300\" />\n                                <input type=\"tel\" value={patient.phoneNumber} onChange={(e) => updatePatient('phoneNumber', e.target.value)} placeholder=\"(00) 00000-0000\" className=\"w-full bg-transparent font-bold text-slate-700 dark:text-slate-200 text-xs focus:outline-none\" />\n                            </div>\n                        </div>\n                    </div>\n                  </div>\n\n                  {/* Conditions & Allergies - Right Column (lg:col-span-6) */}\n                  <div className=\"lg:col-span-6 space-y-5\">\n                    <div className=\"space-y-2\">\n                        <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1\">Alergias e Condições</p>\n                        <div className=\"flex flex-wrap items-center gap-2 min-h-[94px] p-3 bg-white/40 dark:bg-black/40 rounded-2xl border border-white/20\">\n                            {patient.gender === 'F' && (\n                                <button\n                                    onClick={() => updatePatient('isPregnant', !patient.isPregnant)}\n                                    className={`px-3 py-1.5 rounded-xl text-[10px] font-black transition-all border flex items-center gap-2 ${\n                                        patient.isPregnant \n                                            ? 'bg-pink-100 dark:bg-pink-900/30 text-pink-600 border-pink-200' \n                                            : 'bg-white/10 text-slate-400 border-white/20'\n                                    }`}\n                                >\n                                    <Baby className=\"w-3 h-3\" /> GESTANTE\n                                </button>\n                            )}\n                            \n                            {patient.allergies.map((allergy, idx) => (\n                                <span key={idx} className=\"inline-flex items-center gap-2 pl-3 pr-2 py-1.5 rounded-xl bg-red-500/10 border border-red-200/50 text-[10px] font-black text-red-600 transition-all animate-in zoom-in-95\">\n                                    {allergy}\n                                    <button onClick={(e) => removeAllergy(e, allergy)} className=\"w-4 h-4 rounded-full flex items-center justify-center hover:bg-red-200 transition-colors\">\n                                        <X className=\"w-3 h-3\" />\n                                    </button>\n                                </span>\n                            ))}\n                            \n                            {isAddingAllergy ? (\n                                <input \n                                    autoFocus\n                                    onBlur={addAllergy}\n                                    onKeyDown={(e) => e.key === 'Enter' && e.currentTarget.blur()}\n                                    onChange={(e) => setNewAllergy(e.target.value)}\n                                    className=\"bg-white dark:bg-slate-800 border-2 border-blue-500/20 rounded-xl px-3 py-1 text-[10px] font-bold focus:outline-none\"\n                                    placeholder=\"Add...\"\n                                />\n                            ) : (\n                                <button onClick={(e) => { e.stopPropagation(); setIsAddingAllergy(true); }} className=\"w-8 h-8 rounded-xl bg-white/40 dark:bg-white/5 flex items-center justify-center text-slate-400 hover:text-blue-500 border border-dashed border-white/20 transition-all\">\n                                    <Plus className=\"w-4 h-4\" />\n                                </button>\n                            )}\n                        </div>\n                    </div>\n\n                    <div className=\"flex justify-end pt-1\">\n                        <button \n                            onClick={(e) => { e.stopPropagation(); setIsExpanded(false); }}\n                            className=\"bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-8 py-2.5 rounded-2xl text-[10px] font-black tracking-[0.2em] shadow-xl hover:scale-105 active:scale-95 transition-all uppercase\"\n                        >\n                            Concluir Atualização\n                        </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </header>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/HeartScoreCalculator.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreHorizontal' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":61,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'riskClasses' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":73,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'springConfig' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":80,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":80,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Heart, X, ArrowRight, ShieldCheck, Info, Settings, MoreHorizontal } from 'lucide-react';\nimport { Patient, Symptom } from '@/lib/types/medical';\nimport { applePhysics } from '@/lib/design-system/animation-tokens';\nimport { cn } from '@/lib/utils';\n\ninterface HeartScoreCalculatorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  patient: Patient;\n  antecedentesItems?: Symptom[];\n  mode?: 'modal' | 'inline';\n  onApply?: (result: string) => void;\n}\n\n// --- HELPER TO HIDE SCROLLBAR ---\nconst ScrollbarHide = () => (\n  <style>{`\n    .scrollbar-hide::-webkit-scrollbar {\n      display: none;\n    }\n    .scrollbar-hide {\n      -ms-overflow-style: none;\n      scrollbar-width: none;\n    }\n  `}</style>\n);\n\nexport const HeartScoreCalculator: React.FC<HeartScoreCalculatorProps> = ({\n  isOpen,\n  onClose,\n  patient,\n  antecedentesItems,\n  mode = 'modal',\n  onApply\n}) => {\n  const [historyPoints, setHistoryPoints] = useState(1);\n  const [ecgPoints, setEcgPoints] = useState(0);\n  const [troponinPoints, setTroponinPoints] = useState(0);\n\n  if (!isOpen) return null;\n\n  const age = parseInt(patient.age || '0');\n  const agePoints = age >= 65 ? 2 : age >= 45 ? 1 : 0;\n\n  const riskFactorsCount = antecedentesItems\n    ? antecedentesItems.filter(i => i.checked && ['has', 'dm', 'tabagismo', 'dislipidemia', 'hist_fam', 'obesidade'].includes(i.id)).length\n    : 0;\n\n  const riskPoints = riskFactorsCount >= 3 ? 2 : riskFactorsCount >= 1 ? 1 : 0;\n\n  const totalScore = historyPoints + agePoints + riskPoints + ecgPoints + troponinPoints;\n\n  const getRiskLevel = (score: number) => {\n    if (score <= 3) return { label: 'Baixo Risco', color: 'text-emerald-500', bg: 'bg-emerald-500', conduct: 'Alta precoce possível.' };\n    if (score <= 6) return { label: 'Moderado Risco', color: 'text-amber-500', bg: 'bg-amber-500', conduct: 'Observação + Troponina seriada.' };\n    return { label: 'Alto Risco', color: 'text-rose-500', bg: 'bg-rose-500', conduct: 'Internação / CATE precoce.' };\n  };\n\n  const risk = getRiskLevel(totalScore);\n\n  const handleApply = () => {\n    if (onApply) {\n      const resultText = `HEART Score aplicado: ${totalScore} pontos (${risk.label}). Conduta sugerida: ${risk.conduct}`\n      onApply(resultText)\n      onClose()\n    }\n  }\n\n  const riskClasses = {\n    'Baixo Risco': 'from-emerald-500/20 to-emerald-600/10 border-emerald-500/30 text-emerald-500 shadow-emerald-500/20',\n    'Moderado Risco': 'from-amber-500/20 to-amber-600/10 border-amber-500/30 text-amber-500 shadow-amber-500/20',\n    'Alto Risco': 'from-rose-500/20 to-rose-600/10 border-rose-500/30 text-rose-500 shadow-rose-500/20'\n  }[risk.label] || ''\n\n  // Spring transition config\n  const springConfig = applePhysics.default;\n\n  const content = (\n    <motion.div \n      initial={{ opacity: 0, scale: 0.9, y: 30, filter: 'blur(10px)' }}\n      animate={{ opacity: 1, scale: 1, y: 0, filter: 'blur(0px)' }}\n      transition={applePhysics.spatial}\n      className={cn(\n        \"flex flex-col h-full overflow-hidden relative font-sans text-white\",\n        mode === 'modal' \n          ? 'glass-elevated w-full max-w-lg rounded-[40px] max-h-[90vh]' \n          : 'bg-transparent w-full'\n      )}\n    >\n      <ScrollbarHide />\n      \n      {/* MESH GRADIENT BACKGROUND LAYER - REFINED FOR LIQUID GLASS */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none opacity-30\">\n         <motion.div \n           animate={{ \n             x: [0, 60, -60, 0], \n             y: [0, -60, 60, 0],\n             scale: [1, 1.3, 1, 0.9, 1]\n           }}\n           transition={{ duration: 25, repeat: Infinity, ease: \"linear\" }}\n           className={cn(\n             \"absolute -top-1/4 -left-1/4 w-full h-full rounded-full blur-[140px] transition-colors duration-1000 saturate-200\",\n             risk.label === 'Baixo Risco' ? 'bg-emerald-500/50' : risk.label === 'Moderado Risco' ? 'bg-amber-500/50' : 'bg-rose-500/50'\n           )}\n         />\n         <motion.div \n           animate={{ \n             x: [0, -50, 50, 0], \n             y: [0, 80, -80, 0],\n             scale: [1, 0.85, 1.15, 1]\n           }}\n           transition={{ duration: 20, repeat: Infinity, ease: \"linear\" }}\n           className=\"absolute -bottom-1/4 -right-1/4 w-full h-full bg-blue-500/30 rounded-full blur-[140px] saturate-150\"\n         />\n         <motion.div\n           animate={{ opacity: [0.1, 0.25, 0.1] }}\n           transition={{ duration: 1500, repeat: Infinity, ease: \"easeInOut\" }}\n           className=\"absolute inset-0 bg-white/20 blur-[120px]\"\n         />\n      </div>\n\n      {/* Header: Tabs and Close (Style GlassCalendar) */}\n      <div className=\"p-6 relative z-20\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-1 rounded-xl bg-black/20 p-1 backdrop-blur-md border border-white/5\">\n            <button className={cn(\n              \"rounded-lg px-4 py-1.5 text-[10px] font-black uppercase tracking-widest transition-all duration-300\",\n              mode === 'modal' ? \"bg-white text-black shadow-lg rim-highlight\" : \"text-white/60 hover:text-white\"\n            )}>\n              Modal\n            </button>\n            <button className={cn(\n              \"rounded-lg px-4 py-1.5 text-[10px] font-black uppercase tracking-widest transition-all duration-300\",\n              mode === 'inline' ? \"bg-white text-black shadow-lg rim-highlight\" : \"text-white/60 hover:text-white\"\n            )}>\n              Inline\n            </button>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <motion.button \n              whileTap={applePhysics.haptic}\n              className=\"p-2.5 text-white/70 hover:bg-white/10 rounded-full transition-colors border border-transparent hover:border-white/10\"\n            >\n              <Settings className=\"h-4 w-4\" />\n            </motion.button>\n            <motion.button \n              whileTap={applePhysics.haptic}\n              onClick={onClose} \n              className=\"p-2.5 text-white/70 hover:bg-rose-500/20 hover:text-rose-400 rounded-full transition-all border border-transparent hover:border-rose-500/30\"\n            >\n              <X className=\"h-4 w-4\" />\n            </motion.button>\n          </div>\n        </div>\n\n        <motion.div \n          initial={{ opacity: 0, y: -15 }} \n          animate={{ opacity: 1, y: 0 }} \n          transition={applePhysics.default}\n          className=\"mt-8 flex flex-col\"\n        >\n            <div className=\"flex items-center gap-2 mb-2\">\n              <Heart className=\"w-4 h-4 text-rose-500 fill-current animate-pulse shadow-[0_0_15px_rgba(244,63,94,0.4)]\" />\n              <span className=\"text-[10px] font-black text-white/40 uppercase tracking-[0.3em]\">Evaluation Protocol</span>\n            </div>\n            <h2 className=\"text-4xl font-bold tracking-tight bg-linear-to-b from-white to-white/60 bg-clip-text text-transparent\">HEART Score</h2>\n        </motion.div>\n      </div>\n\n      {/* Main Content Area */}\n      <div className=\"p-6 pt-0 overflow-y-auto overflow-x-hidden scrollbar-hide space-y-9 relative z-20\">\n         {/* Introduction Note - Floating Vision style */}\n         <div className=\"p-5 rounded-3xl bg-white/5 border border-white/10 flex gap-4 items-center group hover:bg-white/8 transition-all duration-500 rim-highlight\">\n            <div className=\"p-2.5 rounded-xl bg-blue-500/15 text-blue-400 border border-blue-500/20 shadow-[0_0_20px_rgba(59,130,246,0.15)]\">\n               <Info className=\"w-4 h-4\" />\n            </div>\n            <p className=\"text-[12px] font-bold text-white/70 leading-relaxed italic opacity-80 group-hover:opacity-100 transition-opacity\">\n              Protocolo para pacientes com dor torácica suspeita de SCA (Síndrome Coronariana Aguda).\n            </p>\n         </div>\n\n         {/* H - History */}\n         <section>\n            <div className=\"flex items-center gap-3 mb-5\">\n               <div className=\"w-7 h-7 rounded-full bg-white text-black flex items-center justify-center text-[10px] font-black shadow-lg rim-highlight\">H</div>\n               <label className=\"text-[10px] font-black text-white/40 uppercase tracking-[0.2em]\">História Clínica</label>\n            </div>\n            <div className=\"overflow-x-auto scrollbar-hide -mx-6 px-6\">\n              <div className=\"flex space-x-4\">\n                {[\n                  { val: 0, label: 'Pouco Suspeita', desc: 'Resolução rápida' },\n                  { val: 1, label: 'Moderadamente', desc: 'Angina estável' },\n                  { val: 2, label: 'Altamente', desc: 'Sinais clássicos' }\n                ].map((opt) => (\n                  <motion.button\n                    key={opt.val}\n                    whileTap={applePhysics.haptic}\n                    onClick={() => setHistoryPoints(opt.val)}\n                    className={cn(\n                      \"shrink-0 flex flex-col items-start p-5 rounded-3xl min-w-[150px] border transition-all duration-500\",\n                      historyPoints === opt.val \n                        ? \"bg-linear-to-br from-blue-500 to-indigo-600 border-blue-400 text-white shadow-xl shadow-blue-600/20 rim-highlight\" \n                        : \"bg-white/5 border-white/10 text-white hover:bg-white/10\"\n                    )}\n                  >\n                    <span className=\"text-[14px] font-black leading-tight tracking-tight\">{opt.label}</span>\n                    <span className=\"text-[10px] font-bold mt-1.5 opacity-40 uppercase tracking-tighter\">{opt.desc}</span>\n                    <div className={cn(\n                      \"mt-4 px-2.5 py-1 rounded-full text-[9px] font-black tracking-widest border\",\n                      historyPoints === opt.val ? \"bg-white/20 border-white/40\" : \"bg-white/10 border-white/10 opacity-50\"\n                    )}>\n                       +{opt.val} PTS\n                    </div>\n                  </motion.button>\n                ))}\n              </div>\n            </div>\n         </section>\n\n         <div className=\"h-px bg-white/5\" />\n\n         {/* E - ECG */}\n         <section>\n            <div className=\"flex items-center gap-3 mb-5\">\n               <div className=\"w-7 h-7 rounded-full bg-white text-black flex items-center justify-center text-[10px] font-black shadow-lg rim-highlight\">E</div>\n               <label className=\"text-[10px] font-black text-white/40 uppercase tracking-[0.2em]\">Eletrocardiograma</label>\n            </div>\n            <div className=\"overflow-x-auto scrollbar-hide -mx-6 px-6\">\n              <div className=\"flex space-x-4\">\n                {[\n                  { val: 0, label: 'Normal', desc: 'Sem alterações' },\n                  { val: 1, label: 'Inespecífico', desc: 'RBB/LBB antigo' },\n                  { val: 2, label: 'Depressão ST', desc: 'Isquemia aguda' }\n                ].map((opt) => (\n                  <motion.button\n                    key={opt.val}\n                    whileTap={applePhysics.haptic}\n                    onClick={() => setEcgPoints(opt.val)}\n                    className={cn(\n                      \"shrink-0 flex flex-col items-start p-5 rounded-3xl min-w-[150px] border transition-all duration-500\",\n                      ecgPoints === opt.val \n                        ? \"bg-linear-to-br from-blue-500 to-indigo-600 border-blue-400 text-white shadow-xl shadow-blue-600/20 rim-highlight\" \n                        : \"bg-white/5 border-white/10 text-white hover:bg-white/10\"\n                    )}\n                  >\n                    <span className=\"text-[14px] font-black leading-tight tracking-tight\">{opt.label}</span>\n                    <span className=\"text-[10px] font-bold mt-1.5 opacity-40 uppercase tracking-tighter\">{opt.desc}</span>\n                    <div className={cn(\n                      \"mt-4 px-2.5 py-1 rounded-full text-[9px] font-black tracking-widest border\",\n                      ecgPoints === opt.val ? \"bg-white/20 border-white/40\" : \"bg-white/10 border-white/10 opacity-50\"\n                    )}>\n                       +{opt.val} PTS\n                    </div>\n                  </motion.button>\n                ))}\n              </div>\n            </div>\n         </section>\n\n         <div className=\"h-px bg-white/5\" />\n\n         {/* A & R Auto-Calculated Grid */}\n         <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"p-5 rounded-3xl bg-white/5 border border-white/10 backdrop-blur-md rim-highlight group hover:bg-white/10 transition-colors duration-500\">\n               <div className=\"flex items-center gap-2 mb-3\">\n                 <div className=\"w-5 h-5 rounded-full bg-white/15 flex items-center justify-center text-[9px] font-black group-hover:bg-white group-hover:text-black transition-colors\">A</div>\n                 <span className=\"text-[10px] font-black text-white/30 uppercase tracking-[0.2em] group-hover:text-white/60 transition-colors\">Idade</span>\n               </div>\n               <div className=\"flex items-center justify-between mt-1\">\n                 <span className=\"text-xl font-black group-hover:scale-105 transition-transform origin-left\">{patient.age || 0} anos</span>\n                 <span className=\"text-blue-400 font-black text-2xl drop-shadow-[0_0_10px_rgba(96,165,250,0.3)]\">+{agePoints}</span>\n               </div>\n            </div>\n\n            <div className=\"p-5 rounded-3xl bg-white/5 border border-white/10 backdrop-blur-md rim-highlight group hover:bg-white/10 transition-colors duration-500\">\n               <div className=\"flex items-center gap-2 mb-3\">\n                 <div className=\"w-5 h-5 rounded-full bg-white/15 flex items-center justify-center text-[9px] font-black group-hover:bg-white group-hover:text-black transition-colors\">R</div>\n                 <span className=\"text-[10px] font-black text-white/30 uppercase tracking-[0.2em] group-hover:text-white/60 transition-colors\">Fatores</span>\n               </div>\n               <div className=\"flex items-center justify-between mt-1\">\n                 <span className=\"text-xl font-black group-hover:scale-105 transition-transform origin-left\">{riskFactorsCount} detectados</span>\n                 <span className=\"text-blue-400 font-black text-2xl drop-shadow-[0_0_10px_rgba(96,165,250,0.3)]\">+{riskPoints}</span>\n               </div>\n            </div>\n         </div>\n\n         <div className=\"h-px bg-white/5\" />\n\n         {/* T - Troponin */}\n         <section>\n            <div className=\"flex items-center gap-3 mb-5\">\n               <div className=\"w-7 h-7 rounded-full bg-white text-black flex items-center justify-center text-[10px] font-black shadow-lg rim-highlight\">T</div>\n               <label className=\"text-[10px] font-black text-white/40 uppercase tracking-[0.2em]\">Troponina</label>\n            </div>\n            <div className=\"overflow-x-auto scrollbar-hide -mx-6 px-6\">\n              <div className=\"flex space-x-4\">\n                {[\n                  { val: 0, label: 'Normal', desc: '< Limite' },\n                  { val: 1, label: 'Elevada', desc: '1-3x Limite' },\n                  { val: 2, label: 'Crítica', desc: '> 3x Limite' }\n                ].map((opt) => (\n                  <motion.button\n                    key={opt.val}\n                    whileTap={applePhysics.haptic}\n                    onClick={() => setTroponinPoints(opt.val)}\n                    className={cn(\n                      \"shrink-0 flex flex-col items-start p-5 rounded-3xl min-w-[150px] border transition-all duration-500\",\n                      troponinPoints === opt.val \n                        ? \"bg-linear-to-br from-blue-500 to-indigo-600 border-blue-400 text-white shadow-xl shadow-blue-600/20 rim-highlight\" \n                        : \"bg-white/5 border-white/10 text-white hover:bg-white/10\"\n                    )}\n                  >\n                    <span className=\"text-[14px] font-black leading-tight tracking-tight\">{opt.label}</span>\n                    <span className=\"text-[10px] font-bold mt-1.5 opacity-40 uppercase tracking-tighter\">{opt.desc}</span>\n                    <div className={cn(\n                      \"mt-4 px-2.5 py-1 rounded-full text-[9px] font-black tracking-widest border\",\n                      troponinPoints === opt.val ? \"bg-white/20 border-white/40\" : \"bg-white/10 border-white/10 opacity-50\"\n                    )}>\n                       +{opt.val} PTS\n                    </div>\n                  </motion.button>\n                ))}\n              </div>\n            </div>\n         </section>\n      </div>\n\n      {/* FOOTER: LIQUID RESULT AREA */}\n      <div className=\"mt-auto relative z-30\">\n         <div className=\"h-px bg-white/10\" />\n         \n         <div className=\"p-6 flex items-center justify-between gap-6\">\n            <div className=\"flex items-center gap-5\">\n               <div className=\"relative\">\n                  <motion.div \n                    animate={{ scale: [1, 1.2, 1], opacity: [0.2, 0.4, 0.2] }}\n                    transition={{ duration: 4, repeat: Infinity }}\n                    className={cn(\n                      \"absolute inset-0 blur-2xl transition-colors duration-1000\",\n                      risk.label === 'Baixo Risco' ? 'bg-emerald-400' : risk.label === 'Moderado Risco' ? 'bg-amber-400' : 'bg-rose-400'\n                    )} \n                  />\n                  <div className=\"w-18 h-18 rounded-[24px] bg-white/10 border border-white/20 flex flex-col items-center justify-center relative z-10 backdrop-blur-2xl shadow-2xl rim-highlight\">\n                     <span className={cn(\"text-4xl font-black leading-none tracking-tighter\", risk.color)}>{totalScore}</span>\n                     <span className=\"text-[9px] font-black text-white/40 uppercase tracking-[0.2em] mt-1.5\">PTS</span>\n                  </div>\n               </div>\n               <div className=\"flex flex-col gap-1\">\n                  <span className=\"text-[10px] font-black text-white/30 uppercase tracking-[0.3em] block\">Diagnostic Result</span>\n                  <motion.span \n                    layoutId=\"risk-label\"\n                    className={cn(\"text-lg font-black uppercase tracking-tight leading-none\", risk.color)}\n                  >\n                    {risk.label}\n                  </motion.span>\n               </div>\n            </div>\n\n            {onApply && (\n              <motion.button \n                 whileHover={{ scale: 1.05, y: -2 }}\n                 whileTap={applePhysics.haptic}\n                 onClick={handleApply}\n                 className=\"h-14 px-8 rounded-2xl bg-white text-black font-black uppercase tracking-widest text-[11px] shadow-2xl transition-all duration-500 flex items-center gap-3 group rim-highlight\"\n              >\n                 Confirmar\n                 <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1.5 transition-transform duration-500\" />\n              </motion.button>\n            )}\n         </div>\n\n         <div className=\"px-6 pb-8\">\n           <motion.div \n             layout\n             transition={applePhysics.spatial}\n             className=\"p-5 rounded-[32px] bg-white/8 border border-white/10 backdrop-blur-xl relative overflow-hidden group shadow-lg\"\n           >\n              <div className={cn(\n                \"absolute left-0 top-0 bottom-0 w-1.5 transition-colors duration-1000 saturate-150\",\n                risk.label === 'Baixo Risco' ? 'bg-emerald-500' : risk.label === 'Moderado Risco' ? 'bg-amber-500' : 'bg-rose-500'\n              )} />\n              <div className=\"relative z-10\">\n                <span className=\"opacity-30 uppercase text-[9px] font-black tracking-[0.3em] block mb-2 group-hover:text-white/60 transition-colors\">Orientação Conduta</span>\n                <p className=\"text-[14px] font-bold text-white leading-relaxed pl-1 tracking-tight\">\n                  {risk.conduct}\n                </p>\n              </div>\n              \n              {/* Subtle glass bloom */}\n              <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none\" />\n           </motion.div>\n         </div>\n      </div>\n    </motion.div>\n  );\n\n  if (mode === 'inline') return content;\n\n  return (\n    <div className=\"fixed inset-0 z-60 flex items-center justify-center p-4\">\n      <motion.div \n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        onClick={onClose}\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-xl\" \n      />\n      <AnimatePresence>\n        {content}\n      </AnimatePresence>\n    </div>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/InlineCalculatorPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/LiquidEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useState, useRef, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { Check, X, Pencil, Type } from 'lucide-react'\n\ninterface LiquidEditorProps {\n  title: string\n  content: string\n  onSave: (value: string) => void\n  readOnly?: boolean\n}\n\nexport const LiquidEditor: React.FC<LiquidEditorProps> = ({\n  title,\n  content,\n  onSave,\n  readOnly = false\n}) => {\n  const [isEditing, setIsEditing] = useState(false)\n  const [tempValue, setTempValue] = useState(content)\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\n\n  // Sync temp value if content changes externally\n  useEffect(() => {\n    if (!isEditing) setTempValue(content)\n  }, [content, isEditing])\n\n  // Auto-resize\n  useEffect(() => {\n    if (isEditing && textareaRef.current) {\n      textareaRef.current.style.height = 'auto'\n      textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px'\n    }\n  }, [isEditing, tempValue])\n\n  const handleSave = () => {\n    setIsEditing(false)\n    onSave(tempValue)\n  }\n\n  const handleCancel = () => {\n    setIsEditing(false)\n    setTempValue(content)\n  }\n\n  return (\n    <div \n      className={`group relative rounded-[32px] transition-all duration-500 border ${\n        isEditing \n          ? 'bg-white dark:bg-slate-900 border-blue-500/50 shadow-2xl scale-[1.01] z-10' \n          : 'bg-white/40 dark:bg-white/5 border-white/40 dark:border-white/5 hover:bg-white/60 dark:hover:bg-white/10 hover:shadow-lg'\n      }`}\n    >\n      {/* Visual Header */}\n      <div className=\"px-6 pt-5 flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <div className={`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${\n            isEditing ? 'bg-blue-500 text-white' : 'bg-slate-200/50 dark:bg-white/5 text-slate-400'\n          }`}>\n            <Type className=\"w-4 h-4\" />\n          </div>\n          <div>\n            <h3 className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em]\">{title}</h3>\n            {isEditing && (\n              <motion.span \n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                className=\"text-[9px] font-bold text-blue-500 uppercase tracking-wider\"\n              >\n                Modo de Edição Ativo\n              </motion.span>\n            )}\n          </div>\n        </div>\n\n        {!readOnly && !isEditing && (\n          <button \n            onClick={() => setIsEditing(true)}\n            className=\"p-2 rounded-xl bg-slate-100 dark:bg-white/5 text-slate-400 opacity-0 group-hover:opacity-100 transition-all hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20\"\n          >\n            <Pencil className=\"w-4 h-4\" />\n          </button>\n        )}\n      </div>\n\n      <div className=\"px-6 py-5\">\n        {isEditing ? (\n          <div className=\"space-y-4\">\n            <textarea\n              ref={textareaRef}\n              autoFocus\n              value={tempValue}\n              onChange={(e) => setTempValue(e.target.value)}\n              className=\"w-full bg-transparent border-none focus:ring-0 p-0 text-slate-800 dark:text-white text-base leading-relaxed font-semibold placeholder:text-slate-300 dark:placeholder:text-slate-700 resize-none overflow-hidden\"\n              placeholder={`Escreva aqui a ${title.toLowerCase()}...`}\n            />\n            <div className=\"flex justify-end gap-2 pt-2 border-t border-slate-100 dark:border-white/5\">\n              <button \n                onClick={handleCancel}\n                className=\"px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest text-slate-400 hover:text-red-500 transition-colors\"\n              >\n                Descartar\n              </button>\n              <button \n                onClick={handleSave}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg shadow-blue-500/20 hover:scale-105 active:scale-95 transition-all flex items-center gap-2\"\n              >\n                <Check className=\"w-3.5 h-3.5\" /> Salvar Alterações\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div \n            onClick={() => !readOnly && setIsEditing(true)}\n            className={`text-slate-800 dark:text-slate-200 text-base leading-relaxed font-semibold cursor-text whitespace-pre-wrap ${\n              !content && 'italic text-slate-400 opacity-50'\n            }`}\n          >\n            {content || `Nenhuma ${title.toLowerCase()} registrada.`}\n          </div>\n        )}\n      </div>\n\n      {/* Decorative Blur Accent */}\n      {isEditing && (\n        <div className=\"absolute -inset-px rounded-[32px] bg-linear-to-br from-blue-500/20 to-transparent pointer-events-none -z-10\" />\n      )}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/ProtocolDrawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/SmartNotePanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/glass-inputs/GlassCheckbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/glass-inputs/GlassInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/glass-inputs/GlassMultiSelect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/glass-inputs/GlassRange.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/glass-inputs/GlassSegmented.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/medical/glass-inputs/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/providers/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/providers/query-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/providers/theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/GlassTestimonialStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/animated-background.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'blobAnimation' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { motion } from 'framer-motion'\nimport { blobAnimation, blobTransition } from '@/lib/animations'\n\ninterface BlobConfig {\n  color: string\n  position: string\n  size: string\n  blur: string\n  duration: number\n  animation: { x: number[]; y: number[] }\n}\n\nconst defaultBlobs: BlobConfig[] = [\n  {\n    color: 'bg-teal-400/30 dark:bg-teal-500/20',\n    position: 'left-[-12%] top-[-18%]',\n    size: 'h-[40%] w-[40%]',\n    blur: 'blur-[140px]',\n    duration: 26,\n    animation: { x: [0, 40, -20, 0], y: [0, -30, 20, 0] },\n  },\n  {\n    color: 'bg-blue-400/25 dark:bg-blue-500/15',\n    position: 'right-[-10%] top-[10%]',\n    size: 'h-[38%] w-[38%]',\n    blur: 'blur-[160px]',\n    duration: 30,\n    animation: { x: [0, -30, 20, 0], y: [0, 20, -10, 0] },\n  },\n  {\n    color: 'bg-amber-300/25 dark:bg-amber-500/15',\n    position: 'bottom-[-20%] left-[15%]',\n    size: 'h-[45%] w-[45%]',\n    blur: 'blur-[160px]',\n    duration: 34,\n    animation: { x: [0, -20, 20, 0], y: [0, 30, -20, 0] },\n  },\n]\n\ninterface AnimatedBackgroundProps {\n  blobs?: BlobConfig[]\n  showGrid?: boolean\n  className?: string\n}\n\nexport function AnimatedBackground({\n  blobs = defaultBlobs,\n  showGrid = true,\n  className = '',\n}: AnimatedBackgroundProps) {\n  return (\n    <div className={`fixed inset-0 -z-10 ${className}`} suppressHydrationWarning>\n      {/* Base gradient */}\n      <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_top,_#ffffff_0%,_#f4f6fb_45%,_#eef2f8_100%)] dark:bg-[radial-gradient(circle_at_top,_#1a1a1a_0%,_#0a0a0a_100%)]\" />\n\n      {/* Animated blobs */}\n      {blobs.map((blob, index) => (\n        <motion.div\n          key={index}\n          className={`absolute ${blob.position} ${blob.size} rounded-full ${blob.color} ${blob.blur}`}\n          animate={blob.animation}\n          transition={blobTransition(blob.duration)}\n        />\n      ))}\n\n      {/* Subtle grid pattern */}\n      {showGrid && (\n        <div className=\"absolute inset-0 opacity-40 dark:opacity-20 [background-image:linear-gradient(to_right,rgba(15,23,42,0.04)_1px,transparent_1px),linear-gradient(to_bottom,rgba(15,23,42,0.04)_1px,transparent_1px)] [background-size:48px_48px]\" />\n      )}\n    </div>\n  )\n}\n\n// Preset configurations for different pages\nexport const loginBlobs: BlobConfig[] = [\n  {\n    color: 'bg-teal-400/30 dark:bg-teal-500/20',\n    position: 'left-[-12%] top-[-18%]',\n    size: 'h-[40%] w-[40%]',\n    blur: 'blur-[140px]',\n    duration: 26,\n    animation: { x: [0, 40, -20, 0], y: [0, -30, 20, 0] },\n  },\n  {\n    color: 'bg-blue-400/25 dark:bg-blue-500/15',\n    position: 'right-[-10%] top-[10%]',\n    size: 'h-[38%] w-[38%]',\n    blur: 'blur-[160px]',\n    duration: 30,\n    animation: { x: [0, -30, 20, 0], y: [0, 20, -10, 0] },\n  },\n  {\n    color: 'bg-amber-300/25 dark:bg-amber-500/15',\n    position: 'bottom-[-20%] left-[15%]',\n    size: 'h-[45%] w-[45%]',\n    blur: 'blur-[160px]',\n    duration: 34,\n    animation: { x: [0, -20, 20, 0], y: [0, 30, -20, 0] },\n  },\n]\n\nexport const homeBlobs: BlobConfig[] = [\n  {\n    color: 'bg-teal-400/25 dark:bg-teal-500/15',\n    position: 'left-[-10%] top-[-15%]',\n    size: 'h-[50%] w-[50%]',\n    blur: 'blur-[180px]',\n    duration: 28,\n    animation: { x: [0, 50, -30, 0], y: [0, -40, 30, 0] },\n  },\n  {\n    color: 'bg-blue-400/20 dark:bg-blue-500/12',\n    position: 'right-[-15%] top-[20%]',\n    size: 'h-[45%] w-[45%]',\n    blur: 'blur-[200px]',\n    duration: 32,\n    animation: { x: [0, -40, 30, 0], y: [0, 30, -20, 0] },\n  },\n  {\n    color: 'bg-violet-300/20 dark:bg-violet-500/12',\n    position: 'bottom-[-25%] right-[20%]',\n    size: 'h-[40%] w-[40%]',\n    blur: 'blur-[160px]',\n    duration: 36,\n    animation: { x: [0, 30, -20, 0], y: [0, -30, 40, 0] },\n  },\n  {\n    color: 'bg-amber-300/20 dark:bg-amber-500/12',\n    position: 'bottom-[-10%] left-[10%]',\n    size: 'h-[35%] w-[35%]',\n    blur: 'blur-[140px]',\n    duration: 30,\n    animation: { x: [0, -25, 25, 0], y: [0, 35, -25, 0] },\n  },\n]\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/animated-wrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/container.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/fade-in.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/glass-action-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/glass-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/glass-container.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/glass-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/glass-radio-group.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":193,"column":7,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":193,"endColumn":76,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5417,5486],"text":"// @ts-expect-error - ARIA spec requires string \"true\"/\"false\", not boolean"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":235,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":235,"endColumn":82,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[6819,6888],"text":"// @ts-expect-error - ARIA spec requires string \"true\"/\"false\", not boolean"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":238,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":238,"endColumn":82,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[7032,7101],"text":"// @ts-expect-error - ARIA spec requires string \"true\"/\"false\", not boolean"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/ios/Checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/ios/SegmentedControl.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":31,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":31,"endColumn":82,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1090,1159],"text":"// @ts-expect-error - ARIA spec requires string \"true\"/\"false\", not boolean"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/scale-in.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/components/ui/toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/contexts/DashboardPreferencesContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/contexts/ThemeContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/hooks/use-chat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/hooks/use-complaints.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/hooks/use-toast.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actionTypes' is assigned a value but only used as a type. Allowed unused vars must match /^_/u.","line":16,"column":7,"nodeType":null,"messageId":"usedOnlyAsType","endLine":16,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport * as React from 'react'\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 5\nconst TOAST_REMOVE_DELAY = 5000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/instrumentation-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/instrumentation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/anamneseAutocomplete.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/citations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/context.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/extraction-prompts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/guardrails.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/guideline-prompts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/ai/prompts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/analytics/events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/analytics/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/categories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/complaint-to-form.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/generate-narrative.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/narrative-templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/red-flag-detector.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/severity.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/terminology.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/anamnese/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/animations.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'duration' is assigned a value but never used. Allowed unused args must match /^_/u.","line":114,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":114,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Shared animation constants and variants for Framer Motion\n * Matches the Dashboard's Apple-inspired animation style\n */\n\nimport type { Variants, Transition } from 'framer-motion'\n\n// Apple-inspired easing function\nexport const appleEase = [0.22, 1, 0.36, 1] as const\n\n// Spring configuration for buttons and interactive elements\nexport const springConfig = {\n  type: 'spring' as const,\n  stiffness: 300,\n  damping: 20,\n}\n\n// Faster spring for snappy interactions\nexport const springFast = {\n  type: 'spring' as const,\n  stiffness: 400,\n  damping: 25,\n}\n\n// Fade up animation variant\nexport const fadeUp: Variants = {\n  hidden: { opacity: 0, y: 24 },\n  show: {\n    opacity: 1,\n    y: 0,\n    transition: {\n      duration: 0.8,\n      ease: appleEase,\n    },\n  },\n}\n\n// Fade in animation variant\nexport const fadeIn: Variants = {\n  hidden: { opacity: 0 },\n  show: {\n    opacity: 1,\n    transition: {\n      duration: 0.5,\n      ease: appleEase,\n    },\n  },\n}\n\n// Scale in animation variant\nexport const scaleIn: Variants = {\n  hidden: { opacity: 0, scale: 0.95 },\n  show: {\n    opacity: 1,\n    scale: 1,\n    transition: springConfig,\n  },\n}\n\n// Stagger children animation\nexport const stagger: Variants = {\n  hidden: {},\n  show: {\n    transition: {\n      staggerChildren: 0.12,\n      delayChildren: 0.05,\n    },\n  },\n}\n\n// Container with stagger for forms\nexport const containerStagger: Variants = {\n  hidden: { opacity: 0 },\n  visible: {\n    opacity: 1,\n    transition: {\n      staggerChildren: 0.1,\n      delayChildren: 0.2,\n    },\n  },\n}\n\n// Item variant for staggered lists\nexport const itemVariant: Variants = {\n  hidden: { opacity: 0, y: 20 },\n  visible: {\n    opacity: 1,\n    y: 0,\n    transition: springConfig,\n  },\n}\n\n// Hover animation for cards\nexport const cardHover = {\n  scale: 1.02,\n  y: -4,\n}\n\n// Tap animation for interactive elements\nexport const cardTap = {\n  scale: 0.98,\n}\n\n// Button hover/tap animations\nexport const buttonHover = {\n  scale: 1.02,\n}\n\nexport const buttonTap = {\n  scale: 0.98,\n}\n\n// Blob animation for background elements\nexport const blobAnimation = (duration: number = 26) => ({\n  x: [0, 40, -20, 0],\n  y: [0, -30, 20, 0],\n})\n\nexport const blobTransition = (duration: number = 26): Transition => ({\n  duration,\n  repeat: Infinity,\n  ease: 'easeInOut',\n})\n\n// Pulse animation for status indicators\nexport const pulseAnimation = {\n  scale: [1, 1.2, 1],\n  opacity: [0.7, 1, 0.7],\n}\n\nexport const pulseTransition: Transition = {\n  duration: 2,\n  repeat: Infinity,\n  ease: 'easeInOut',\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/auth/actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rateLimitError' is defined but never used.","line":44,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rateLimitError' is defined but never used.","line":82,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":82,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rateLimitError' is defined but never used.","line":139,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":139,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\n\nimport { createServerClient } from '@/lib/supabase/server'\nimport { redirect } from 'next/navigation'\nimport { headers } from 'next/headers'\nimport { z } from 'zod'\nimport { authLimiter } from '@/lib/rate-limit'\n\n// Strong password schema\nconst passwordSchema = z\n  .string()\n  .min(12, 'Senha deve ter no mínimo 12 caracteres')\n  .regex(/[A-Z]/, 'Deve conter ao menos uma letra maiúscula')\n  .regex(/[a-z]/, 'Deve conter ao menos uma letra minúscula')\n  .regex(/[0-9]/, 'Deve conter ao menos um número')\n  .regex(/[^A-Za-z0-9]/, 'Deve conter ao menos um caractere especial (!@#$%^&*)')\n\nconst loginSchema = z.object({\n  email: z.string().email('Email inválido'),\n  password: z.string().min(6, 'Senha deve ter pelo menos 6 caracteres'),\n})\n\nconst registerSchema = z.object({\n  email: z.string().email('Email inválido'),\n  password: passwordSchema,\n  fullName: z.string().min(3, 'Nome completo obrigatório'),\n  crmNumber: z.string().min(4, 'CRM obrigatório'),\n  crmState: z.string().length(2, 'UF do CRM deve ter 2 caracteres'),\n})\n\nexport type AuthState = {\n  error?: string\n  success?: boolean\n}\n\nexport async function login(_prevState: AuthState, formData: FormData): Promise<AuthState> {\n  // Rate limiting check\n  try {\n    const headersList = await headers()\n    const mockRequest = new Request('http://localhost', {\n      headers: headersList,\n    })\n    await authLimiter.check(mockRequest, 5) // 5 tentativas por minuto\n  } catch (rateLimitError) {\n    return {\n      error: 'Muitas tentativas de login. Aguarde alguns minutos antes de tentar novamente.'\n    }\n  }\n\n  const rawData = {\n    email: formData.get('email') as string,\n    password: formData.get('password') as string,\n  }\n\n  const validated = loginSchema.safeParse(rawData)\n  if (!validated.success) {\n    return { error: validated.error.errors[0]?.message ?? 'Dados invalidos' }\n  }\n\n  const supabase = await createServerClient()\n\n  const { error } = await supabase.auth.signInWithPassword({\n    email: validated.data.email,\n    password: validated.data.password,\n  })\n\n  if (error) {\n    return { error: 'Email ou senha incorretos' }\n  }\n\n  redirect('/dashboard')\n}\n\nexport async function register(_prevState: AuthState, formData: FormData): Promise<AuthState> {\n  // Rate limiting check\n  try {\n    const headersList = await headers()\n    const mockRequest = new Request('http://localhost', {\n      headers: headersList,\n    })\n    await authLimiter.check(mockRequest, 3) // 3 tentativas por minuto (mais restritivo)\n  } catch (rateLimitError) {\n    return {\n      error: 'Muitas tentativas de registro. Aguarde alguns minutos antes de tentar novamente.'\n    }\n  }\n\n  const rawData = {\n    email: formData.get('email') as string,\n    password: formData.get('password') as string,\n    fullName: formData.get('fullName') as string,\n    crmNumber: formData.get('crmNumber') as string,\n    crmState: formData.get('crmState') as string,\n  }\n\n  const validated = registerSchema.safeParse(rawData)\n  if (!validated.success) {\n    return { error: validated.error.errors[0]?.message ?? 'Dados invalidos' }\n  }\n\n  const supabase = await createServerClient()\n\n  const { error } = await supabase.auth.signUp({\n    email: validated.data.email,\n    password: validated.data.password,\n    options: {\n      data: {\n        full_name: validated.data.fullName,\n        crm_number: validated.data.crmNumber,\n        crm_state: validated.data.crmState,\n      },\n    },\n  })\n\n  if (error) {\n    if (error.message.includes('already registered')) {\n      return { error: 'Este email já está cadastrado' }\n    }\n    return { error: 'Erro ao criar conta. Tente novamente.' }\n  }\n\n  return { success: true }\n}\n\nexport async function logout() {\n  const supabase = await createServerClient()\n  await supabase.auth.signOut()\n  redirect('/login')\n}\n\nexport async function forgotPassword(_prevState: AuthState, formData: FormData): Promise<AuthState> {\n  // Rate limiting check\n  try {\n    const headersList = await headers()\n    const mockRequest = new Request('http://localhost', {\n      headers: headersList,\n    })\n    await authLimiter.check(mockRequest, 3) // 3 tentativas por minuto\n  } catch (rateLimitError) {\n    return {\n      error: 'Muitas tentativas. Aguarde alguns minutos antes de tentar novamente.'\n    }\n  }\n\n  const email = formData.get('email') as string\n\n  if (!email || !z.string().email().safeParse(email).success) {\n    return { error: 'Email inválido' }\n  }\n\n  const supabase = await createServerClient()\n\n  const { error } = await supabase.auth.resetPasswordForEmail(email, {\n    redirectTo: `${process.env.NEXT_PUBLIC_APP_URL}/auth/callback?next=/reset-password`,\n  })\n\n  if (error) {\n    // Não revela se o email existe ou não (segurança)\n    return { success: true }\n  }\n\n  return { success: true }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/allComplaints.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/complaint-groups.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/complaintCheckboxMap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/complaintsData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/flashTemplates.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Patient' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Patient } from '@/lib/types/medical'\n\nexport interface FlashTemplate {\n  id: string\n  nome: string\n  categoria: string\n  template: {\n    queixa_principal: string\n    exame_fisico: string\n    hipotese_diagnostica: string[]\n    conduta: string\n    cid: string\n    cid_descricao: string\n  }\n  referencias_mbe: string[]\n}\n\nexport const flashTemplates: Record<string, FlashTemplate> = {\n  ivas: {\n    id: 'ivas',\n    nome: 'IVAS / Resfriado Comum',\n    categoria: 'respiratorio',\n    template: {\n      queixa_principal:\n        'Coriza, odinofagia e tosse seca há {tempo_sintomas}. Nega febre aferida. Nega dispneia. Nega dor torácica.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Orofaringe com hiperemia leve, sem exsudato ou placas. Murmúrio vesicular presente bilateral, sem ruídos adventícios.',\n      hipotese_diagnostica: [\n        'Infecção de vias aéreas superiores de provável etiologia viral',\n        'Rinofaringite aguda',\n        'Síndrome gripal',\n      ],\n      conduta:\n        'Prescrito sintomáticos (analgésico e antitérmico). {gender_orientado} quanto à hidratação oral abundante e repouso relativo. {gender_orientado} quanto aos sinais de alarme: febre persistente por mais de 72 horas, dispneia, dor torácica, piora do estado geral. {gender_orientado} a retornar ao pronto atendimento se persistência ou piora dos sintomas. {gender_orientado} a buscar acompanhamento com {gender_medico} assistente para seguimento ambulatorial.',\n      cid: 'J069',\n      cid_descricao: 'Infecção aguda das vias aéreas superiores não especificada',\n    },\n    referencias_mbe: [\n      'NICE Guidelines CG69',\n      'BMJ Best Practice - Common Cold',\n      'UpToDate - The common cold in adults',\n    ],\n  },\n  faringoamigdalite: {\n    id: 'faringoamigdalite',\n    nome: 'Faringoamigdalite Bacteriana',\n    categoria: 'respiratorio',\n    template: {\n      queixa_principal:\n        'Odinofagia intensa há {tempo_sintomas}, febre aferida de {temperatura}°C, dificuldade para deglutição. Nega tosse. Nega dispneia. Nega trismo. Nega abaulamento em palato.',\n      exame_fisico:\n        'Regular estado geral, {gender_corado}, {gender_hidratado}, febril ao toque. Orofaringe com hiperemia intensa e exsudato purulento em tonsilas palatinas bilateralmente. Adenomegalia cervical anterior palpável, dolorosa. Ausência de abaulamento peritonsilar. Murmúrio vesicular presente bilateral, sem ruídos adventícios.',\n      hipotese_diagnostica: [\n        'Faringoamigdalite aguda bacteriana',\n        'Faringoamigdalite estreptocócica',\n        'Mononucleose infecciosa em diagnóstico diferencial',\n      ],\n      conduta:\n        'Escore de Centor-McIsaac: {centor_score} pontos. Prescrito antibioticoterapia (Amoxicilina 500mg via oral a cada 8 horas por 10 dias) e sintomáticos. {gender_orientado} quanto a repouso, hidratação oral e alimentação pastosa. {gender_orientado} quanto aos sinais de alarme: dispneia, trismo, abaulamento peritonsilar, salivação excessiva, dificuldade respiratória. {gender_orientado} a retornar ao pronto atendimento se persistência da febre após 48 a 72 horas de antibioticoterapia ou piora clínica. {gender_orientado} a buscar acompanhamento com {gender_medico} assistente ou otorrinolaringologista para seguimento.',\n      cid: 'J030',\n      cid_descricao: 'Amigdalite estreptocócica',\n    },\n    referencias_mbe: ['IDSA Guidelines', 'UpToDate - Group A streptococcal tonsillopharyngitis'],\n  },\n\n  // === RESPIRATÓRIO ===\n  sinusite: {\n    id: 'sinusite',\n    nome: 'Sinusite Aguda',\n    categoria: 'respiratorio',\n    template: {\n      queixa_principal:\n        'Dor facial, congestão nasal e secreção nasal purulenta há {tempo_sintomas}. Cefaleia frontal associada. Nega febre aferida. Nega epistaxe.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Rinoscopia anterior com hiperemia de cornetos e secreção mucopurulenta em meato médio. Dor à palpação de seios maxilares. Orofaringe sem exsudato.',\n      hipotese_diagnostica: [\n        'Rinossinusite aguda bacteriana',\n        'Rinossinusite viral',\n      ],\n      conduta:\n        'Prescrito sintomáticos (analgésico, descongestionante nasal tópico por até 5 dias). Lavagem nasal com soro fisiológico. Antibioticoterapia (Amoxicilina 500mg 8/8h por 7-10 dias) se sintomas > 10 dias ou piora após melhora inicial. {gender_orientado} quanto aos sinais de alarme: febre alta, edema periorbitário, alteração visual, cefaleia intensa. {gender_orientado} a retornar se piora ou não melhora em 7 dias.',\n      cid: 'J010',\n      cid_descricao: 'Sinusite maxilar aguda',\n    },\n    referencias_mbe: ['AAO-HNS Guidelines', 'UpToDate - Acute bacterial rhinosinusitis'],\n  },\n\n  bronquite: {\n    id: 'bronquite',\n    nome: 'Bronquite Aguda',\n    categoria: 'respiratorio',\n    template: {\n      queixa_principal:\n        'Tosse produtiva há {tempo_sintomas}, com expectoração amarelada. Desconforto retroesternal associado à tosse. Nega febre aferida. Nega dispneia em repouso. Nega dor torácica.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Ausculta pulmonar com murmúrio vesicular presente bilateral, roncos esparsos difusos, sem sibilos. Frequência respiratória normal. SpO2 {spo2}% em ar ambiente.',\n      hipotese_diagnostica: [\n        'Bronquite aguda',\n        'Traqueobronquite viral',\n      ],\n      conduta:\n        'Prescrito sintomáticos (analgésico, antitussígeno se tosse muito incômoda). Mel pode ser utilizado para alívio da tosse. Hidratação oral abundante. Antibiótico NÃO indicado de rotina (etiologia predominantemente viral). {gender_orientado} quanto aos sinais de alarme: febre > 38.5°C, dispneia, hemoptise, piora progressiva. {gender_orientado} a retornar se não melhora em 2-3 semanas.',\n      cid: 'J209',\n      cid_descricao: 'Bronquite aguda não especificada',\n    },\n    referencias_mbe: ['NICE Guidelines CG69', 'Cochrane - Antibiotics for acute bronchitis'],\n  },\n\n  // === ORL ===\n  otite_media: {\n    id: 'otite_media',\n    nome: 'Otite Média Aguda',\n    categoria: 'orl',\n    template: {\n      queixa_principal:\n        'Otalgia intensa à {lado} há {tempo_sintomas}, febre aferida de {temperatura}°C. Sensação de ouvido tampado. Nega otorreia. Nega hipoacusia prévia.',\n      exame_fisico:\n        'Regular estado geral, {gender_corado}, {gender_hidratado}, febril ao toque. Otoscopia {lado}: membrana timpânica hiperemiada, abaulada, com perda do cone luminoso. Conduto auditivo externo sem secreção. Otoscopia contralateral normal.',\n      hipotese_diagnostica: [\n        'Otite média aguda',\n        'Otite média aguda supurativa',\n      ],\n      conduta:\n        'Prescrito antibioticoterapia (Amoxicilina 500mg 8/8h por 7 dias) e analgesia (Dipirona ou Paracetamol). Em casos leves, observação por 48-72h pode ser alternativa. {gender_orientado} quanto aos sinais de alarme: otorreia, persistência da febre após 48-72h, piora da dor, sintomas neurológicos. {gender_orientado} a retornar se não melhora.',\n      cid: 'H660',\n      cid_descricao: 'Otite média aguda supurativa',\n    },\n    referencias_mbe: ['AAP/AAFP Guidelines OMA', 'UpToDate - Acute otitis media'],\n  },\n\n  otite_externa: {\n    id: 'otite_externa',\n    nome: 'Otite Externa',\n    categoria: 'orl',\n    template: {\n      queixa_principal:\n        'Otalgia à {lado} há {tempo_sintomas}, piora à manipulação do pavilhão auricular. Prurido auricular associado. Nega febre. Nega hipoacusia significativa.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Pavilhão auricular sem alterações. Dor intensa à tração do tragus e da hélix. Otoscopia: conduto auditivo externo edemaciado, hiperemiado, com secreção serosa. Membrana timpânica visível e íntegra.',\n      hipotese_diagnostica: [\n        'Otite externa aguda difusa',\n        'Orelha de nadador',\n      ],\n      conduta:\n        'Prescrito gotas otológicas com antibiótico e corticoide (Ciprofloxacino + Dexametasona 3 gotas 8/8h por 7 dias). Manter ouvido seco (evitar entrada de água). Analgesia oral. Evitar manipulação do conduto. {gender_orientado} a retornar se piora, febre ou não melhora em 5-7 dias.',\n      cid: 'H601',\n      cid_descricao: 'Otite externa aguda',\n    },\n    referencias_mbe: ['AAO-HNS Guidelines', 'UpToDate - External otitis'],\n  },\n\n  // === GASTROINTESTINAL ===\n  gastroenterite: {\n    id: 'gastroenterite',\n    nome: 'Gastroenterite Aguda',\n    categoria: 'gastrointestinal',\n    template: {\n      queixa_principal:\n        'Diarreia líquida há {tempo_sintomas}, cerca de {num_evacuacoes} evacuações por dia. Náuseas e vômitos associados. Dor abdominal em cólica difusa. Nega febre aferida. Nega sangue ou muco nas fezes.',\n      exame_fisico:\n        'Regular estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Abdome flácido, ruídos hidroaéreos aumentados, dor difusa leve à palpação superficial e profunda, sem sinais de peritonite. Turgor cutâneo preservado.',\n      hipotese_diagnostica: [\n        'Gastroenterite aguda viral',\n        'Síndrome diarreica aguda',\n        'Toxinfecção alimentar',\n      ],\n      conduta:\n        'Prescrito hidratação oral com soro de reidratação oral (SRO). Dieta leve, evitar laticínios e alimentos gordurosos temporariamente. Sintomáticos (antiemético se náuseas intensas, analgésico). Probióticos podem ser considerados. Antibióticos NÃO indicados de rotina. {gender_orientado} quanto aos sinais de alarme: desidratação (boca seca, oligúria), sangue nas fezes, febre alta persistente, prostração. {gender_orientado} a retornar se piora.',\n      cid: 'A09',\n      cid_descricao: 'Diarreia e gastroenterite de origem infecciosa presumível',\n    },\n    referencias_mbe: ['WHO Diarrhoea Guidelines', 'ESPGHAN/ESPID Guidelines'],\n  },\n\n  dispepsia: {\n    id: 'dispepsia',\n    nome: 'Dispepsia / Dor Epigástrica',\n    categoria: 'gastrointestinal',\n    template: {\n      queixa_principal:\n        'Dor epigástrica em queimação há {tempo_sintomas}, piora pós-prandial. Plenitude pós-prandial e empachamento. Pirose ocasional. Nega vômitos. Nega melena ou hematêmese. Nega perda ponderal.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Abdome flácido, ruídos hidroaéreos presentes e normoativos, dor à palpação profunda em epigástrio, sem sinais de peritonite. Murphy negativo. Blumberg negativo.',\n      hipotese_diagnostica: [\n        'Dispepsia funcional',\n        'Síndrome dispéptica',\n        'Gastrite',\n      ],\n      conduta:\n        'Prescrito inibidor de bomba de prótons (Omeprazol 20mg em jejum por 4-8 semanas). Orientações dietéticas: evitar café, álcool, alimentos gordurosos e condimentados, fracionar refeições. {gender_orientado} quanto aos sinais de alarme: idade > 55 anos com sintomas novos, perda de peso inexplicada, disfagia, sangramento digestivo, vômitos persistentes. Se sinais de alarme, encaminhar para endoscopia digestiva alta. {gender_orientado} a buscar seguimento ambulatorial.',\n      cid: 'K30',\n      cid_descricao: 'Dispepsia funcional',\n    },\n    referencias_mbe: ['ACG Guidelines Dyspepsia', 'NICE Dyspepsia Guidelines'],\n  },\n\n  // === UROLÓGICO ===\n  cistite: {\n    id: 'cistite',\n    nome: 'ITU Baixa (Cistite)',\n    categoria: 'urologico',\n    template: {\n      queixa_principal:\n        'Disúria, polaciúria e urgência miccional há {tempo_sintomas}. Dor suprapúbica associada. Urina turva. Nega febre aferida. Nega dor lombar. Nega corrimento vaginal.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Abdome flácido, dor leve à palpação em hipogástrio. Punho-percussão lombar indolor bilateralmente (Giordano negativo).',\n      hipotese_diagnostica: [\n        'Cistite aguda não complicada',\n        'Infecção urinária baixa',\n      ],\n      conduta:\n        'Solicitado urina tipo I. Urocultura se disponível ou se fatores de risco. Prescrito antibioticoterapia empírica: Fosfomicina 3g dose única OU Nitrofurantoína 100mg 6/6h por 5 dias. Hidratação abundante. {gender_orientado} quanto aos sinais de alarme: febre, dor lombar, náuseas/vômitos (sugerem pielonefrite). {gender_orientado} a retornar se não melhora em 48-72h ou piora.',\n      cid: 'N300',\n      cid_descricao: 'Cistite aguda',\n    },\n    referencias_mbe: ['IDSA Guidelines UTI', 'UpToDate - Acute uncomplicated cystitis'],\n  },\n\n  colica_renal: {\n    id: 'colica_renal',\n    nome: 'Cólica Renal / Nefrolitíase',\n    categoria: 'urologico',\n    template: {\n      queixa_principal:\n        'Dor lombar à {lado} de início súbito há {tempo_sintomas}, muito intensa, em cólica, com irradiação para flanco e região inguinal ipsilateral. Náuseas e vômitos associados. Hematúria. Agitação psicomotora pela dor.',\n      exame_fisico:\n        'Regular estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque, {gender_agitado} pela dor. Punho-percussão lombar {lado} intensamente positiva (Giordano +). Abdome flácido, sem sinais de peritonite. Sem massas palpáveis.',\n      hipotese_diagnostica: [\n        'Cólica nefrética',\n        'Nefrolitíase',\n        'Urolitíase',\n      ],\n      conduta:\n        'Prescrito analgesia potente: AINE endovenoso (Cetoprofeno 100mg ou Tenoxicam 20mg) + Dipirona + Escopolamina. Hidratação endovenosa. Solicitado urina tipo I. TC de vias urinárias sem contraste (padrão-ouro) ou USG de vias urinárias. {gender_orientado} quanto aos sinais de alarme: febre (sugere obstrução infectada - urgência urológica), anúria, piora da dor. Se febre ou sinais de obstrução complicada, considerar internação e avaliação urológica de urgência.',\n      cid: 'N200',\n      cid_descricao: 'Cálculo do rim',\n    },\n    referencias_mbe: ['EAU Guidelines Urolithiasis', 'AUA Guidelines Surgical Management of Stones'],\n  },\n\n  // === NEUROLÓGICO ===\n  cefaleia_tensional: {\n    id: 'cefaleia_tensional',\n    nome: 'Cefaleia Tensional',\n    categoria: 'neurologico',\n    template: {\n      queixa_principal:\n        'Cefaleia holocraniana em pressão/aperto há {tempo_sintomas}, intensidade leve a moderada. Sem náuseas ou vômitos. Sem fotofobia ou fonofobia significativas. Não piora com atividade física. Nega febre.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Exame neurológico sumário sem alterações: pupilas isocóricas e fotorreagentes, força e sensibilidade preservadas nos 4 membros, marcha normal, coordenação preservada. Rigidez de nuca ausente.',\n      hipotese_diagnostica: [\n        'Cefaleia do tipo tensional',\n        'Cefaleia primária',\n      ],\n      conduta:\n        'Prescrito analgésico simples (Paracetamol 750mg ou Dipirona 1g). Orientações: redução do estresse, higiene do sono adequada, alongamentos cervicais, pausas durante trabalho. Se crises frequentes (>15 dias/mês), encaminhar para profilaxia ambulatorial com neurologista. {gender_orientado} quanto aos sinais de alarme: cefaleia em trovoada (pior dor da vida), déficit neurológico, febre, rigidez de nuca, alteração do nível de consciência. {gender_orientado} a retornar se mudança do padrão habitual.',\n      cid: 'G442',\n      cid_descricao: 'Cefaleia do tipo tensional episódica',\n    },\n    referencias_mbe: ['IHS Classification ICHD-3', 'BMJ Best Practice - Tension-type headache'],\n  },\n\n  vppb: {\n    id: 'vppb',\n    nome: 'Vertigem Posicional (VPPB)',\n    categoria: 'neurologico',\n    template: {\n      queixa_principal:\n        'Tontura rotatória de início súbito há {tempo_sintomas}, desencadeada por mudança de posição da cabeça (ao deitar, levantar ou virar na cama). Episódios de curta duração (segundos a 1 minuto). Náuseas associadas. Nega hipoacusia. Nega zumbido. Nega cefaleia.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Manobra de Dix-Hallpike positiva para {lado}: nistagmo rotatório/vertical com latência de alguns segundos, fatigável (diminui com repetição). Exame neurológico sem alterações focais. Marcha cautelosa, sem ataxia verdadeira. Romberg negativo.',\n      hipotese_diagnostica: [\n        'Vertigem posicional paroxística benigna (VPPB)',\n        'Canalitíase do canal semicircular posterior',\n      ],\n      conduta:\n        'Realizada manobra de reposicionamento de Epley (se VPPB de canal posterior confirmada). Prescrito sintomáticos apenas se náuseas intensas (Dimenidrinato ou Meclizina por curto período - evitar uso prolongado). {gender_orientado} a evitar movimentos bruscos da cabeça, dormir com cabeceira elevada. {gender_orientado} sobre exercícios de Brandt-Daroff domiciliares se recorrência. Encaminhar para otorrinolaringologista/neurologista se não resposta ou atipias.',\n      cid: 'H811',\n      cid_descricao: 'Vertigem paroxística benigna',\n    },\n    referencias_mbe: ['AAO-HNS BPPV Guidelines', 'UpToDate - Benign paroxysmal positional vertigo'],\n  },\n\n  enxaqueca: {\n    id: 'enxaqueca',\n    nome: 'Enxaqueca sem Aura',\n    categoria: 'neurologico',\n    template: {\n      queixa_principal:\n        'Cefaleia unilateral {lado} em pulsação/latejante há {tempo_sintomas}, intensidade moderada a forte. Náuseas e fotofobia associadas. Piora com atividade física. Refere crises semelhantes no passado. Nega aura visual ou sensitiva. Nega febre.',\n      exame_fisico:\n        'Regular estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque, buscando ambiente escuro e silencioso. Exame neurológico sumário sem alterações focais: pupilas isocóricas e fotorreagentes, força preservada, sensibilidade normal. Sem rigidez de nuca.',\n      hipotese_diagnostica: [\n        'Enxaqueca sem aura',\n        'Migrânea episódica',\n      ],\n      conduta:\n        'Prescrito analgésico/AINE (Naproxeno 550mg ou Ibuprofeno 600mg) associado a antiemético (Metoclopramida 10mg). Repouso em ambiente escuro e silencioso. Se crises frequentes (>4/mês ou incapacitantes), encaminhar para profilaxia ambulatorial com neurologista. {gender_orientado} sobre identificação e evitação de gatilhos (estresse, privação de sono, alimentos). Sinais de alarme já descartados clinicamente.',\n      cid: 'G430',\n      cid_descricao: 'Enxaqueca sem aura',\n    },\n    referencias_mbe: ['IHS ICHD-3 Criteria', 'AHS Guidelines Acute Treatment of Migraine'],\n  },\n\n  // === MUSCULOESQUELÉTICO ===\n  lombalgia: {\n    id: 'lombalgia',\n    nome: 'Lombalgia Aguda Mecânica',\n    categoria: 'musculoesqueletico',\n    template: {\n      queixa_principal:\n        'Dor lombar de início há {tempo_sintomas}, após esforço físico ou movimento brusco. Dor piora com movimento, melhora com repouso. Sem irradiação para membros inferiores. Nega parestesias. Nega perda de força. Nega alteração esfincteriana.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Marcha antálgica. Contratura de musculatura paravertebral lombar. Lasègue negativo bilateralmente. Força preservada em membros inferiores (flexão/extensão de quadril, joelho, tornozelo). Reflexos patelares e aquileus simétricos e presentes. Sensibilidade preservada. Sem sinais de síndrome da cauda equina.',\n      hipotese_diagnostica: [\n        'Lombalgia mecânica aguda',\n        'Dor lombar inespecífica',\n        'Contratura muscular lombar',\n      ],\n      conduta:\n        'Prescrito AINE (Ibuprofeno 600mg 8/8h ou Naproxeno 500mg 12/12h) por período curto (5-7 dias). Relaxante muscular se contratura importante (Ciclobenzaprina 5mg à noite). Manter atividades habituais dentro do tolerável (repouso absoluto NÃO é recomendado). Calor local. {gender_orientado} quanto aos sinais de alarme (red flags): febre, perda de peso, trauma significativo, déficit neurológico progressivo, alteração esfincteriana. Fisioterapia se persistência > 2-4 semanas.',\n      cid: 'M545',\n      cid_descricao: 'Dor lombar baixa',\n    },\n    referencias_mbe: ['ACP Low Back Pain Guidelines', 'NICE Low Back Pain Guidelines'],\n  },\n\n  cervicalgia: {\n    id: 'cervicalgia',\n    nome: 'Cervicalgia Aguda',\n    categoria: 'musculoesqueletico',\n    template: {\n      queixa_principal:\n        'Dor cervical de início há {tempo_sintomas}, com rigidez cervical. Dor piora com movimentação do pescoço. Sem irradiação para membros superiores. Nega parestesias. Nega trauma recente. Nega febre.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Contratura de musculatura paravertebral cervical e trapézio. Amplitude de movimento cervical limitada por dor, principalmente rotação e lateralização. Força preservada em membros superiores. Teste de Spurling negativo. Sem déficits neurológicos focais.',\n      hipotese_diagnostica: [\n        'Cervicalgia mecânica',\n        'Contratura muscular cervical',\n        'Dor cervical inespecífica',\n      ],\n      conduta:\n        'Prescrito AINE (Naproxeno 500mg 12/12h) e analgésico. Relaxante muscular se contratura importante. Calor local. {gender_orientado} quanto a orientações posturais e ergonomia no trabalho. Evitar travesseiro muito alto ou muito baixo. {gender_orientado} a retornar se surgir irradiação para membros superiores, parestesias, fraqueza ou persistência > 2-3 semanas.',\n      cid: 'M542',\n      cid_descricao: 'Cervicalgia',\n    },\n    referencias_mbe: ['Bone and Joint Decade Task Force on Neck Pain', 'UpToDate - Evaluation of the adult with neck pain'],\n  },\n\n  entorse_tornozelo: {\n    id: 'entorse_tornozelo',\n    nome: 'Entorse de Tornozelo',\n    categoria: 'musculoesqueletico',\n    template: {\n      queixa_principal:\n        'Torção de tornozelo {lado} há {tempo_sintomas}, com dor e edema local. Mecanismo de inversão (virada do pé para dentro). Dificuldade para apoiar o pé no chão. Nega estalido audível no momento do trauma. Nega parestesia do pé.',\n      exame_fisico:\n        '{gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Tornozelo {lado} com edema e equimose em região maleolar lateral. Dor à palpação de ligamento talofibular anterior e calcaneofibular. Teste de gaveta anterior {positivo_negativo}. Palpação óssea de maléolo lateral, maléolo medial, base do 5º metatarso e osso navicular SEM dor localizada (Regras de Ottawa negativas).',\n      hipotese_diagnostica: [\n        'Entorse de tornozelo grau {grau}',\n        'Lesão ligamentar lateral do tornozelo',\n      ],\n      conduta:\n        'Protocolo PRICE nas primeiras 48-72h: Proteção, Repouso relativo, Ice (gelo por 20 min a cada 2-3h), Compressão (bandagem elástica), Elevação do membro. Prescrito AINE e analgésico. Imobilização com tala ou órtese se instabilidade moderada. Critérios de Ottawa negativos dispensam radiografia de rotina. {gender_orientado} sobre retorno progressivo às atividades conforme tolerância. Encaminhar para fisioterapia se entorse grau II-III ou instabilidade persistente.',\n      cid: 'S934',\n      cid_descricao: 'Entorse e distensão do tornozelo',\n    },\n    referencias_mbe: ['Ottawa Ankle Rules', 'NICE Sprains and Strains Guidelines'],\n  },\n\n  // === DERMATOLÓGICO / ALÉRGICO ===\n  urticaria: {\n    id: 'urticaria',\n    nome: 'Urticária Aguda',\n    categoria: 'dermatologico',\n    template: {\n      queixa_principal:\n        'Lesões avermelhadas pruriginosas pelo corpo de início há {tempo_sintomas}. Prurido intenso. Nega dispneia. Nega edema de lábios ou língua. Nega dificuldade para engolir. Possível exposição recente a {trigger}.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Pele com placas urticariformes eritematosas, elevadas, pruriginosas, com halo central pálido, distribuídas em {localizacao}. Dermografismo presente. Sem angioedema de face, lábios, língua ou vias aéreas. Ausculta pulmonar limpa, sem sibilos ou estridor. Sinais vitais estáveis.',\n      hipotese_diagnostica: [\n        'Urticária aguda',\n        'Reação alérgica cutânea',\n        'Urticária idiopática',\n      ],\n      conduta:\n        'Prescrito anti-histamínico de segunda geração (Loratadina 10mg/dia ou Cetirizina 10mg/dia). Corticoide oral (Prednisona 40mg por 3-5 dias) se quadro extenso ou refratário. {gender_orientado} a evitar trigger identificado (se houver). {gender_orientado} quanto aos sinais de alarme que indicam anafilaxia: dispneia, edema de glote, rouquidão, hipotensão, síncope - nestes casos, procurar emergência imediatamente. {gender_orientado} a buscar seguimento com alergista se episódios recorrentes.',\n      cid: 'L500',\n      cid_descricao: 'Urticária alérgica',\n    },\n    referencias_mbe: ['EAACI Urticaria Guidelines', 'WAO Urticaria Guidelines'],\n  },\n\n  celulite: {\n    id: 'celulite',\n    nome: 'Celulite / Erisipela',\n    categoria: 'dermatologico',\n    template: {\n      queixa_principal:\n        'Vermelhidão, calor e dor em {localizacao} há {tempo_sintomas}, com progressão da área acometida. Febre aferida de {temperatura}°C. Porta de entrada identificada (ferimento, micose interdigital, picada de inseto). Nega secreção purulenta franca.',\n      exame_fisico:\n        'Regular estado geral, {gender_corado}, {gender_hidratado}, febril ao toque. Área de celulite/erisipela em {localizacao}: eritema quente, edemaciado, doloroso à palpação, com bordas mal definidas (celulite) ou bem definidas e elevadas (erisipela). Sem crepitação à palpação (descarta fasciíte necrotizante). Sem flutuação sugestiva de abscesso. Linfangite {presente_ausente}. Adenomegalia regional {presente_ausente}.',\n      hipotese_diagnostica: [\n        'Celulite',\n        'Erisipela',\n        'Infecção de pele e partes moles',\n      ],\n      conduta:\n        'Realizada demarcação da área eritematosa com caneta para monitorar progressão. Prescrito antibioticoterapia oral: Cefalexina 500mg 6/6h por 7-10 dias (celulite simples). Se suspeita de MRSA-CA ou falha terapêutica, considerar Sulfametoxazol-Trimetoprima ou Clindamicina. Elevação do membro afetado. Analgésico e AINE. {gender_orientado} quanto aos sinais de alarme: progressão rápida apesar do antibiótico, bolhas hemorrágicas, crepitação, necrose, toxemia. Internação se sinais de gravidade (sepse, progressão rápida, falha de tratamento oral, comorbidades descompensadas).',\n      cid: 'L030',\n      cid_descricao: 'Celulite',\n    },\n    referencias_mbe: ['IDSA Skin and Soft Tissue Infections Guidelines', 'UpToDate - Cellulitis and Erysipelas'],\n  },\n\n  // === OFTALMOLÓGICO ===\n  conjuntivite: {\n    id: 'conjuntivite',\n    nome: 'Conjuntivite',\n    categoria: 'oftalmologico',\n    template: {\n      queixa_principal:\n        'Olho vermelho {lado} há {tempo_sintomas}, com secreção {aquosa_purulenta}. Prurido ocular {presente_ausente}. Sensação de corpo estranho e areia nos olhos. Lacrimejamento. Nega dor ocular intensa. Nega alteração da acuidade visual. Nega fotofobia intensa.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque. Olho {lado}: hiperemia conjuntival difusa (mais intensa em fórnices), secreção {aquosa_purulenta} em fundo de saco, edema palpebral leve. Pupilas isocóricas e fotorreagentes. Acuidade visual preservada (teste de Snellen). Córnea transparente, sem opacidades ou ulcerações visíveis. Câmara anterior sem alterações aparentes.',\n      hipotese_diagnostica: [\n        'Conjuntivite viral',\n        'Conjuntivite alérgica',\n        'Conjuntivite bacteriana',\n      ],\n      conduta:\n        'Se conjuntivite viral/alérgica (secreção aquosa, prurido): compressas frias, lágrimas artificiais, anti-histamínico tópico se prurido importante. Se conjuntivite bacteriana (secreção purulenta): colírio de antibiótico (Ciprofloxacino 0.3% ou Moxifloxacino 0.5%, 1 gota 4x/dia por 5-7 dias). {gender_orientado} sobre higiene rigorosa das mãos, não compartilhar toalhas/fronhas, evitar coçar os olhos. Encaminhar para oftalmologista se: não melhora em 7 dias, dor ocular intensa, alteração visual, fotofobia, opacidade corneana.',\n      cid: 'H100',\n      cid_descricao: 'Conjuntivite mucopurulenta',\n    },\n    referencias_mbe: ['AAO Conjunctivitis PPP', 'UpToDate - Conjunctivitis'],\n  },\n\n  // === PSIQUIÁTRICO ===\n  ansiedade: {\n    id: 'ansiedade',\n    nome: 'Crise de Ansiedade / Pânico',\n    categoria: 'psiquiatrico',\n    template: {\n      queixa_principal:\n        'Episódio de mal-estar súbito há {tempo_sintomas}, com palpitações, tremores, sudorese, sensação de falta de ar, medo intenso de morrer ou perder o controle. Parestesias de extremidades. Náuseas. Refere episódios semelhantes no passado. Nega dor torácica típica (opressiva, irradiada). Nega síncope.',\n      exame_fisico:\n        'Bom estado geral, {gender_corado}, {gender_hidratado}, {gender_afebril} ao toque, {gender_ansioso}. FC {fc} bpm, PA {pa_sistolica}/{pa_diastolica} mmHg, SpO2 {spo2}% em ar ambiente. Ausculta cardíaca: ritmo cardíaco regular em 2 tempos, bulhas normofonéticas, sem sopros. Ausculta pulmonar: murmúrio vesicular presente bilateral, sem ruídos adventícios. ECG (se realizado): ritmo sinusal, sem alterações isquêmicas. Exame neurológico sumário sem alterações focais.',\n      hipotese_diagnostica: [\n        'Crise de ansiedade',\n        'Ataque de pânico',\n        'Transtorno de pânico',\n      ],\n      conduta:\n        'Oferecido suporte e reassurance em ambiente calmo. Orientada técnica de respiração diafragmática lenta. Prescrito benzodiazepínico apenas se sintomas muito intensos e refratários (Clonazepam 0.25-0.5mg sublingual ou Alprazolam 0.25-0.5mg via oral). {gender_orientado} sobre a natureza benigna dos sintomas somáticos (não representam risco cardíaco real). Causas orgânicas de palpitação e dispneia razoavelmente descartadas clinicamente. Encaminhar para psiquiatria e/ou psicologia para seguimento ambulatorial e considerar tratamento preventivo (ISRS) se episódios recorrentes.',\n      cid: 'F410',\n      cid_descricao: 'Transtorno de pânico',\n    },\n    referencias_mbe: ['APA Practice Guideline Panic Disorder', 'UpToDate - Panic disorder in adults'],\n  },\n}\n\nexport interface FlashInput {\n  paciente: {\n    sexo: 'M' | 'F'\n    idade?: string\n    unidade_idade?: 'anos' | 'meses' | 'dias'\n    gestante?: boolean\n  }\n  queixa_selecionada: string\n  dados_variaveis: {\n    tempo_sintomas: string\n    temperatura?: string\n    pa_sistolica?: string\n    pa_diastolica?: string\n    fc?: string\n    fr?: string\n    spo2?: string\n    glasgow?: string\n    centor_score?: string // Specific to faringo\n    // Novas variáveis para templates expandidos\n    lado?: 'esquerdo' | 'direito' | 'bilateral' | string\n    num_evacuacoes?: string\n    localizacao?: string\n    trigger?: string\n    grau?: '1' | '2' | '3' | string\n    positivo_negativo?: 'positivo' | 'negativo' | string\n    presente_ausente?: 'presente' | 'ausente' | string\n    aquosa_purulenta?: 'aquosa' | 'mucopurulenta' | 'purulenta' | string\n    outros?: Record<string, string>\n  }\n}\n\nexport const generateFlashRecord = (input: FlashInput) => {\n  const templateId = input.queixa_selecionada // Assuming mapped directly for now\n  const templateData = flashTemplates[templateId] || flashTemplates['ivas'] // Fallback\n\n  if (!templateData) {\n    return {\n      queixa_principal: 'Erro: Template não encontrado',\n      exame_fisico: '',\n      hipotese_diagnostica: [],\n      conduta: '',\n      cid: '',\n      cid_descricao: '',\n    }\n  }\n\n  const tmpl = templateData.template\n  const vars = input.dados_variaveis\n  // Enforce female gender if pregnant\n  const gender = input.paciente.gestante ? 'F' : input.paciente.sexo\n\n  // Gender Helper\n  const g = (m: string, f: string) => (gender === 'M' ? m : f)\n\n  // Replacer Function\n  const replace = (text: string) => {\n    let res = text\n    // Variables\n    Object.entries(vars).forEach(([key, val]) => {\n      res = res.replace(new RegExp(`{${key}}`, 'g'), (val as string) || '--')\n    })\n\n    // Gender Flexions\n    res = res.replace(/{gender_corado}/g, g('corado', 'corada'))\n    res = res.replace(/{gender_hidratado}/g, g('hidratado', 'hidratada'))\n    res = res.replace(/{gender_afebril}/g, g('afebril', 'afebril')) // Neutral\n    res = res.replace(/{gender_orientado}/g, g('Orientado', 'Orientada'))\n    res = res.replace(/{gender_medico}/g, g('médico', 'médica'))\n    // Novas flexões de gênero para templates expandidos\n    res = res.replace(/{gender_agitado}/g, g('agitado', 'agitada'))\n    res = res.replace(/{gender_ansioso}/g, g('ansioso', 'ansiosa'))\n\n    // Manual handling for complex gender tokens like {g:o/a} from prompt\n    // The prompt used {g:o/a}. I'll normalize my template to use my keys or support that syntax.\n    // Let's support the prompt's syntax: {g:o/a}\n    res = res.replace(/{g:([^}]+)}/g, (match, content) => {\n      const [m, f] = content.split('/')\n      return g(m, f || m) // if f is missing, use m? usually it's o/a\n    })\n\n    return res\n  }\n\n  return {\n    queixa_principal: replace(tmpl.queixa_principal),\n    exame_fisico: replace(tmpl.exame_fisico),\n    hipotese_diagnostica: tmpl.hipotese_diagnostica,\n    conduta: replace(tmpl.conduta),\n    cid: tmpl.cid,\n    cid_descricao: tmpl.cid_descricao,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/newComplaints.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'timestamp' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * New Complaints - 50+ novas queixas para o WellWave\n * Organizadas por grupo médico\n */\n\nimport type { Complaint } from '@/lib/types/medical'\nimport { newComplaintsPart2 } from './newComplaintsPart2'\n\nconst timestamp = new Date().toISOString()\n\n// ============================================\n// CV - CARDIOVASCULAR (+5)\n// ============================================\nconst cvComplaints: Complaint[] = [\n  {\n    id: 'CV_HYPERTENSIVE_CRISIS',\n    group: 'CV',\n    title: 'Crise hipertensiva',\n    subtitle: 'Pressão muito alta com ou sem sintomas',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['pressão alta', 'emergência hipertensiva'],\n    searchTerms: ['crise hipertensiva', 'pressão muito alta', 'emergência hipertensiva', 'urgência hipertensiva'],\n    synonyms: ['emergência hipertensiva', 'urgência hipertensiva', 'pico de pressão'],\n    relatedSymptoms: ['Cefaleia', 'Náuseas', 'Alteração visual', 'Dor torácica'],\n    bodySystem: ['cardiovascular'],\n    severity: 5,\n    icd10Codes: ['I16.0', 'I16.1'],\n    extendedContent: {\n      redFlags: ['PA > 180x120 mmHg com LOA', 'Cefaleia intensa', 'Alteração visual', 'Dor torácica', 'Dispneia', 'Déficit neurológico', 'Epistaxe volumosa'],\n      diagnosticoDiferencial: ['Emergência hipertensiva', 'Urgência hipertensiva', 'Hipertensão secundária', 'Feocromocitoma'],\n      condutaInicial: '1. Monitorização contínua\\n2. Classificar: emergência vs urgência\\n3. Emergência: reduzir 20-25% em 1h (nitroprussiato/nitroglicerina IV)\\n4. Urgência: reduzir gradual em 24-48h (captopril VO)',\n      calculadoras: ['Classificação de emergência vs urgência'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'CV_ACUTE_LIMB_ISCHEMIA',\n    group: 'CV',\n    title: 'Isquemia aguda de membro',\n    subtitle: 'Membro frio, pálido, sem pulso',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['perna fria', 'sem pulso'],\n    searchTerms: ['isquemia de membro', 'perna fria', 'sem pulso', 'membro isquêmico'],\n    synonyms: ['oclusão arterial aguda', 'trombose arterial', 'embolia arterial'],\n    relatedSymptoms: ['Dor intensa', 'Palidez', 'Frialdade', 'Paralisia', 'Parestesia'],\n    bodySystem: ['cardiovascular'],\n    severity: 5,\n    icd10Codes: ['I74.3', 'I74.4'],\n    extendedContent: {\n      redFlags: ['6 Ps: Pain, Pallor, Pulselessness, Paresthesia, Paralysis, Poikilothermia', 'Membro frio e pálido', 'Ausência de pulsos distais', 'Déficit motor/sensitivo'],\n      diagnosticoDiferencial: ['Embolia arterial', 'Trombose arterial', 'Dissecção aórtica', 'Síndrome compartimental'],\n      condutaInicial: '1. Heparinização imediata\\n2. Analgesia\\n3. Membro em posição neutra\\n4. Cirurgia vascular URGENTE\\n5. Janela: 6 horas para revascularização',\n      calculadoras: ['Classificação de Rutherford'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'CV_AORTIC_DISSECTION',\n    group: 'CV',\n    title: 'Dissecção de aorta',\n    subtitle: 'Dor torácica rasgante irradiando para dorso',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['dor rasgante', 'irradiação dorso'],\n    searchTerms: ['dissecção aórtica', 'dor rasgante', 'aneurisma dissecante'],\n    synonyms: ['aneurisma dissecante', 'dissecção aórtica aguda'],\n    relatedSymptoms: ['Dor torácica intensa', 'Irradiação para dorso', 'Assimetria de pulsos', 'Síncope'],\n    bodySystem: ['cardiovascular'],\n    severity: 5,\n    icd10Codes: ['I71.0'],\n    extendedContent: {\n      redFlags: ['Dor torácica de início súbito, máxima intensidade desde o início', 'Irradiação para dorso', 'Assimetria de PA entre membros', 'Déficit de pulso', 'Síncope'],\n      diagnosticoDiferencial: ['IAM', 'TEP', 'Pneumotórax', 'Pericardite', 'Ruptura esofágica'],\n      condutaInicial: '1. FC < 60 e PAS 100-120\\n2. Betabloqueador IV (esmolol/labetalol)\\n3. Analgesia com opioide\\n4. AngioTC de aorta URGENTE\\n5. Cirurgia cardíaca se tipo A',\n      calculadoras: ['ADD-RS Score', 'Classificação de Stanford'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'CV_HEART_FAILURE_ACUTE',\n    group: 'CV',\n    title: 'Insuficiência cardíaca descompensada',\n    subtitle: 'Falta de ar, inchaço nas pernas, cansaço',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['falta de ar', 'edema', 'ortopneia'],\n    searchTerms: ['insuficiência cardíaca', 'ic descompensada', 'edema agudo de pulmão'],\n    synonyms: ['IC descompensada', 'EAP', 'congestão pulmonar'],\n    relatedSymptoms: ['Dispneia', 'Ortopneia', 'DPN', 'Edema de MMII', 'Fadiga'],\n    bodySystem: ['cardiovascular'],\n    severity: 5,\n    icd10Codes: ['I50.1', 'I50.9'],\n    extendedContent: {\n      redFlags: ['SpO2 < 90%', 'Uso de musculatura acessória', 'Hipotensão', 'Alteração de consciência', 'Choque cardiogênico'],\n      diagnosticoDiferencial: ['IC sistólica', 'IC diastólica', 'Síndrome coronariana', 'TEP', 'Pneumonia'],\n      condutaInicial: '1. Sentar paciente (diminui retorno venoso)\\n2. O2 se SpO2 < 92%\\n3. VNI se desconforto respiratório\\n4. Furosemida IV\\n5. Nitrato SL/IV se PA > 100\\n6. Morfina se ansiedade intensa',\n      calculadoras: ['Perfil hemodinâmico (Stevenson)', 'BNP/NT-proBNP'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'CV_BRADYCARDIA',\n    group: 'CV',\n    title: 'Bradicardia sintomática',\n    subtitle: 'Coração lento com tontura ou desmaio',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'medium',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['coração lento', 'tontura'],\n    searchTerms: ['bradicardia', 'coração lento', 'fc baixa'],\n    synonyms: ['frequência cardíaca baixa', 'bloqueio cardíaco'],\n    relatedSymptoms: ['Tontura', 'Síncope', 'Fadiga', 'Dispneia'],\n    bodySystem: ['cardiovascular'],\n    severity: 3,\n    icd10Codes: ['R00.1', 'I44.2'],\n    extendedContent: {\n      redFlags: ['FC < 40 bpm', 'Hipotensão', 'Síncope', 'Sinais de baixo débito', 'BAV de alto grau'],\n      diagnosticoDiferencial: ['BAV', 'Doença do nó sinusal', 'Hipotireoidismo', 'Intoxicação por betabloqueador/digital'],\n      condutaInicial: '1. ECG 12 derivações\\n2. Atropina 0,5mg IV (até 3mg)\\n3. Marcapasso transcutâneo se refratário\\n4. Adrenalina/Dopamina se hipotensão\\n5. Avaliar causa reversível',\n      calculadoras: [],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  }\n]\n\n// ============================================\n// RC - RESPIRATÓRIO (+5)\n// ============================================\nconst rcComplaints: Complaint[] = [\n  {\n    id: 'RC_ASTHMA_ATTACK',\n    group: 'RC',\n    title: 'Crise de asma',\n    subtitle: 'Chiado no peito, falta de ar, tosse',\n    ageTargets: ['adult', 'child'],\n    riskLevel: 'medium',\n    isTopForAdult: true,\n    isTopForChild: true,\n    isFastTrack: false,\n    chips: ['chiado', 'broncoespasmo'],\n    searchTerms: ['crise de asma', 'broncoespasmo', 'chiado no peito'],\n    synonyms: ['exacerbação de asma', 'broncoespasmo agudo'],\n    relatedSymptoms: ['Dispneia', 'Sibilância', 'Tosse', 'Aperto no peito'],\n    bodySystem: ['respiratorio'],\n    severity: 3,\n    icd10Codes: ['J45.9', 'J46'],\n    extendedContent: {\n      redFlags: ['Fala entrecortada', 'SpO2 < 92%', 'Silêncio auscultatório', 'Alteração de consciência', 'Cianose', 'Peak flow < 50%'],\n      diagnosticoDiferencial: ['Asma', 'DPOC exacerbado', 'Bronquite', 'Pneumonia', 'IC', 'Anafilaxia'],\n      condutaInicial: '1. O2 para SpO2 > 94%\\n2. Beta-2 inalatório (salbutamol 4-8 puffs ou NBZ)\\n3. Corticoide sistêmico (prednisona 40-60mg ou hidrocortisona IV)\\n4. Brometo de ipratrópio se grave\\n5. Sulfato de magnésio IV se refratário',\n      calculadoras: ['Peak Flow', 'Classificação de gravidade da crise'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'RC_COPD_EXACERBATION',\n    group: 'RC',\n    title: 'DPOC exacerbado',\n    subtitle: 'Piora da falta de ar e catarro em paciente com DPOC',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['dpoc', 'bronquite crônica'],\n    searchTerms: ['dpoc exacerbado', 'enfisema', 'bronquite crônica'],\n    synonyms: ['exacerbação de DPOC', 'descompensação de DPOC'],\n    relatedSymptoms: ['Dispneia', 'Aumento do escarro', 'Escarro purulento', 'Sibilos'],\n    bodySystem: ['respiratorio'],\n    severity: 4,\n    icd10Codes: ['J44.1'],\n    extendedContent: {\n      redFlags: ['SpO2 < 88%', 'Acidose respiratória', 'Alteração de consciência', 'Exaustão', 'Tórax silencioso'],\n      diagnosticoDiferencial: ['Infecção respiratória', 'Pneumonia', 'TEP', 'Pneumotórax', 'IC'],\n      condutaInicial: '1. O2 controlado (alvo SpO2 88-92%)\\n2. Beta-2 + anticolinérgico inalatório\\n3. Corticoide sistêmico\\n4. Antibiótico se escarro purulento\\n5. VNI se acidose/hipercapnia',\n      calculadoras: ['GOLD', 'Critérios de Anthonisen'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'RC_PNEUMONIA',\n    group: 'RC',\n    title: 'Pneumonia',\n    subtitle: 'Febre, tosse com catarro, falta de ar',\n    ageTargets: ['adult', 'child', 'elderly'],\n    riskLevel: 'medium',\n    isTopForAdult: true,\n    isTopForChild: true,\n    isFastTrack: false,\n    chips: ['infecção pulmonar', 'febre'],\n    searchTerms: ['pneumonia', 'infecção pulmonar', 'pulmonia'],\n    synonyms: ['infecção pulmonar', 'pulmonia'],\n    relatedSymptoms: ['Febre', 'Tosse produtiva', 'Dispneia', 'Dor pleurítica'],\n    bodySystem: ['respiratorio'],\n    severity: 3,\n    icd10Codes: ['J18.9', 'J15.9'],\n    extendedContent: {\n      redFlags: ['SpO2 < 92%', 'PA < 90x60', 'Confusão mental', 'FR > 30', 'Ureia > 50'],\n      diagnosticoDiferencial: ['PAC', 'PAH', 'Bronquite', 'TB', 'Neoplasia'],\n      condutaInicial: '1. Estratificar gravidade (CURB-65 ou PSI)\\n2. O2 se SpO2 < 92%\\n3. Hidratação\\n4. Antibioticoterapia empírica\\n5. Analgesia/antitérmico',\n      calculadoras: ['CURB-65', 'PSI/PORT'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'RC_PNEUMOTHORAX',\n    group: 'RC',\n    title: 'Pneumotórax',\n    subtitle: 'Dor súbita no peito com falta de ar',\n    ageTargets: ['adult'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['colapso pulmonar'],\n    searchTerms: ['pneumotórax', 'ar no pulmão', 'colapso pulmonar'],\n    synonyms: ['colapso pulmonar', 'ar no tórax'],\n    relatedSymptoms: ['Dor torácica súbita', 'Dispneia', 'Diminuição MV unilateral'],\n    bodySystem: ['respiratorio'],\n    severity: 5,\n    icd10Codes: ['J93.0', 'J93.1'],\n    extendedContent: {\n      redFlags: ['Pneumotórax hipertensivo', 'Hipotensão', 'Desvio de traqueia', 'Turgência jugular', 'Ausência de MV'],\n      diagnosticoDiferencial: ['Pneumotórax espontâneo', 'Pneumotórax traumático', 'TEP', 'Pericardite'],\n      condutaInicial: '1. O2 100%\\n2. Se hipertensivo: descompressão imediata (2º EIC linha hemiclavicular)\\n3. RX de tórax\\n4. Drenagem torácica se > 2cm ou sintomático\\n5. Observação se pequeno e estável',\n      calculadoras: [],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'RC_HEMOPTYSIS',\n    group: 'RC',\n    title: 'Hemoptise',\n    subtitle: 'Tosse com sangue vivo',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['sangue na tosse', 'tosse com sangue'],\n    searchTerms: ['hemoptise', 'tosse com sangue', 'sangue na tosse'],\n    synonyms: ['sangue no escarro', 'expectoração sanguinolenta'],\n    relatedSymptoms: ['Tosse', 'Dispneia', 'Dor torácica'],\n    bodySystem: ['respiratorio'],\n    severity: 4,\n    icd10Codes: ['R04.2'],\n    extendedContent: {\n      redFlags: ['Hemoptise maciça (> 100-200ml/24h)', 'Instabilidade hemodinâmica', 'Insuficiência respiratória', 'Hemoptise recorrente'],\n      diagnosticoDiferencial: ['Bronquite', 'Pneumonia', 'TB', 'Neoplasia pulmonar', 'TEP', 'Bronquiectasias'],\n      condutaInicial: '1. Garantir via aérea\\n2. O2 suplementar\\n3. Acesso venoso\\n4. RX de tórax\\n5. TC de tórax se indicado\\n6. Broncoscopia se maciça',\n      calculadoras: [],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  }\n]\n\n// ============================================\n// NC - NEUROLÓGICO (+5)\n// ============================================\nconst ncComplaints: Complaint[] = [\n  {\n    id: 'NC_HEADACHE_THUNDERCLAP',\n    group: 'NC',\n    title: 'Cefaleia em trovoada',\n    subtitle: 'Pior dor de cabeça da vida de início súbito',\n    ageTargets: ['adult'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['pior cefaleia da vida', 'cefaleia súbita'],\n    searchTerms: ['cefaleia em trovoada', 'pior dor de cabeça da vida', 'cefaleia súbita'],\n    synonyms: ['thunderclap headache', 'cefaleia explosiva'],\n    relatedSymptoms: ['Náuseas', 'Vômitos', 'Rigidez de nuca', 'Fotofobia'],\n    bodySystem: ['neurologico'],\n    severity: 5,\n    icd10Codes: ['G44.8', 'I60.9'],\n    extendedContent: {\n      redFlags: ['Início explosivo (máximo em segundos)', 'Rigidez de nuca', 'Déficit neurológico', 'Alteração de consciência', 'Febre'],\n      diagnosticoDiferencial: ['HSA', 'Dissecção arterial', 'Trombose venosa cerebral', 'Apoplexia hipofisária', 'Enxaqueca'],\n      condutaInicial: '1. TC de crânio sem contraste URGENTE\\n2. Se TC normal: punção lombar\\n3. AngioTC/AngioRM se suspeita de aneurisma\\n4. Analgesia\\n5. Neurocirurgia se HSA confirmada',\n      calculadoras: ['Ottawa SAH Rule'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'NC_MIGRAINE',\n    group: 'NC',\n    title: 'Enxaqueca',\n    subtitle: 'Dor de cabeça pulsátil com náuseas e fotofobia',\n    ageTargets: ['adult', 'teen'],\n    riskLevel: 'low',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: true,\n    chips: ['enxaqueca', 'migrânea'],\n    searchTerms: ['enxaqueca', 'migrânea', 'dor de cabeça forte'],\n    synonyms: ['migrânea', 'hemicrania'],\n    relatedSymptoms: ['Dor pulsátil', 'Náuseas', 'Fotofobia', 'Fonofobia', 'Aura'],\n    bodySystem: ['neurologico'],\n    severity: 2,\n    icd10Codes: ['G43.9', 'G43.0'],\n    extendedContent: {\n      redFlags: ['Primeiro episódio > 50 anos', 'Mudança de padrão', 'Déficit neurológico', 'Febre', 'Rigidez de nuca', 'HIV/Imunossupressão'],\n      diagnosticoDiferencial: ['Enxaqueca com aura', 'Enxaqueca sem aura', 'Cefaleia tensional', 'Cefaleia em salvas', 'HSA'],\n      condutaInicial: '1. Ambiente escuro e silencioso\\n2. AINE (cetoprofeno, naproxeno)\\n3. Triptano se não responder\\n4. Metoclopramida para náuseas\\n5. Hidratação venosa se vômitos',\n      calculadoras: [],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'NC_MENINGITIS',\n    group: 'NC',\n    title: 'Suspeita de meningite',\n    subtitle: 'Febre, rigidez de nuca, alteração de consciência',\n    ageTargets: ['adult', 'child'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: true,\n    isFastTrack: false,\n    chips: ['meningite', 'infecção cerebral'],\n    searchTerms: ['meningite', 'rigidez de nuca', 'infecção do SNC'],\n    synonyms: ['meningoencefalite', 'infecção meníngea'],\n    relatedSymptoms: ['Febre', 'Cefaleia', 'Rigidez de nuca', 'Fotofobia', 'Confusão'],\n    bodySystem: ['neurologico', 'infeccioso'],\n    severity: 5,\n    icd10Codes: ['G03.9', 'G00.9'],\n    extendedContent: {\n      redFlags: ['Tríade: febre + rigidez de nuca + alteração de consciência', 'Petéquias/púrpura', 'Convulsão', 'Déficit focal', 'Papiledema'],\n      diagnosticoDiferencial: ['Meningite bacteriana', 'Meningite viral', 'Encefalite', 'HSA', 'Abscesso cerebral'],\n      condutaInicial: '1. Não atrasar ATB se suspeita alta\\n2. Hemoculturas\\n3. TC de crânio antes da PL se: déficit focal, papiledema, convulsão, imunossupressão\\n4. Punção lombar\\n5. Ceftriaxone + Dexametasona empiricamente',\n      calculadoras: [],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'NC_VERTIGO',\n    group: 'NC',\n    title: 'Tontura rotatória',\n    subtitle: 'Sensação de que tudo está girando',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'medium',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: true,\n    chips: ['vertigem', 'labirintite'],\n    searchTerms: ['vertigem', 'tontura rotatória', 'labirintite'],\n    synonyms: ['vertigem', 'labirintite', 'síndrome vestibular'],\n    relatedSymptoms: ['Náuseas', 'Vômitos', 'Nistagmo', 'Desequilíbrio'],\n    bodySystem: ['neurologico'],\n    severity: 2,\n    icd10Codes: ['R42', 'H81.1'],\n    extendedContent: {\n      redFlags: ['HINTS central (nistagmo vertical/direção variável, skew deviation, HIT normal)', 'Déficit neurológico', 'Cefaleia intensa', 'Fatores de risco para AVC'],\n      diagnosticoDiferencial: ['VPPB', 'Neurite vestibular', 'Doença de Ménière', 'AVC cerebelar', 'Enxaqueca vestibular'],\n      condutaInicial: '1. Teste HINTS se disponível\\n2. Diferenciar central vs periférica\\n3. Antivertiginosos (dimenidrinato, meclizina)\\n4. Hidratação se vômitos\\n5. TC/RNM se suspeita central\\n6. Manobra de Epley se VPPB',\n      calculadoras: ['HINTS exam', 'Dix-Hallpike'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'NC_ALTERED_MENTAL_STATUS',\n    group: 'NC',\n    title: 'Alteração do nível de consciência',\n    subtitle: 'Confusão, sonolência ou agitação',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['confusão mental', 'rebaixamento'],\n    searchTerms: ['alteração de consciência', 'confusão mental', 'rebaixamento'],\n    synonyms: ['encefalopatia', 'delirium', 'RNC'],\n    relatedSymptoms: ['Confusão', 'Sonolência', 'Agitação', 'Desorientação'],\n    bodySystem: ['neurologico'],\n    severity: 5,\n    icd10Codes: ['R41.0', 'F05.9'],\n    extendedContent: {\n      redFlags: ['Glasgow < 9', 'Déficit focal', 'Febre', 'Trauma', 'Convulsão', 'Sinais meníngeos'],\n      diagnosticoDiferencial: ['Hipoglicemia', 'AVC', 'Infecção/Sepse', 'Intoxicação', 'Encefalopatia metabólica', 'Status epiléptico não convulsivo'],\n      condutaInicial: '1. Glicemia capilar IMEDIATA\\n2. ABC + O2\\n3. Tiamina se suspeita de etilismo\\n4. Naloxone se suspeita de opioide\\n5. Flumazenil se suspeita de BZD\\n6. TC de crânio\\n7. Exames laboratoriais amplos',\n      calculadoras: ['Glasgow Coma Scale'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  }\n]\n\n// ============================================\n// GI - GASTROINTESTINAL (+6)\n// ============================================\nconst giComplaints: Complaint[] = [\n  {\n    id: 'GI_APPENDICITIS',\n    group: 'GI',\n    title: 'Suspeita de apendicite',\n    subtitle: 'Dor que começa no umbigo e vai para FID',\n    ageTargets: ['adult', 'child'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: true,\n    isFastTrack: false,\n    chips: ['apendicite', 'dor FID'],\n    searchTerms: ['apendicite', 'dor fossa ilíaca direita', 'dor FID'],\n    synonyms: ['apendicite aguda'],\n    relatedSymptoms: ['Dor periumbilical', 'Migração para FID', 'Náuseas', 'Febre', 'Anorexia'],\n    bodySystem: ['gastrointestinal'],\n    severity: 4,\n    icd10Codes: ['K35.9', 'K35.8'],\n    extendedContent: {\n      redFlags: ['Peritonite difusa', 'Febre alta', 'Taquicardia', 'Hipotensão', 'Massa palpável'],\n      diagnosticoDiferencial: ['Apendicite', 'Gastroenterite', 'ITU', 'Gravidez ectópica', 'Torção ovariana', 'Diverticulite de Meckel'],\n      condutaInicial: '1. Jejum\\n2. Hidratação venosa\\n3. Analgesia\\n4. Hemograma, PCR\\n5. USG/TC de abdome\\n6. Cirurgia URGENTE se confirmado\\n7. Antibioticoprofilaxia',\n      calculadoras: ['Alvarado Score', 'AIR Score'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'GI_CHOLECYSTITIS',\n    group: 'GI',\n    title: 'Colecistite aguda',\n    subtitle: 'Dor no lado direito da barriga após alimentação gordurosa',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'medium',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['vesícula', 'pedra na vesícula'],\n    searchTerms: ['colecistite', 'vesícula inflamada', 'pedra na vesícula'],\n    synonyms: ['vesícula inflamada', 'cólica biliar'],\n    relatedSymptoms: ['Dor em HCD', 'Murphy positivo', 'Náuseas', 'Vômitos', 'Febre'],\n    bodySystem: ['gastrointestinal'],\n    severity: 3,\n    icd10Codes: ['K81.0', 'K80.0'],\n    extendedContent: {\n      redFlags: ['Febre alta', 'Icterícia', 'Peritonite', 'Sepse', 'Colangite (tríade de Charcot)'],\n      diagnosticoDiferencial: ['Colecistite', 'Coledocolitíase', 'Colangite', 'Hepatite', 'Pancreatite', 'Úlcera perfurada'],\n      condutaInicial: '1. Jejum\\n2. Hidratação venosa\\n3. Analgesia (AINE ou opioide)\\n4. Antiespasmódico\\n5. USG de abdome\\n6. Antibiótico se complicada\\n7. Colecistectomia precoce (< 72h)',\n      calculadoras: ['Tokyo Guidelines (TG18)'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'GI_PANCREATITIS',\n    group: 'GI',\n    title: 'Pancreatite aguda',\n    subtitle: 'Dor abdominal em faixa irradiando para dorso',\n    ageTargets: ['adult'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['pâncreas', 'dor em faixa'],\n    searchTerms: ['pancreatite', 'dor em faixa', 'pâncreas inflamado'],\n    synonyms: ['inflamação do pâncreas'],\n    relatedSymptoms: ['Dor epigástrica', 'Irradiação dorsal', 'Náuseas', 'Vômitos', 'Distensão'],\n    bodySystem: ['gastrointestinal'],\n    severity: 4,\n    icd10Codes: ['K85.9'],\n    extendedContent: {\n      redFlags: ['Taquicardia', 'Hipotensão', 'Oligúria', 'Confusão', 'SpO2 baixa', 'SIRS'],\n      diagnosticoDiferencial: ['Pancreatite biliar', 'Pancreatite alcoólica', 'Úlcera perfurada', 'IAM inferior', 'Dissecção aórtica'],\n      condutaInicial: '1. Jejum\\n2. Hidratação agressiva (250-500ml/h)\\n3. Analgesia (opioide)\\n4. Amilase/lipase\\n5. USG para etiologia biliar\\n6. TC se dúvida ou má evolução\\n7. Suporte em UTI se grave',\n      calculadoras: ['BISAP', 'Ranson', 'APACHE II', 'Marshall Score'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'GI_GI_BLEEDING',\n    group: 'GI',\n    title: 'Sangramento digestivo',\n    subtitle: 'Vômito com sangue ou fezes escuras/com sangue',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['hematêmese', 'melena'],\n    searchTerms: ['sangramento digestivo', 'hematêmese', 'melena', 'enterorragia'],\n    synonyms: ['hemorragia digestiva', 'HDA', 'HDB'],\n    relatedSymptoms: ['Hematêmese', 'Melena', 'Enterorragia', 'Fraqueza', 'Síncope'],\n    bodySystem: ['gastrointestinal'],\n    severity: 5,\n    icd10Codes: ['K92.0', 'K92.1', 'K92.2'],\n    extendedContent: {\n      redFlags: ['Instabilidade hemodinâmica', 'Hb < 7', 'Sangramento ativo', 'Ressangramento', 'Coagulopatia', 'Uso de anticoagulantes'],\n      diagnosticoDiferencial: ['Úlcera péptica', 'Varizes esofágicas', 'Mallory-Weiss', 'Neoplasia', 'Divertículo', 'Angiodisplasia'],\n      condutaInicial: '1. ABC + 2 acessos calibrosos\\n2. Ressuscitação volêmica\\n3. Reservar sangue\\n4. IBP IV em bolus + infusão contínua\\n5. EDA nas primeiras 24h\\n6. Terlipressina se suspeita de varizes',\n      calculadoras: ['Glasgow-Blatchford Score', 'Rockall Score'],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'GI_BOWEL_OBSTRUCTION',\n    group: 'GI',\n    title: 'Obstrução intestinal',\n    subtitle: 'Barriga inchada, não consegue evacuar nem eliminar gases',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'high',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: false,\n    chips: ['obstrução', 'barriga inchada'],\n    searchTerms: ['obstrução intestinal', 'íleo', 'barriga inchada', 'parada de eliminação'],\n    synonyms: ['íleo mecânico', 'suboclusão'],\n    relatedSymptoms: ['Distensão abdominal', 'Vômitos', 'Parada de eliminação', 'Cólicas'],\n    bodySystem: ['gastrointestinal'],\n    severity: 4,\n    icd10Codes: ['K56.6', 'K56.5'],\n    extendedContent: {\n      redFlags: ['Febre', 'Peritonite', 'Taquicardia', 'Estrangulamento', 'Necrose intestinal'],\n      diagnosticoDiferencial: ['Aderências', 'Hérnia encarcerada', 'Neoplasia', 'Volvo', 'Íleo paralítico'],\n      condutaInicial: '1. Jejum + SNG aberta\\n2. Hidratação vigorosa\\n3. Sondagem vesical\\n4. RX de abdome (nível hidroaéreo)\\n5. TC se dúvida\\n6. Cirurgia se estrangulamento ou refratário',\n      calculadoras: [],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  },\n  {\n    id: 'GI_CONSTIPATION',\n    group: 'GI',\n    title: 'Constipação intestinal',\n    subtitle: 'Dificuldade para evacuar há dias',\n    ageTargets: ['adult', 'elderly'],\n    riskLevel: 'low',\n    isTopForAdult: true,\n    isTopForChild: false,\n    isFastTrack: true,\n    chips: ['prisão de ventre', 'intestino preso'],\n    searchTerms: ['constipação', 'prisão de ventre', 'intestino preso'],\n    synonyms: ['prisão de ventre', 'obstipação'],\n    relatedSymptoms: ['Dificuldade para evacuar', 'Fezes endurecidas', 'Distensão', 'Desconforto'],\n    bodySystem: ['gastrointestinal'],\n    severity: 1,\n    icd10Codes: ['K59.0'],\n    extendedContent: {\n      redFlags: ['Parada total de eliminação', 'Distensão importante', 'Vômitos', 'Sangramento', 'Perda de peso', 'Início recente > 50 anos'],\n      diagnosticoDiferencial: ['Constipação funcional', 'Impactação fecal', 'Obstrução intestinal', 'Neoplasia colorretal', 'Hipotireoidismo'],\n      condutaInicial: '1. Excluir obstrução intestinal\\n2. Toque retal\\n3. Laxativo osmótico (lactulose, PEG)\\n4. Enema se impactação\\n5. Orientar dieta rica em fibras\\n6. Investigar se red flags',\n      calculadoras: [],\n      referencias: [],\n      rawMarkdown: ''\n    }\n  }\n]\n\n// ============================================\n// COMBINAR TODOS E EXPORTAR\n// ============================================\nexport const newComplaints: Complaint[] = [\n  ...cvComplaints,\n  ...rcComplaints,\n  ...ncComplaints,\n  ...giComplaints,\n]\n\n// TOTAL: 50+ novas queixas combinadas\nexport const allNewComplaints: Complaint[] = [\n  ...newComplaints,\n  ...newComplaintsPart2,\n]\n\n// Export total count for reference\nexport const NEW_COMPLAINTS_COUNT = allNewComplaints.length\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/newComplaintsPart2.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/data/searchIndex.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/db/complaints.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/db/prisma.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/design-system/animation-tokens.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/design/tokens.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/env-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/rate-limit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/services/complaintSearchService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/services/complaints-api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/services/extractionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/services/guidelineExtractionService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GuidelineExtraction' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FlashTemplate' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RedFlagExtended' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MedicationRENAME' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ClinicalCalculator' is defined but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DifferentialDiagnosis' is defined but never used. Allowed unused vars must match /^_/u.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EBMReference' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":181,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":181,"endColumn":16,"suggestions":[{"fix":{"range":[7537,7627],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":192,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":192,"endColumn":16,"suggestions":[{"fix":{"range":[7954,8047],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":214,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":214,"endColumn":16,"suggestions":[{"fix":{"range":[8646,8725],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Guideline Extraction Service\n *\n * AI-powered extraction of structured medical data from Brazilian clinical guidelines.\n * Supports dual output: Flash templates (2-3 min) + Anamnese Well checkboxes (5-10 min).\n *\n * @module guidelineExtractionService\n */\n\nimport { z } from 'zod'\nimport { generateObject } from 'ai'\nimport { openai, DEFAULT_MODEL } from '@/lib/ai/config'\nimport {\n  GUIDELINE_EXTRACTION_SYSTEM_PROMPT,\n  buildGuidelineExtractionPrompt,\n} from '@/lib/ai/guideline-prompts'\nimport { prisma } from '@/lib/db/prisma'\nimport type {\n  GuidelineExtraction,\n  FlashTemplate,\n  AnamneseCheckbox,\n  RedFlagExtended,\n  MedicationRENAME,\n  ClinicalCalculator,\n  DifferentialDiagnosis,\n  EBMReference,\n} from '@/lib/types/medical-extended'\n\n// ============================================================================\n// ZOD SCHEMAS FOR VALIDATION\n// ============================================================================\n\n/**\n * Flash Template Schema\n */\nconst FlashTemplateSchema = z.object({\n  qp: z.string().min(10).describe('Queixa Principal - pre-filled text with variables'),\n  hda: z.string().min(20).describe('História da Doença Atual - symptom characteristics'),\n  ef: z.string().min(20).describe('Exame Físico - essential findings with vitals'),\n  hd: z.string().min(5).describe('Hipótese Diagnóstica - specific diagnosis'),\n  conduta: z.string().min(30).describe('Conduta - numbered action steps'),\n  acaoImediata: z.string().min(30).describe('Immediate action protocol (first 10 minutes)'),\n  tempoEstimado: z.number().min(1).max(10).describe('Estimated completion time in minutes'),\n})\n\n/**\n * Anamnese Checkbox Schema\n */\nconst AnamneseCheckboxSchema = z.object({\n  category: z.enum([\n    'QP',\n    'HDA',\n    'ANTECEDENTES',\n    'MEDICACOES',\n    'ALERGIAS',\n    'HABITOS',\n    'EXAME_FISICO',\n    'NEGATIVAS',\n  ]).describe('CFM-compliant category'),\n  displayText: z.string().min(5).describe('Text displayed next to checkbox'),\n  narrativeText: z.string().min(5).describe('Text inserted into medical narrative when checked'),\n  section: z.enum(['FLASH', 'DETAILED', 'BOTH']).describe('Where this checkbox appears'),\n  isRequired: z.boolean().describe('Required for CFM compliance'),\n  isRedFlag: z.boolean().describe('Indicates warning sign/red flag'),\n})\n\n/**\n * Red Flag Extended Schema\n */\nconst RedFlagExtendedSchema = z.object({\n  description: z.string().min(10).describe('Description of the red flag sign/symptom'),\n  severity: z.enum(['critical', 'warning', 'caution']).describe('Severity level'),\n  immediateAction: z.string().min(10).describe('Immediate action to take'),\n  timeToAction: z.number().optional().describe('Time window for action (minutes)'),\n})\n\n/**\n * Medication RENAME Schema\n */\nconst MedicationRENAMESchema = z.object({\n  genericName: z.string().min(3).describe('Generic medication name (DCB)'),\n  dose: z.string().min(2).describe('Dosage and frequency'),\n  route: z.enum(['VO', 'IV', 'IM', 'SC', 'Inalatório', 'SL', 'Tópico', 'Retal', 'Nasal', 'Ocular']).describe('Route of administration'),\n  susAvailable: z.boolean().describe('Available in SUS'),\n  renameList: z.enum(['A', 'B', 'C']).optional().describe('RENAME list classification'),\n  evidenceLevel: z.enum(['A', 'B', 'C', 'D']).describe('Evidence level for this indication'),\n  commercialName: z.string().optional().describe('Commercial name (optional reference)'),\n  warnings: z.array(z.string()).optional().describe('Special considerations or warnings'),\n})\n\n/**\n * Clinical Calculator Schema\n */\nconst ClinicalCalculatorSchema = z.object({\n  name: z.string().min(3).describe('Calculator name (e.g., HEART Score, CURB-65)'),\n  purpose: z.string().min(10).describe('Purpose/indication for using this calculator'),\n  evidenceLevel: z.enum(['A', 'B', 'C', 'D']).describe('Evidence level supporting this tool'),\n  url: z.string().optional().describe('Link to MDCalc or other calculator tool'),\n})\n\n/**\n * Differential Diagnosis Schema\n */\nconst DifferentialDiagnosisSchema = z.object({\n  condition: z.string().min(5).describe('Condition name'),\n  icd10: z.string().regex(/^[A-Z]\\d{2}\\.\\d{1,2}$/).describe('ICD-10 code'),\n  probability: z.enum(['high', 'medium', 'low']).describe('Probability level'),\n  keyFeatures: z.array(z.string()).min(1).describe('Key clinical features'),\n  mustNotMiss: z.boolean().optional().describe('Whether this is a must-not-miss diagnosis'),\n})\n\n/**\n * EBM Reference Schema\n */\nconst EBMReferenceSchema = z.object({\n  source: z.enum([\n    'sbc', 'sbpt', 'amb', 'ms', 'uptodate', 'dynamed',\n    'cochrane', 'pubmed', 'sbim', 'sbn', 'other'\n  ]).describe('Source of the reference'),\n  title: z.string().min(10).describe('Title of the guideline/article'),\n  year: z.number().min(2010).max(2030).describe('Publication year'),\n  url: z.string().optional().describe('URL to the reference'),\n  doi: z.string().optional().describe('DOI or PMID'),\n  evidenceQuality: z.enum(['high', 'moderate', 'low', 'very_low']).optional().describe('Evidence quality rating'),\n})\n\n/**\n * Complete Guideline Extraction Schema\n */\nexport const GuidelineExtractionSchema = z.object({\n  complaintName: z.string().min(5).describe('Name of the clinical complaint/syndrome'),\n  group: z.enum(['CV', 'NC', 'RC', 'GI', 'GU', 'INF', 'TR', 'TOX', 'GEN', 'MSK', 'PSI', 'OBG', 'PED', 'DERM', 'ORL', 'OFT', 'ENV']).describe('Medical system group'),\n  riskLevel: z.literal('high').describe('Risk level (always high for ER complaints)'),\n  icd10Codes: z.array(z.string().regex(/^[A-Z]\\d{2}\\.\\d{1,2}$/)).min(1).describe('ICD-10 codes'),\n\n  flashTemplate: FlashTemplateSchema.describe('Flash template for rapid documentation'),\n  anamneseCheckboxes: z.array(AnamneseCheckboxSchema).min(30).max(60).describe('Detailed checkboxes for complete anamnesis'),\n\n  redFlags: z.array(RedFlagExtendedSchema).min(3).describe('Extended red flags with immediate action'),\n  medications: z.array(MedicationRENAMESchema).min(1).describe('SUS/RENAME-compatible medications'),\n  calculators: z.array(ClinicalCalculatorSchema).describe('Clinical calculators/scores'),\n  differentialDiagnosis: z.array(DifferentialDiagnosisSchema).min(3).describe('Differential diagnoses'),\n  references: z.array(EBMReferenceSchema).min(1).describe('Evidence-based medicine references'),\n})\n\nexport type GuidelineExtractionData = z.infer<typeof GuidelineExtractionSchema>\n\n// ============================================================================\n// EXTRACTION SERVICE FUNCTIONS\n// ============================================================================\n\n/**\n * Process a guideline document to extract structured medical data\n *\n * @param sourceDocumentId - ID of the source document in the database\n * @returns Promise resolving to the created ContentExtraction record\n *\n * @example\n * const extraction = await processGuidelineDocument('doc-123')\n * console.log(extraction.id) // extraction-456\n */\nexport async function processGuidelineDocument(sourceDocumentId: string) {\n  // 1. Fetch source document from database\n  const document = await prisma.sourceDocument.findUnique({\n    where: { id: sourceDocumentId },\n  })\n\n  if (!document) {\n    throw new Error(`Source document not found: ${sourceDocumentId}`)\n  }\n\n  if (!document.content || document.content.trim().length < 100) {\n    throw new Error('Document content is too short or empty')\n  }\n\n  try {\n    // 2. Build extraction prompt with guideline content\n    const prompt = buildGuidelineExtractionPrompt(document.content, 'both')\n\n    // 3. Call OpenAI with structured output extraction\n    console.log(`[GuidelineExtraction] Starting extraction for document: ${sourceDocumentId}`)\n\n    const { object } = await generateObject({\n      model: openai(DEFAULT_MODEL),\n      system: GUIDELINE_EXTRACTION_SYSTEM_PROMPT,\n      prompt,\n      schema: GuidelineExtractionSchema,\n      temperature: 0.2, // Lower temperature for consistency\n      maxTokens: 8000, // Increased for comprehensive extraction\n    })\n\n    console.log(`[GuidelineExtraction] Successfully extracted data for: ${object.complaintName}`)\n\n    // 4. Validate extraction quality\n    validateExtractionQuality(object)\n\n    // 5. Save extraction result to database\n    const extraction = await prisma.contentExtraction.create({\n      data: {\n        sourceDocumentId: document.id,\n        extractedData: object as unknown as Record<string, unknown>, // Cast for Prisma Json type\n        status: 'REVIEW_NEEDED', // Always requires human review\n      },\n    })\n\n    // 6. Update source document status\n    await prisma.sourceDocument.update({\n      where: { id: document.id },\n      data: {\n        status: 'PROCESSED',\n      },\n    })\n\n    console.log(`[GuidelineExtraction] Extraction saved with ID: ${extraction.id}`)\n\n    return extraction\n  } catch (error) {\n    console.error('[GuidelineExtraction] Error processing document:', error)\n\n    // Update document status to ERROR\n    await prisma.sourceDocument.update({\n      where: { id: document.id },\n      data: {\n        status: 'ERROR',\n      },\n    })\n\n    // Re-throw with more context\n    if (error instanceof Error) {\n      throw new Error(`Guideline extraction failed: ${error.message}`)\n    }\n    throw error\n  }\n}\n\n// ============================================================================\n// VALIDATION FUNCTIONS\n// ============================================================================\n\n/**\n * Validate extraction quality and completeness\n * Throws error if validation fails\n */\nfunction validateExtractionQuality(data: GuidelineExtractionData): void {\n  const errors: string[] = []\n\n  // 1. Check Flash template completeness\n  if (data.flashTemplate.tempoEstimado > 5) {\n    errors.push(`Flash template estimated time too high: ${data.flashTemplate.tempoEstimado} min (should be ≤5)`)\n  }\n\n  // 2. Check checkbox section distribution\n  const checkboxCounts = {\n    flash: data.anamneseCheckboxes.filter(c => c.section === 'FLASH').length,\n    detailed: data.anamneseCheckboxes.filter(c => c.section === 'DETAILED').length,\n    both: data.anamneseCheckboxes.filter(c => c.section === 'BOTH').length,\n  }\n\n  if (checkboxCounts.both < 10) {\n    errors.push(`Too few BOTH checkboxes: ${checkboxCounts.both} (should be ≥10)`)\n  }\n\n  if (checkboxCounts.flash + checkboxCounts.both < 10) {\n    errors.push(`Too few Flash checkboxes: ${checkboxCounts.flash + checkboxCounts.both} (should be ≥10 total)`)\n  }\n\n  // 3. Check red flags have critical severity\n  const criticalRedFlags = data.redFlags.filter(rf => rf.severity === 'critical')\n  if (criticalRedFlags.length === 0) {\n    errors.push('No critical red flags found (high-risk complaint must have ≥1)')\n  }\n\n  // 4. Check medications are SUS-available\n  const nonSUSMeds = data.medications.filter(m => !m.susAvailable)\n  if (nonSUSMeds.length > 0) {\n    errors.push(`Non-SUS medications found: ${nonSUSMeds.map(m => m.genericName).join(', ')}`)\n  }\n\n  // 5. Check for Brazilian guideline references\n  const brazilianRefs = data.references.filter(r =>\n    ['sbc', 'sbpt', 'amb', 'ms', 'sbim', 'sbn'].includes(r.source)\n  )\n  if (brazilianRefs.length === 0) {\n    errors.push('No Brazilian guideline references found')\n  }\n\n  // 6. Check ICD-10 format\n  const invalidICD10 = data.icd10Codes.filter(code => !/^[A-Z]\\d{2}\\.\\d{1,2}$/.test(code))\n  if (invalidICD10.length > 0) {\n    errors.push(`Invalid ICD-10 codes: ${invalidICD10.join(', ')}`)\n  }\n\n  // Throw if validation failed\n  if (errors.length > 0) {\n    console.warn('[GuidelineExtraction] Validation warnings:', errors)\n    // Note: These are warnings, not blocking errors\n    // Human reviewer will address them\n  }\n}\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Generate complaint ID from complaint name\n *\n * @param group - Medical group (CV, NC, RC, etc.)\n * @param complaintName - Name of the complaint\n * @returns Formatted complaint ID\n *\n * @example\n * generateComplaintId('CV', 'Síndrome Coronariana Aguda')\n * // Returns: 'CV_SINDROME_CORONARIA_AGUDA'\n */\nexport function generateComplaintId(group: string, complaintName: string): string {\n  // Remove accents\n  const normalized = complaintName\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '')\n    .toUpperCase()\n    .replace(/[^A-Z0-9\\s]/g, '')\n    .replace(/\\s+/g, '_')\n    .slice(0, 50) // Limit length\n\n  return `${group}_${normalized}`\n}\n\n/**\n * Extract priority checkboxes (those marked as FLASH or BOTH)\n *\n * @param checkboxes - Array of anamnese checkboxes\n * @returns Mapping of categories to checkbox IDs\n */\nexport function extractPriorityCheckboxes(checkboxes: AnamneseCheckbox[]): Record<string, string[]> {\n  const priority: Record<string, string[]> = {}\n\n  checkboxes.forEach((checkbox, index) => {\n    if (checkbox.section === 'FLASH' || checkbox.section === 'BOTH') {\n      const category = checkbox.category\n      if (!priority[category]) {\n        priority[category] = []\n      }\n      // Use checkbox displayText as ID (simplified for now)\n      priority[category].push(`checkbox_${index}`)\n    }\n  })\n\n  return priority\n}\n\n/**\n * Get extraction statistics for monitoring\n *\n * @param extractionId - ID of the extraction\n * @returns Statistics object\n */\nexport async function getExtractionStats(extractionId: string) {\n  const extraction = await prisma.contentExtraction.findUnique({\n    where: { id: extractionId },\n  })\n\n  if (!extraction) {\n    throw new Error(`Extraction not found: ${extractionId}`)\n  }\n\n  const data = extraction.extractedData as unknown as GuidelineExtractionData\n\n  return {\n    complaintName: data.complaintName,\n    group: data.group,\n    totalCheckboxes: data.anamneseCheckboxes.length,\n    flashCheckboxes: data.anamneseCheckboxes.filter(c => c.section === 'FLASH' || c.section === 'BOTH').length,\n    detailedCheckboxes: data.anamneseCheckboxes.filter(c => c.section === 'DETAILED').length,\n    redFlags: data.redFlags.length,\n    criticalRedFlags: data.redFlags.filter(rf => rf.severity === 'critical').length,\n    medications: data.medications.length,\n    susMedications: data.medications.filter(m => m.susAvailable).length,\n    calculators: data.calculators.length,\n    differentialDiagnoses: data.differentialDiagnosis.length,\n    references: data.references.length,\n    brazilianReferences: data.references.filter(r => ['sbc', 'sbpt', 'amb', 'ms'].includes(r.source)).length,\n    estimatedFlashTime: data.flashTemplate.tempoEstimado,\n  }\n}\n\n/**\n * Export extraction to Obsidian markdown format\n * This will be used by the sync system to create markdown files\n *\n * @param extractionId - ID of the extraction\n * @returns Object with Flash and Anamnese markdown content\n */\nexport async function exportToMarkdown(extractionId: string) {\n  const extraction = await prisma.contentExtraction.findUnique({\n    where: { id: extractionId },\n  })\n\n  if (!extraction) {\n    throw new Error(`Extraction not found: ${extractionId}`)\n  }\n\n  const data = extraction.extractedData as unknown as GuidelineExtractionData\n\n  // Generate complaint ID\n  const complaintId = generateComplaintId(data.group, data.complaintName)\n\n  // Generate Flash markdown\n  const flashMarkdown = generateFlashMarkdown(complaintId, data)\n\n  // Generate Anamnese Well markdown\n  const anamneseMarkdown = generateAnamneseMarkdown(complaintId, data)\n\n  return {\n    complaintId,\n    flashMarkdown,\n    anamneseMarkdown,\n    flashFilename: `Flash-${complaintId}.md`,\n    anamneseFilename: `${data.group}-${complaintId}-Checkboxes.md`,\n  }\n}\n\n/**\n * Generate Flash template markdown\n */\nfunction generateFlashMarkdown(complaintId: string, data: GuidelineExtractionData): string {\n  const frontmatter = `---\nid: ${complaintId}\ngrupo: ${data.group}\nrisco: high\nseveridade: 5\nicd10: ${JSON.stringify(data.icd10Codes)}\ntempoEstimado: ${data.flashTemplate.tempoEstimado}\nebm_version: \"2.0\"\nlast_ebm_review: \"${new Date().toISOString().split('T')[0]}\"\nbrazilian_guidelines: ${JSON.stringify(data.references.filter(r => ['sbc', 'sbpt', 'amb', 'ms'].includes(r.source)).map(r => `${r.source.toUpperCase()} ${r.title} (${r.year})`))}\nsus_protocol_compatible: true\nrename_medications_only: true\n---`\n\n  return `${frontmatter}\n\n# Flash: ${data.complaintName}\n\n## ⚡ Ação Imediata (0-10 min)\n\n${data.flashTemplate.acaoImediata}\n\n## 📝 Template de Prontuário\n\n**QP**: ${data.flashTemplate.qp}\n\n**HDA**: ${data.flashTemplate.hda}\n\n**EF**: ${data.flashTemplate.ef}\n\n**HD**: ${data.flashTemplate.hd}\n\n**CD**:\n${data.flashTemplate.conduta}\n\n## 🚩 Red Flags\n\n${data.redFlags.map(rf => {\n    const emoji = rf.severity === 'critical' ? '🔴' : rf.severity === 'warning' ? '🟡' : '🟢'\n    return `${emoji} ${rf.description} → ${rf.immediateAction}${rf.timeToAction ? ` (< ${rf.timeToAction} min)` : ''}`\n  }).join('\\n')}\n\n${data.calculators.length > 0 ? `## 📊 Calculadoras\n\n${data.calculators.map(calc => `- **${calc.name}** - ${calc.purpose}`).join('\\n')}\n` : ''}\n\n## 💊 Medicações (RENAME)\n\n${data.medications.map(med =>\n  `- **${med.genericName}** ${med.dose} (${med.route}) - Lista ${med.renameList || '?'} - Evidência ${med.evidenceLevel}`\n).join('\\n')}\n\n## 🔍 Diagnóstico Diferencial\n\n${data.differentialDiagnosis.map(dd =>\n  `- **${dd.condition}** (${dd.icd10}) - Probabilidade: ${dd.probability} - ${dd.keyFeatures.join(', ')}`\n).join('\\n')}\n\n## 📚 Referências EBM\n\n${data.references.map(ref =>\n  `- **${ref.source.toUpperCase()}** - ${ref.title} (${ref.year})`\n).join('\\n')}\n\n---\n*Tempo estimado de preenchimento: ${data.flashTemplate.tempoEstimado} minutos*\n`\n}\n\n/**\n * Generate Anamnese Well checkboxes markdown\n */\nfunction generateAnamneseMarkdown(complaintId: string, data: GuidelineExtractionData): string {\n  const frontmatter = `---\nid: ${complaintId}\ngrupo: ${data.group}\nrisco: high\n---`\n\n  // Group checkboxes by category\n  const categories: Record<string, AnamneseCheckbox[]> = {}\n  data.anamneseCheckboxes.forEach(checkbox => {\n    if (!categories[checkbox.category]) {\n      categories[checkbox.category] = []\n    }\n    categories[checkbox.category].push(checkbox)\n  })\n\n  const categoryNames: Record<string, string> = {\n    QP: 'Queixa Principal',\n    HDA: 'História da Doença Atual',\n    ANTECEDENTES: 'Antecedentes',\n    MEDICACOES: 'Medicações',\n    ALERGIAS: 'Alergias',\n    HABITOS: 'Hábitos',\n    EXAME_FISICO: 'Exame Físico',\n    NEGATIVAS: 'Negativas Pertinentes',\n  }\n\n  const checkboxSections = Object.entries(categories).map(([category, checkboxes]) => {\n    return `## ${categoryNames[category] || category}\n\n${checkboxes.map(cb => `- [ ] ${cb.displayText}\n  - **Narrativa**: \"${cb.narrativeText}\"\n  - **Seção**: ${cb.section}${cb.isRedFlag ? '\\n  - **Red Flag**: true' : ''}${cb.isRequired ? '\\n  - **Required**: true' : ''}`).join('\\n\\n')}`\n  }).join('\\n\\n')\n\n  const counts = {\n    total: data.anamneseCheckboxes.length,\n    flash: data.anamneseCheckboxes.filter(c => c.section === 'FLASH').length,\n    detailed: data.anamneseCheckboxes.filter(c => c.section === 'DETAILED').length,\n    both: data.anamneseCheckboxes.filter(c => c.section === 'BOTH').length,\n  }\n\n  return `${frontmatter}\n\n# ${data.group} - ${data.complaintName} (Anamnese Completa)\n\n${checkboxSections}\n\n---\n*Total: ${counts.total} checkboxes (${counts.flash} FLASH, ${counts.detailed} DETAILED, ${counts.both} BOTH)*\n`\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/services/protocolService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/supabase/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/supabase/middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/supabase/server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/supabase/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/types/complaints-api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/types/medical-extended.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/types/medical.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/utils/fuzzyMatch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/utils/haptics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/utils/text-extraction.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/utils/textNormalization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/validation/complaints.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/lib/validation/ebm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/next-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/prisma/seed.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":9,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":9,"endColumn":14,"suggestions":[{"fix":{"range":[300,334],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":785,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":785,"endColumn":14,"suggestions":[{"fix":{"range":[30137,30170],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":786,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":786,"endColumn":14,"suggestions":[{"fix":{"range":[30173,30239],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":787,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":787,"endColumn":14,"suggestions":[{"fix":{"range":[30242,30309],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":788,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":788,"endColumn":14,"suggestions":[{"fix":{"range":[30312,30386],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PrismaClient, CheckboxCategory, RedFlagSeverity } from '@prisma/client'\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport 'dotenv/config'\n\nconst adapter = new PrismaPg({ connectionString: process.env.DATABASE_URL })\nconst prisma = new PrismaClient({ adapter })\n\nasync function main() {\n  console.log('Seeding database...')\n\n  // Clear existing data\n  await prisma.chatMessage.deleteMany()\n  await prisma.chatConversation.deleteMany()\n  await prisma.anamneseSession.deleteMany()\n  await prisma.redFlagRule.deleteMany()\n  await prisma.checkbox.deleteMany()\n  await prisma.syndrome.deleteMany()\n\n  // ============================================\n  // SYNDROME 1: DOR TORACICA / CARDIOVASCULAR\n  // ============================================\n  const chestPain = await prisma.syndrome.create({\n    data: {\n      name: 'Dor Toracica',\n      code: 'CHEST_PAIN',\n      description: 'Dor toracica / Cardiovascular - Avaliacao de sindrome coronariana aguda',\n      icon: 'heart',\n      orderIndex: 1,\n    },\n  })\n\n  // Checkboxes for Chest Pain - QP (Queixa Principal)\n  const chestPainQP = [\n    { displayText: 'Dor precordial', narrativeText: 'dor precordial', isRedFlag: true },\n    { displayText: 'Dor retroesternal', narrativeText: 'dor retroesternal', isRedFlag: true },\n    {\n      displayText: 'Carater constritivo/em aperto',\n      narrativeText: 'carater constritivo (em aperto)',\n      isRedFlag: true,\n    },\n    {\n      displayText: 'Carater em peso',\n      narrativeText: 'carater opressivo (em peso)',\n      isRedFlag: true,\n    },\n    { displayText: 'Carater em queimacao', narrativeText: 'carater em queimacao' },\n    { displayText: 'Carater pontada/facada', narrativeText: 'carater lancinante (em pontada)' },\n    {\n      displayText: 'Irradiacao para MSE',\n      narrativeText: 'irradiacao para membro superior esquerdo',\n      isRedFlag: true,\n    },\n    {\n      displayText: 'Irradiacao para pescoco',\n      narrativeText: 'irradiacao para regiao cervical',\n      isRedFlag: true,\n    },\n    {\n      displayText: 'Irradiacao para mandibula',\n      narrativeText: 'irradiacao para mandibula',\n      isRedFlag: true,\n    },\n    { displayText: 'Irradiacao para dorso', narrativeText: 'irradiacao para regiao dorsal' },\n    { displayText: 'Inicio subito', narrativeText: 'inicio subito', isRedFlag: true },\n    { displayText: 'Inicio gradual', narrativeText: 'inicio gradual' },\n    { displayText: 'Duracao < 20 minutos', narrativeText: 'duracao inferior a 20 minutos' },\n    {\n      displayText: 'Duracao > 20 minutos',\n      narrativeText: 'duracao superior a 20 minutos',\n      isRedFlag: true,\n    },\n    { displayText: 'Intensidade leve (1-3)', narrativeText: 'intensidade leve (EVA 1-3/10)' },\n    {\n      displayText: 'Intensidade moderada (4-6)',\n      narrativeText: 'intensidade moderada (EVA 4-6/10)',\n    },\n    {\n      displayText: 'Intensidade intensa (7-10)',\n      narrativeText: 'intensidade intensa (EVA 7-10/10)',\n      isRedFlag: true,\n    },\n  ]\n\n  for (let i = 0; i < chestPainQP.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: chestPain.id,\n        category: CheckboxCategory.QP,\n        displayText: chestPainQP[i]!.displayText,\n        narrativeText: chestPainQP[i]!.narrativeText,\n        isRedFlag: chestPainQP[i]!.isRedFlag || false,\n        isRequired: i < 3,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Chest Pain - HDA\n  const chestPainHDA = [\n    { displayText: 'Sintomas iniciados ha minutos', narrativeText: 'inicio ha poucos minutos' },\n    { displayText: 'Sintomas iniciados ha horas', narrativeText: 'inicio ha algumas horas' },\n    { displayText: 'Sintomas iniciados ha dias', narrativeText: 'inicio ha dias' },\n    { displayText: 'Piora aos esforcos', narrativeText: 'piora aos esforcos', isRedFlag: true },\n    { displayText: 'Piora ao decubito', narrativeText: 'piora ao decubito' },\n    { displayText: 'Piora a respiracao profunda', narrativeText: 'piora a respiracao profunda' },\n    { displayText: 'Piora a palpacao', narrativeText: 'piora a palpacao local' },\n    { displayText: 'Melhora ao repouso', narrativeText: 'melhora ao repouso', isRedFlag: true },\n    {\n      displayText: 'Melhora com nitrato',\n      narrativeText: 'melhora com uso de nitrato',\n      isRedFlag: true,\n    },\n    {\n      displayText: 'Episodios previos semelhantes',\n      narrativeText: 'episodios previos semelhantes',\n    },\n    { displayText: 'Primeiro episodio', narrativeText: 'primeiro episodio' },\n  ]\n\n  for (let i = 0; i < chestPainHDA.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: chestPain.id,\n        category: CheckboxCategory.HDA,\n        displayText: chestPainHDA[i]!.displayText,\n        narrativeText: chestPainHDA[i]!.narrativeText,\n        isRedFlag: chestPainHDA[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Chest Pain - ANTECEDENTES\n  const chestPainAntecedentes = [\n    {\n      displayText: 'Hipertensao arterial (HAS)',\n      narrativeText: 'hipertensao arterial sistemica',\n      isRedFlag: true,\n    },\n    { displayText: 'Diabetes mellitus (DM)', narrativeText: 'diabetes mellitus', isRedFlag: true },\n    { displayText: 'Dislipidemia', narrativeText: 'dislipidemia', isRedFlag: true },\n    {\n      displayText: 'Doenca coronariana previa',\n      narrativeText: 'doenca coronariana previa',\n      isRedFlag: true,\n    },\n    {\n      displayText: 'IAM previo',\n      narrativeText: 'infarto agudo do miocardio previo',\n      isRedFlag: true,\n    },\n    {\n      displayText: 'Angioplastia previa',\n      narrativeText: 'angioplastia coronariana previa',\n      isRedFlag: true,\n    },\n    { displayText: 'Cirurgia cardiaca previa', narrativeText: 'cirurgia cardiaca previa' },\n    { displayText: 'Insuficiencia cardiaca', narrativeText: 'insuficiencia cardiaca' },\n    { displayText: 'Arritmia cardiaca', narrativeText: 'arritmia cardiaca' },\n    {\n      displayText: 'AVC/AIT previo',\n      narrativeText: 'acidente vascular cerebral ou ataque isquemico transitorio previo',\n    },\n    { displayText: 'Doenca renal cronica', narrativeText: 'doenca renal cronica' },\n    {\n      displayText: 'Historia familiar de DAC precoce',\n      narrativeText: 'historia familiar de doenca arterial coronariana precoce',\n      isRedFlag: true,\n    },\n  ]\n\n  for (let i = 0; i < chestPainAntecedentes.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: chestPain.id,\n        category: CheckboxCategory.ANTECEDENTES,\n        displayText: chestPainAntecedentes[i]!.displayText,\n        narrativeText: chestPainAntecedentes[i]!.narrativeText,\n        isRedFlag: chestPainAntecedentes[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Chest Pain - HABITOS\n  const chestPainHabitos = [\n    { displayText: 'Tabagismo ativo', narrativeText: 'tabagismo ativo', isRedFlag: true },\n    { displayText: 'Ex-tabagista', narrativeText: 'ex-tabagista' },\n    { displayText: 'Etilismo', narrativeText: 'etilismo' },\n    { displayText: 'Sedentarismo', narrativeText: 'sedentarismo' },\n    { displayText: 'Uso de cocaina/crack', narrativeText: 'uso de cocaina/crack', isRedFlag: true },\n  ]\n\n  for (let i = 0; i < chestPainHabitos.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: chestPain.id,\n        category: CheckboxCategory.HABITOS,\n        displayText: chestPainHabitos[i]!.displayText,\n        narrativeText: chestPainHabitos[i]!.narrativeText,\n        isRedFlag: chestPainHabitos[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Chest Pain - NEGATIVAS\n  const chestPainNegativas = [\n    { displayText: 'Nega dispneia', narrativeText: 'dispneia', isNegative: true },\n    { displayText: 'Nega palpitacoes', narrativeText: 'palpitacoes', isNegative: true },\n    { displayText: 'Nega sincope', narrativeText: 'sincope', isNegative: true },\n    { displayText: 'Nega sudorese', narrativeText: 'sudorese', isNegative: true },\n    { displayText: 'Nega nauseas/vomitos', narrativeText: 'nauseas ou vomitos', isNegative: true },\n    {\n      displayText: 'Nega edema de MMII',\n      narrativeText: 'edema de membros inferiores',\n      isNegative: true,\n    },\n    { displayText: 'Nega febre', narrativeText: 'febre', isNegative: true },\n    { displayText: 'Nega tosse', narrativeText: 'tosse', isNegative: true },\n    { displayText: 'Nega trauma recente', narrativeText: 'trauma recente', isNegative: true },\n  ]\n\n  for (let i = 0; i < chestPainNegativas.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: chestPain.id,\n        category: CheckboxCategory.NEGATIVAS,\n        displayText: chestPainNegativas[i]!.displayText,\n        narrativeText: chestPainNegativas[i]!.narrativeText,\n        isNegative: true,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Chest Pain - EXAME FISICO\n  const chestPainExameFisico = [\n    { displayText: 'PA elevada', narrativeText: 'pressao arterial elevada' },\n    { displayText: 'PA normal', narrativeText: 'pressao arterial dentro da normalidade' },\n    { displayText: 'Taquicardia', narrativeText: 'taquicardia', isRedFlag: true },\n    { displayText: 'Bradicardia', narrativeText: 'bradicardia' },\n    { displayText: 'FC normal', narrativeText: 'frequencia cardiaca normal' },\n    { displayText: 'Sudorese', narrativeText: 'sudorese', isRedFlag: true },\n    { displayText: 'Palidez cutanea', narrativeText: 'palidez cutanea', isRedFlag: true },\n    { displayText: 'Bulhas ritmicas', narrativeText: 'bulhas cardiacas ritmicas' },\n    { displayText: 'Bulhas arritmicas', narrativeText: 'bulhas cardiacas arritmicas' },\n    { displayText: 'Sopro cardiaco', narrativeText: 'sopro cardiaco' },\n    { displayText: 'B3 presente', narrativeText: 'terceira bulha presente' },\n    {\n      displayText: 'Estertores pulmonares',\n      narrativeText: 'estertores pulmonares',\n      isRedFlag: true,\n    },\n    { displayText: 'MV simetrico', narrativeText: 'murmuro vesicular simetrico bilateralmente' },\n    {\n      displayText: 'Sem alteracoes ao exame',\n      narrativeText: 'exame cardiovascular sem alteracoes significativas',\n    },\n  ]\n\n  for (let i = 0; i < chestPainExameFisico.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: chestPain.id,\n        category: CheckboxCategory.EXAME_FISICO,\n        displayText: chestPainExameFisico[i]!.displayText,\n        narrativeText: chestPainExameFisico[i]!.narrativeText,\n        isRedFlag: chestPainExameFisico[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Red Flag Rules for Chest Pain\n  await prisma.redFlagRule.createMany({\n    data: [\n      {\n        syndromeId: chestPain.id,\n        name: 'Dor Tipica de SCA',\n        description: 'Dor toracica com caracteristicas tipicas de sindrome coronariana aguda',\n        severity: RedFlagSeverity.CRITICAL,\n        conditionJson: {\n          type: 'AND',\n          conditions: [\n            { type: 'checkbox_category', category: 'QP', hasRedFlag: true },\n            {\n              type: 'OR',\n              conditions: [\n                { type: 'checkbox_text', contains: 'constritivo' },\n                { type: 'checkbox_text', contains: 'peso' },\n              ],\n            },\n          ],\n        },\n        message:\n          'ALERTA: Dor toracica com caracteristicas tipicas de SCA. Considerar protocolo de dor toracica.',\n      },\n      {\n        syndromeId: chestPain.id,\n        name: 'Multiplos Fatores de Risco',\n        description: 'Paciente com multiplos fatores de risco cardiovascular',\n        severity: RedFlagSeverity.WARNING,\n        conditionJson: {\n          type: 'count',\n          category: 'ANTECEDENTES',\n          hasRedFlag: true,\n          minimum: 3,\n        },\n        message: 'ATENCAO: Paciente com multiplos fatores de risco cardiovascular.',\n      },\n      {\n        syndromeId: chestPain.id,\n        name: 'Instabilidade Hemodinamica',\n        description: 'Sinais de instabilidade hemodinamica ao exame',\n        severity: RedFlagSeverity.CRITICAL,\n        conditionJson: {\n          type: 'OR',\n          conditions: [\n            { type: 'checkbox_text', contains: 'Sudorese' },\n            { type: 'checkbox_text', contains: 'Palidez' },\n            { type: 'checkbox_text', contains: 'Estertores' },\n          ],\n        },\n        message: 'CRITICO: Sinais de instabilidade hemodinamica. Avaliacao imediata necessaria.',\n      },\n    ],\n  })\n\n  // ============================================\n  // SYNDROME 2: DISPNEIA / RESPIRATORIA\n  // ============================================\n  const dyspnea = await prisma.syndrome.create({\n    data: {\n      name: 'Dispneia',\n      code: 'DYSPNEA',\n      description: 'Dispneia / Respiratoria - Avaliacao de insuficiencia respiratoria',\n      icon: 'wind',\n      orderIndex: 2,\n    },\n  })\n\n  // Checkboxes for Dyspnea - QP\n  const dyspneaQP = [\n    { displayText: 'Falta de ar', narrativeText: 'falta de ar', isRequired: true },\n    { displayText: 'Dispneia aos esforcos', narrativeText: 'dispneia aos esforcos' },\n    { displayText: 'Dispneia em repouso', narrativeText: 'dispneia em repouso', isRedFlag: true },\n    { displayText: 'Ortopneia', narrativeText: 'ortopneia (piora ao deitar)', isRedFlag: true },\n    {\n      displayText: 'Dispneia paroxistica noturna',\n      narrativeText: 'dispneia paroxistica noturna',\n      isRedFlag: true,\n    },\n    { displayText: 'Inicio subito', narrativeText: 'inicio subito', isRedFlag: true },\n    { displayText: 'Inicio gradual', narrativeText: 'inicio gradual' },\n    { displayText: 'Piora progressiva', narrativeText: 'piora progressiva' },\n  ]\n\n  for (let i = 0; i < dyspneaQP.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: dyspnea.id,\n        category: CheckboxCategory.QP,\n        displayText: dyspneaQP[i]!.displayText,\n        narrativeText: dyspneaQP[i]!.narrativeText,\n        isRedFlag: dyspneaQP[i]!.isRedFlag || false,\n        isRequired: dyspneaQP[i]!.isRequired || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Dyspnea - HDA\n  const dyspneaHDA = [\n    { displayText: 'Tosse seca', narrativeText: 'tosse seca' },\n    { displayText: 'Tosse produtiva', narrativeText: 'tosse produtiva' },\n    { displayText: 'Expectoracao amarelada', narrativeText: 'expectoracao amarelada' },\n    { displayText: 'Expectoracao esverdeada', narrativeText: 'expectoracao esverdeada' },\n    { displayText: 'Hemoptise', narrativeText: 'hemoptise', isRedFlag: true },\n    { displayText: 'Sibilancia', narrativeText: 'chiado no peito' },\n    {\n      displayText: 'Dor toracica associada',\n      narrativeText: 'dor toracica associada',\n      isRedFlag: true,\n    },\n    { displayText: 'Febre', narrativeText: 'febre' },\n    { displayText: 'Calafrios', narrativeText: 'calafrios' },\n  ]\n\n  for (let i = 0; i < dyspneaHDA.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: dyspnea.id,\n        category: CheckboxCategory.HDA,\n        displayText: dyspneaHDA[i]!.displayText,\n        narrativeText: dyspneaHDA[i]!.narrativeText,\n        isRedFlag: dyspneaHDA[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Dyspnea - ANTECEDENTES\n  const dyspneaAntecedentes = [\n    { displayText: 'Asma', narrativeText: 'asma' },\n    { displayText: 'DPOC', narrativeText: 'doenca pulmonar obstrutiva cronica (DPOC)' },\n    {\n      displayText: 'Insuficiencia cardiaca',\n      narrativeText: 'insuficiencia cardiaca',\n      isRedFlag: true,\n    },\n    {\n      displayText: 'TEP previo',\n      narrativeText: 'tromboembolismo pulmonar previo',\n      isRedFlag: true,\n    },\n    { displayText: 'TVP previa', narrativeText: 'trombose venosa profunda previa' },\n    { displayText: 'Neoplasia', narrativeText: 'neoplasia' },\n    { displayText: 'Cirurgia recente', narrativeText: 'cirurgia recente', isRedFlag: true },\n    {\n      displayText: 'Imobilizacao prolongada',\n      narrativeText: 'imobilizacao prolongada',\n      isRedFlag: true,\n    },\n  ]\n\n  for (let i = 0; i < dyspneaAntecedentes.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: dyspnea.id,\n        category: CheckboxCategory.ANTECEDENTES,\n        displayText: dyspneaAntecedentes[i]!.displayText,\n        narrativeText: dyspneaAntecedentes[i]!.narrativeText,\n        isRedFlag: dyspneaAntecedentes[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Dyspnea - NEGATIVAS\n  const dyspneaNegativas = [\n    { displayText: 'Nega dor toracica', narrativeText: 'dor toracica', isNegative: true },\n    { displayText: 'Nega hemoptise', narrativeText: 'hemoptise', isNegative: true },\n    {\n      displayText: 'Nega edema de MMII',\n      narrativeText: 'edema de membros inferiores',\n      isNegative: true,\n    },\n    { displayText: 'Nega febre', narrativeText: 'febre', isNegative: true },\n    { displayText: 'Nega sincope', narrativeText: 'sincope', isNegative: true },\n  ]\n\n  for (let i = 0; i < dyspneaNegativas.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: dyspnea.id,\n        category: CheckboxCategory.NEGATIVAS,\n        displayText: dyspneaNegativas[i]!.displayText,\n        narrativeText: dyspneaNegativas[i]!.narrativeText,\n        isNegative: true,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Dyspnea - EXAME FISICO\n  const dyspneaExameFisico = [\n    { displayText: 'Taquipneia', narrativeText: 'taquipneia', isRedFlag: true },\n    {\n      displayText: 'Uso de musculatura acessoria',\n      narrativeText: 'uso de musculatura acessoria',\n      isRedFlag: true,\n    },\n    { displayText: 'Tiragem intercostal', narrativeText: 'tiragem intercostal', isRedFlag: true },\n    { displayText: 'Cianose', narrativeText: 'cianose', isRedFlag: true },\n    {\n      displayText: 'SpO2 < 90%',\n      narrativeText: 'saturacao de oxigenio abaixo de 90%',\n      isRedFlag: true,\n    },\n    { displayText: 'SpO2 90-94%', narrativeText: 'saturacao de oxigenio entre 90-94%' },\n    { displayText: 'SpO2 > 94%', narrativeText: 'saturacao de oxigenio acima de 94%' },\n    { displayText: 'Sibilos difusos', narrativeText: 'sibilos difusos a ausculta' },\n    {\n      displayText: 'Estertores crepitantes',\n      narrativeText: 'estertores crepitantes',\n      isRedFlag: true,\n    },\n    { displayText: 'MV diminuido', narrativeText: 'murmuro vesicular diminuido' },\n    { displayText: 'MV abolido', narrativeText: 'murmuro vesicular abolido', isRedFlag: true },\n    {\n      displayText: 'Exame pulmonar sem alteracoes',\n      narrativeText: 'exame pulmonar sem alteracoes',\n    },\n  ]\n\n  for (let i = 0; i < dyspneaExameFisico.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: dyspnea.id,\n        category: CheckboxCategory.EXAME_FISICO,\n        displayText: dyspneaExameFisico[i]!.displayText,\n        narrativeText: dyspneaExameFisico[i]!.narrativeText,\n        isRedFlag: dyspneaExameFisico[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Red Flag Rules for Dyspnea\n  await prisma.redFlagRule.createMany({\n    data: [\n      {\n        syndromeId: dyspnea.id,\n        name: 'Insuficiencia Respiratoria Grave',\n        description: 'Sinais de insuficiencia respiratoria grave',\n        severity: RedFlagSeverity.CRITICAL,\n        conditionJson: {\n          type: 'OR',\n          conditions: [\n            { type: 'checkbox_text', contains: 'Cianose' },\n            { type: 'checkbox_text', contains: 'SpO2 < 90%' },\n            { type: 'checkbox_text', contains: 'musculatura acessoria' },\n          ],\n        },\n        message:\n          'CRITICO: Sinais de insuficiencia respiratoria grave. Suporte ventilatorio imediato.',\n      },\n      {\n        syndromeId: dyspnea.id,\n        name: 'Risco de TEP',\n        description: 'Fatores de risco para tromboembolismo pulmonar',\n        severity: RedFlagSeverity.WARNING,\n        conditionJson: {\n          type: 'AND',\n          conditions: [\n            { type: 'checkbox_text', contains: 'subito' },\n            {\n              type: 'OR',\n              conditions: [\n                { type: 'checkbox_text', contains: 'cirurgia' },\n                { type: 'checkbox_text', contains: 'imobilizacao' },\n                { type: 'checkbox_text', contains: 'TEP' },\n              ],\n            },\n          ],\n        },\n        message: 'ATENCAO: Considerar tromboembolismo pulmonar. Avaliar escore de Wells.',\n      },\n    ],\n  })\n\n  // ============================================\n  // SYNDROME 3: ABDOME AGUDO\n  // ============================================\n  const acuteAbdomen = await prisma.syndrome.create({\n    data: {\n      name: 'Abdome Agudo',\n      code: 'ACUTE_ABDOMEN',\n      description: 'Abdome Agudo - Avaliacao de emergencia abdominal',\n      icon: 'activity',\n      orderIndex: 3,\n    },\n  })\n\n  // Checkboxes for Acute Abdomen - QP\n  const abdomenQP = [\n    { displayText: 'Dor abdominal', narrativeText: 'dor abdominal', isRequired: true },\n    {\n      displayText: 'Localizacao em FID',\n      narrativeText: 'localizacao em fossa iliaca direita',\n      isRedFlag: true,\n    },\n    { displayText: 'Localizacao em FIE', narrativeText: 'localizacao em fossa iliaca esquerda' },\n    { displayText: 'Localizacao epigastrica', narrativeText: 'localizacao epigastrica' },\n    { displayText: 'Localizacao periumbilical', narrativeText: 'localizacao periumbilical' },\n    { displayText: 'Localizacao difusa', narrativeText: 'localizacao difusa', isRedFlag: true },\n    { displayText: 'Dor em colica', narrativeText: 'carater em colica' },\n    { displayText: 'Dor continua', narrativeText: 'carater continuo', isRedFlag: true },\n    { displayText: 'Inicio subito', narrativeText: 'inicio subito', isRedFlag: true },\n    { displayText: 'Inicio gradual', narrativeText: 'inicio gradual' },\n  ]\n\n  for (let i = 0; i < abdomenQP.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: acuteAbdomen.id,\n        category: CheckboxCategory.QP,\n        displayText: abdomenQP[i]!.displayText,\n        narrativeText: abdomenQP[i]!.narrativeText,\n        isRedFlag: abdomenQP[i]!.isRedFlag || false,\n        isRequired: abdomenQP[i]!.isRequired || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Acute Abdomen - HDA\n  const abdomenHDA = [\n    { displayText: 'Nauseas', narrativeText: 'nauseas' },\n    { displayText: 'Vomitos', narrativeText: 'vomitos' },\n    { displayText: 'Vomitos biliosos', narrativeText: 'vomitos de conteudo bilioso' },\n    { displayText: 'Vomitos fecaloides', narrativeText: 'vomitos fecaloides', isRedFlag: true },\n    { displayText: 'Anorexia', narrativeText: 'anorexia' },\n    { displayText: 'Febre', narrativeText: 'febre', isRedFlag: true },\n    { displayText: 'Diarreia', narrativeText: 'diarreia' },\n    { displayText: 'Constipacao', narrativeText: 'constipacao' },\n    {\n      displayText: 'Parada de eliminacao de gases',\n      narrativeText: 'parada de eliminacao de gases e fezes',\n      isRedFlag: true,\n    },\n    { displayText: 'Hematoquezia', narrativeText: 'sangramento retal', isRedFlag: true },\n    { displayText: 'Melena', narrativeText: 'melena (fezes escurecidas)', isRedFlag: true },\n    { displayText: 'Disuria', narrativeText: 'disuria' },\n  ]\n\n  for (let i = 0; i < abdomenHDA.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: acuteAbdomen.id,\n        category: CheckboxCategory.HDA,\n        displayText: abdomenHDA[i]!.displayText,\n        narrativeText: abdomenHDA[i]!.narrativeText,\n        isRedFlag: abdomenHDA[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Acute Abdomen - ANTECEDENTES\n  const abdomenAntecedentes = [\n    { displayText: 'Cirurgia abdominal previa', narrativeText: 'cirurgia abdominal previa' },\n    { displayText: 'Apendicectomia', narrativeText: 'apendicectomia previa' },\n    { displayText: 'Colecistectomia', narrativeText: 'colecistectomia previa' },\n    { displayText: 'Hernia', narrativeText: 'hernia' },\n    { displayText: 'Ulcera peptica', narrativeText: 'ulcera peptica' },\n    { displayText: 'Doenca hepatica', narrativeText: 'doenca hepatica' },\n    { displayText: 'Pancreatite previa', narrativeText: 'pancreatite previa' },\n    { displayText: 'Colelitiase', narrativeText: 'colelitiase' },\n  ]\n\n  for (let i = 0; i < abdomenAntecedentes.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: acuteAbdomen.id,\n        category: CheckboxCategory.ANTECEDENTES,\n        displayText: abdomenAntecedentes[i]!.displayText,\n        narrativeText: abdomenAntecedentes[i]!.narrativeText,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Acute Abdomen - NEGATIVAS\n  const abdomenNegativas = [\n    { displayText: 'Nega vomitos', narrativeText: 'vomitos', isNegative: true },\n    { displayText: 'Nega diarreia', narrativeText: 'diarreia', isNegative: true },\n    { displayText: 'Nega febre', narrativeText: 'febre', isNegative: true },\n    { displayText: 'Nega hematoquezia', narrativeText: 'sangramento retal', isNegative: true },\n    { displayText: 'Nega melena', narrativeText: 'melena', isNegative: true },\n    { displayText: 'Nega disuria', narrativeText: 'disuria', isNegative: true },\n    {\n      displayText: 'Evacuacoes presentes',\n      narrativeText: 'evacuacoes presentes',\n      isNegative: true,\n    },\n  ]\n\n  for (let i = 0; i < abdomenNegativas.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: acuteAbdomen.id,\n        category: CheckboxCategory.NEGATIVAS,\n        displayText: abdomenNegativas[i]!.displayText,\n        narrativeText: abdomenNegativas[i]!.narrativeText,\n        isNegative: true,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Checkboxes for Acute Abdomen - EXAME FISICO\n  const abdomenExameFisico = [\n    { displayText: 'Abdome plano', narrativeText: 'abdome plano' },\n    { displayText: 'Abdome distendido', narrativeText: 'abdome distendido', isRedFlag: true },\n    { displayText: 'RHA presentes', narrativeText: 'ruidos hidroaereos presentes' },\n    { displayText: 'RHA diminuidos', narrativeText: 'ruidos hidroaereos diminuidos' },\n    { displayText: 'RHA ausentes', narrativeText: 'ruidos hidroaereos ausentes', isRedFlag: true },\n    { displayText: 'RHA aumentados', narrativeText: 'ruidos hidroaereos aumentados' },\n    { displayText: 'Dor a palpacao superficial', narrativeText: 'dor a palpacao superficial' },\n    { displayText: 'Dor a palpacao profunda', narrativeText: 'dor a palpacao profunda' },\n    { displayText: 'Defesa abdominal', narrativeText: 'defesa abdominal', isRedFlag: true },\n    { displayText: 'Abdome em tabua', narrativeText: 'abdome em tabua (rigidez)', isRedFlag: true },\n    {\n      displayText: 'Descompressao brusca positiva',\n      narrativeText: 'descompressao brusca dolorosa (Blumberg positivo)',\n      isRedFlag: true,\n    },\n    { displayText: 'Sinal de Murphy positivo', narrativeText: 'sinal de Murphy positivo' },\n    { displayText: 'Sinal de Rovsing positivo', narrativeText: 'sinal de Rovsing positivo' },\n    { displayText: 'Massa palpavel', narrativeText: 'massa palpavel', isRedFlag: true },\n    { displayText: 'Hernia visivel', narrativeText: 'hernia visivel ao exame' },\n    {\n      displayText: 'Sem alteracoes ao exame',\n      narrativeText: 'exame abdominal sem alteracoes significativas',\n    },\n  ]\n\n  for (let i = 0; i < abdomenExameFisico.length; i++) {\n    await prisma.checkbox.create({\n      data: {\n        syndromeId: acuteAbdomen.id,\n        category: CheckboxCategory.EXAME_FISICO,\n        displayText: abdomenExameFisico[i]!.displayText,\n        narrativeText: abdomenExameFisico[i]!.narrativeText,\n        isRedFlag: abdomenExameFisico[i]!.isRedFlag || false,\n        orderIndex: i + 1,\n      },\n    })\n  }\n\n  // Red Flag Rules for Acute Abdomen\n  await prisma.redFlagRule.createMany({\n    data: [\n      {\n        syndromeId: acuteAbdomen.id,\n        name: 'Abdome Agudo Cirurgico',\n        description: 'Sinais sugestivos de abdome agudo cirurgico',\n        severity: RedFlagSeverity.CRITICAL,\n        conditionJson: {\n          type: 'OR',\n          conditions: [\n            { type: 'checkbox_text', contains: 'tabua' },\n            { type: 'checkbox_text', contains: 'Defesa abdominal' },\n            { type: 'checkbox_text', contains: 'Blumberg' },\n          ],\n        },\n        message: 'CRITICO: Sinais de irritacao peritoneal. Avaliacao cirurgica urgente.',\n      },\n      {\n        syndromeId: acuteAbdomen.id,\n        name: 'Obstrucao Intestinal',\n        description: 'Sinais sugestivos de obstrucao intestinal',\n        severity: RedFlagSeverity.CRITICAL,\n        conditionJson: {\n          type: 'AND',\n          conditions: [\n            { type: 'checkbox_text', contains: 'distendido' },\n            {\n              type: 'OR',\n              conditions: [\n                { type: 'checkbox_text', contains: 'RHA ausentes' },\n                { type: 'checkbox_text', contains: 'parada de eliminacao' },\n                { type: 'checkbox_text', contains: 'fecaloides' },\n              ],\n            },\n          ],\n        },\n        message: 'CRITICO: Suspeita de obstrucao intestinal. Considerar sondagem e imagem.',\n      },\n      {\n        syndromeId: acuteAbdomen.id,\n        name: 'Apendicite Suspeita',\n        description: 'Quadro sugestivo de apendicite aguda',\n        severity: RedFlagSeverity.WARNING,\n        conditionJson: {\n          type: 'AND',\n          conditions: [\n            { type: 'checkbox_text', contains: 'FID' },\n            {\n              type: 'OR',\n              conditions: [\n                { type: 'checkbox_text', contains: 'febre' },\n                { type: 'checkbox_text', contains: 'anorexia' },\n              ],\n            },\n          ],\n        },\n        message: 'ATENCAO: Quadro sugestivo de apendicite aguda. Considerar escore de Alvarado.',\n      },\n    ],\n  })\n\n  console.log('Seeding completed!')\n  console.log(`Created syndromes: ${await prisma.syndrome.count()}`)\n  console.log(`Created checkboxes: ${await prisma.checkbox.count()}`)\n  console.log(`Created red flag rules: ${await prisma.redFlagRule.count()}`)\n}\n\nmain()\n  .catch((e) => {\n    console.error(e)\n    process.exit(1)\n  })\n  .finally(async () => {\n    await prisma.$disconnect()\n  })\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/create-admin-user.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":29,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":29,"endColumn":14,"suggestions":[{"fix":{"range":[869,913],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":45,"endColumn":18,"suggestions":[{"fix":{"range":[1346,1389],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":46,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":46,"endColumn":18,"suggestions":[{"fix":{"range":[1396,1435],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":47,"endColumn":18,"suggestions":[{"fix":{"range":[1442,1482],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":48,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":48,"endColumn":18,"suggestions":[{"fix":{"range":[1489,1555],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":53,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":69,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":69,"endColumn":16,"suggestions":[{"fix":{"range":[2034,2086],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":70,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":70,"endColumn":16,"suggestions":[{"fix":{"range":[2091,2128],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":71,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":71,"endColumn":16,"suggestions":[{"fix":{"range":[2133,2173],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":72,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":72,"endColumn":16,"suggestions":[{"fix":{"range":[2178,2218],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":73,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":73,"endColumn":16,"suggestions":[{"fix":{"range":[2223,2278],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":74,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":74,"endColumn":16,"suggestions":[{"fix":{"range":[2283,2349],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":75,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":75,"endColumn":16,"suggestions":[{"fix":{"range":[2354,2409],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * Script para criar um usuário admin no Supabase\n * \n * Uso: pnpm tsx scripts/create-admin-user.ts\n */\n\nimport { createClient } from '@supabase/supabase-js'\nimport 'dotenv/config'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\n\nif (!supabaseUrl || !supabaseServiceKey) {\n  console.error('❌ Erro: Variáveis de ambiente necessárias não encontradas!')\n  console.error('   NEXT_PUBLIC_SUPABASE_URL:', supabaseUrl ? '✓' : '✗')\n  console.error('   SUPABASE_SERVICE_ROLE_KEY:', supabaseServiceKey ? '✓' : '✗')\n  process.exit(1)\n}\n\n// Credenciais do admin\nconst ADMIN_EMAIL = 'admin@wellwave.com'\nconst ADMIN_PASSWORD = 'admin123456'\nconst ADMIN_FULL_NAME = 'Administrador WellWave'\nconst ADMIN_CRM = '000000'\nconst ADMIN_CRM_STATE = 'SP'\n\nasync function createAdminUser() {\n  console.log('🚀 Criando usuário admin...\\n')\n\n  // Criar cliente admin do Supabase\n  const supabase = createClient(supabaseUrl, supabaseServiceKey, {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false,\n    },\n  })\n\n  try {\n    // Primeiro, verificar se o usuário já existe\n    const { data: existingUsers } = await supabase.auth.admin.listUsers()\n    const userExists = existingUsers?.users.find((u) => u.email === ADMIN_EMAIL)\n\n    if (userExists) {\n      console.log('⚠️  Usuário admin já existe!')\n      console.log('\\n📧 Email:', ADMIN_EMAIL)\n      console.log('🔑 Senha:', ADMIN_PASSWORD)\n      console.log('\\n✅ Você já pode fazer login com estas credenciais!')\n      return\n    }\n\n    // Criar usuário admin\n    const { data, error } = await supabase.auth.admin.createUser({\n      email: ADMIN_EMAIL,\n      password: ADMIN_PASSWORD,\n      email_confirm: true, // Email já confirmado\n      user_metadata: {\n        full_name: ADMIN_FULL_NAME,\n        crm_number: ADMIN_CRM,\n        crm_state: ADMIN_CRM_STATE,\n      },\n    })\n\n    if (error) {\n      console.error('❌ Erro ao criar usuário:', error.message)\n      process.exit(1)\n    }\n\n    console.log('✅ Usuário admin criado com sucesso!\\n')\n    console.log('📧 Email:', ADMIN_EMAIL)\n    console.log('🔑 Senha:', ADMIN_PASSWORD)\n    console.log('👤 Nome:', ADMIN_FULL_NAME)\n    console.log('🏥 CRM:', ADMIN_CRM, '-', ADMIN_CRM_STATE)\n    console.log('\\n✨ Você já pode fazer login com estas credenciais!')\n    console.log('🔗 Acesse: http://localhost:3001/login\\n')\n  } catch (error) {\n    console.error('❌ Erro inesperado:', error)\n    process.exit(1)\n  }\n}\n\ncreateAdminUser()\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/generate-social-images.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":24,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":24,"endColumn":14,"suggestions":[{"fix":{"range":[458,516],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":92,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":92,"endColumn":14,"suggestions":[{"fix":{"range":[2465,2526],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":96,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":96,"endColumn":14,"suggestions":[{"fix":{"range":[2570,2631],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":154,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":154,"endColumn":14,"suggestions":[{"fix":{"range":[4322,4391],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":161,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":161,"endColumn":16,"suggestions":[{"fix":{"range":[4490,4560],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n\n/**\n * Script para gerar imagens sociais (OpenGraph e Twitter Cards)\n * usando canvas em Node.js\n */\n\nconst { createCanvas, loadImage } = require('canvas');\nconst fs = require('fs');\nconst path = require('path');\n\nconst COLORS = {\n  primary: '#0ea5e9', // sky-500\n  secondary: '#06b6d4', // cyan-500\n  dark: '#0a0a0a',\n  light: '#ffffff',\n  gradient: {\n    start: '#0ea5e9',\n    end: '#06b6d4'\n  }\n};\n\nasync function createOGImage() {\n  console.log('🎨 Criando OpenGraph image (1200x630px)...');\n\n  const width = 1200;\n  const height = 630;\n  const canvas = createCanvas(width, height);\n  const ctx = canvas.getContext('2d');\n\n  // Gradient background\n  const gradient = ctx.createLinearGradient(0, 0, width, height);\n  gradient.addColorStop(0, COLORS.gradient.start);\n  gradient.addColorStop(1, COLORS.gradient.end);\n\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, width, height);\n\n  // Logo\n  try {\n    const logo = await loadImage(path.join(__dirname, '../public/logo-wellwave.png'));\n    const logoSize = 200;\n    const logoX = 80;\n    const logoY = (height - logoSize) / 2;\n\n    // Logo shadow\n    ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';\n    ctx.shadowBlur = 20;\n    ctx.shadowOffsetX = 0;\n    ctx.shadowOffsetY = 10;\n\n    ctx.drawImage(logo, logoX, logoY, logoSize, logoSize);\n\n    // Reset shadow\n    ctx.shadowColor = 'transparent';\n    ctx.shadowBlur = 0;\n  } catch (error) {\n    console.warn('⚠️  Logo não encontrado, continuando sem logo', error);\n  }\n\n  // Text content\n  const textX = 320;\n\n  // Title\n  ctx.fillStyle = COLORS.light;\n  ctx.font = 'bold 64px -apple-system, system-ui, sans-serif';\n  ctx.fillText('WellWave', textX, 250);\n\n  // Subtitle\n  ctx.font = '32px -apple-system, system-ui, sans-serif';\n  ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n  ctx.fillText('Sistema de Anamnese Médica', textX, 310);\n\n  // Description\n  ctx.font = '24px -apple-system, system-ui, sans-serif';\n  ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';\n  ctx.fillText('Documentação clínica em 90 segundos', textX, 360);\n\n  // Badge\n  ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';\n  ctx.beginPath();\n  ctx.roundRect(textX, 400, 280, 50, 25);\n  ctx.fill();\n\n  ctx.fillStyle = COLORS.light;\n  ctx.font = 'bold 20px -apple-system, system-ui, sans-serif';\n  ctx.fillText('✓ CFM Compliance  ✓ LGPD', textX + 20, 432);\n\n  // Save\n  const buffer = canvas.toBuffer('image/png');\n  fs.writeFileSync(path.join(__dirname, '../public/og-image.png'), buffer);\n  console.log('✅ OpenGraph image criada: public/og-image.png');\n}\n\nasync function createTwitterImage() {\n  console.log('🎨 Criando Twitter Card image (1200x600px)...');\n\n  const width = 1200;\n  const height = 600;\n  const canvas = createCanvas(width, height);\n  const ctx = canvas.getContext('2d');\n\n  // Gradient background (slightly different for variety)\n  const gradient = ctx.createLinearGradient(0, 0, 0, height);\n  gradient.addColorStop(0, COLORS.gradient.start);\n  gradient.addColorStop(1, COLORS.gradient.end);\n\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, width, height);\n\n  // Logo\n  try {\n    const logo = await loadImage(path.join(__dirname, '../public/logo-wellwave.png'));\n    const logoSize = 180;\n    const logoX = 80;\n    const logoY = (height - logoSize) / 2;\n\n    ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';\n    ctx.shadowBlur = 20;\n    ctx.shadowOffsetX = 0;\n    ctx.shadowOffsetY = 10;\n\n    ctx.drawImage(logo, logoX, logoY, logoSize, logoSize);\n\n    ctx.shadowColor = 'transparent';\n    ctx.shadowBlur = 0;\n  } catch (error) {\n    console.warn('⚠️  Logo não encontrado, continuando sem logo', error);\n  }\n\n  // Text content\n  const textX = 300;\n\n  // Title\n  ctx.fillStyle = COLORS.light;\n  ctx.font = 'bold 60px -apple-system, system-ui, sans-serif';\n  ctx.fillText('WellWave', textX, 240);\n\n  // Subtitle\n  ctx.font = '28px -apple-system, system-ui, sans-serif';\n  ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';\n  ctx.fillText('Anamnese Inteligente', textX, 290);\n\n  // Stats\n  ctx.font = 'bold 24px -apple-system, system-ui, sans-serif';\n  ctx.fillStyle = COLORS.light;\n  ctx.fillText('⚡ 90s', textX, 360);\n  ctx.fillText('🔒 CFM', textX + 150, 360);\n  ctx.fillText('✓ LGPD', textX + 300, 360);\n\n  // Save\n  const buffer = canvas.toBuffer('image/png');\n  fs.writeFileSync(path.join(__dirname, '../public/twitter-image.png'), buffer);\n  console.log('✅ Twitter Card image criada: public/twitter-image.png');\n}\n\nasync function main() {\n  try {\n    await createOGImage();\n    await createTwitterImage();\n    console.log('🎉 Todas as imagens sociais foram criadas com sucesso!');\n  } catch (error) {\n    console.error('❌ Erro ao criar imagens:', error);\n    process.exit(1);\n  }\n}\n\nmain();\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/db-to-obsidian.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":94,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":94,"endColumn":14,"suggestions":[{"fix":{"range":[2087,2158],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":115,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":115,"endColumn":16,"suggestions":[{"fix":{"range":[2545,2604],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":152,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":152,"endColumn":20,"suggestions":[{"fix":{"range":[3562,3626],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":159,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":159,"endColumn":16,"suggestions":[{"fix":{"range":[3750,3808],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":165,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":165,"endColumn":14,"suggestions":[{"fix":{"range":[3908,3947],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":166,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":166,"endColumn":14,"suggestions":[{"fix":{"range":[3950,4005],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":167,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":167,"endColumn":14,"suggestions":[{"fix":{"range":[4008,4064],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":168,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":168,"endColumn":14,"suggestions":[{"fix":{"range":[4067,4123],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":169,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":169,"endColumn":14,"suggestions":[{"fix":{"range":[4126,4183],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * Sincroniza dados do banco de dados → Obsidian\n *\n * Uso: npm run sync:push\n */\n\nimport 'dotenv/config'\nimport fs from 'fs'\nimport path from 'path'\nimport chalk from 'chalk'\nimport type { Prisma } from '@prisma/client'\nimport { prisma } from '../../lib/db/prisma'\nimport { mapDbComplaintToApiPayload } from '../../lib/db/complaints'\nimport { PATHS } from './utils/config'\nimport { readObsidianFile } from './utils/sync-helpers'\nimport { renderComplaintMarkdown } from './utils/obsidian-render'\n\nconst GROUP_FOLDER_MAP: Record<string, string> = {\n  CV: 'CV - Cardiovascular',\n  RC: 'RC - Respiratório',\n  NC: 'NC - Neurológico',\n  GI: 'GI - Digestivo',\n  GU: 'GU - Urinário',\n  MSK: 'MSK - Osteomuscular',\n  INF: 'INF - Infecção',\n  OBG: 'OBG - Ginecologia',\n  PED: 'PED - Pediatria',\n  PSI: 'PSI - Saúde Mental',\n  TR: 'TR - Trauma',\n  TOX: 'TOX - Intoxicação',\n  DERM: 'DERM - Pele',\n  ORL: 'ORL - Otorrino',\n  OFT: 'OFT - Oftalmologia',\n  ENV: 'ENV - Exposição',\n  GEN: 'GEN - Geral',\n}\n\ninterface SyncOptions {\n  since?: Date\n  limit?: number\n}\n\ninterface SyncResult {\n  updated: number\n  skipped: number\n  conflicts: number\n  lastSyncAt: string | null\n}\n\nfunction getObsidianPath(id: string, groupCode: string): string {\n  const folderName = GROUP_FOLDER_MAP[groupCode] || groupCode\n  const folder = path.join(PATHS.queixas, folderName)\n\n  if (!fs.existsSync(folder)) {\n    fs.mkdirSync(folder, { recursive: true })\n  }\n\n  return path.join(folder, `${id}.md`)\n}\n\nfunction writeConflictFile(\n  filePath: string,\n  reason: string,\n  dbContent: string,\n  localContent: string\n): void {\n  const dir = path.dirname(filePath)\n  const baseName = path.basename(filePath, '.md')\n  const conflictPath = path.join(dir, `${baseName}-CONFLICT.md`)\n\n  const content = `# CONFLITO DE SINCRONIZACAO: ${baseName}\n\n## Motivo\n${reason}\n\n## Versao do banco (DB)\n\n${dbContent}\n\n---\n\n## Versao local (Obsidian)\n\n${localContent}\n`\n\n  fs.writeFileSync(conflictPath, content, 'utf-8')\n}\n\nexport async function syncDBToObsidian(\n  options: SyncOptions = {}\n): Promise<SyncResult> {\n  console.log(chalk.blue('\\n🔄 Iniciando sincronizacao DB → Obsidian\\n'))\n\n  const where: Prisma.chief_complaintsWhereInput = {}\n  if (options.since) {\n    where.updated_at = {\n      gt: options.since,\n    }\n  }\n\n  const records = await prisma.chief_complaints.findMany({\n    where,\n    include: {\n      chief_complaint_groups: true,\n    },\n    orderBy: {\n      updated_at: 'asc',\n    },\n    take: options.limit ?? 200,\n  })\n\n  if (records.length === 0) {\n    console.log(chalk.gray('   Nenhuma alteracao encontrada.'))\n    return {\n      updated: 0,\n      skipped: 0,\n      conflicts: 0,\n      lastSyncAt: options.since?.toISOString() ?? null,\n    }\n  }\n\n  let updated = 0\n  let skipped = 0\n  let conflicts = 0\n\n  for (const record of records) {\n    const payload = mapDbComplaintToApiPayload(record)\n    const targetPath = getObsidianPath(payload.id, payload.group)\n    const rendered = renderComplaintMarkdown(payload, { syncSource: 'system' })\n\n    if (fs.existsSync(targetPath)) {\n      const { contentHash, raw } = readObsidianFile(targetPath)\n      const dbHash = rendered.contentHash\n\n      if (contentHash === dbHash) {\n        skipped += 1\n        continue\n      }\n\n      const fileStats = fs.statSync(targetPath)\n      const fileModified = fileStats.mtime\n\n      if (fileModified > record.updated_at) {\n        writeConflictFile(\n          targetPath,\n          'Arquivo local mais recente que o DB.',\n          rendered.fullContent,\n          raw\n        )\n        console.log(chalk.red(`   ⚠ Conflito detectado: ${payload.id}`))\n        conflicts += 1\n        continue\n      }\n    }\n\n    fs.writeFileSync(targetPath, rendered.fullContent, 'utf-8')\n    console.log(chalk.green(`   ✓ Atualizado: ${payload.id}`))\n    updated += 1\n  }\n\n  const lastSyncAt = records[records.length - 1].updated_at.toISOString()\n\n  console.log(chalk.blue('\\n📊 Resumo:'))\n  console.log(chalk.green(`   ✓ ${updated} atualizados`))\n  console.log(chalk.gray(`   = ${skipped} sem alteracao`))\n  console.log(chalk.yellow(`   ⚠ ${conflicts} conflitos`))\n  console.log(chalk.blue(`\\n✅ Sincronizacao concluida!\\n`))\n\n  return { updated, skipped, conflicts, lastSyncAt }\n}\n\nasync function main(): Promise<void> {\n  try {\n    await syncDBToObsidian()\n  } finally {\n    await prisma.$disconnect()\n  }\n}\n\nconst isMain = process.argv[1]?.endsWith('db-to-obsidian.ts')\nif (isMain) {\n  main().catch(console.error)\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/generate-checkboxes.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":315,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":315,"endColumn":14,"suggestions":[{"fix":{"range":[11894,11960],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":318,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":318,"endColumn":14,"suggestions":[{"fix":{"range":[12020,12071],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":320,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":320,"endColumn":14,"suggestions":[{"fix":{"range":[12113,12155],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":345,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":345,"endColumn":16,"suggestions":[{"fix":{"range":[12795,12885],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":369,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":369,"endColumn":18,"suggestions":[{"fix":{"range":[13509,13573],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":385,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":385,"endColumn":14,"suggestions":[{"fix":{"range":[13873,13910],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":386,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":386,"endColumn":14,"suggestions":[{"fix":{"range":[13913,13978],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":387,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":387,"endColumn":14,"suggestions":[{"fix":{"range":[13981,14035],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Gerador de Checkboxes para o Banco de Dados\n *\n * Este script transforma os dados de complaintsData.ts (sincronizados do Obsidian)\n * em registros de Syndrome e Checkbox no banco de dados PostgreSQL.\n *\n * Usa templates de narrativa médica técnica para gerar texto corrido\n * com terminologia profissional e proteção jurídica implícita.\n *\n * Uso: npx tsx scripts/sync/generate-checkboxes.ts\n */\n\nimport { PrismaClient, CheckboxCategory } from '@prisma/client'\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport { complaintsData } from '../../lib/data/complaintsData'\nimport {\n  toMedicalNarrative,\n  RED_FLAG_NARRATIVES,\n  buildNarrativeText,\n  COMPLETE_NARRATIVES,\n} from '../../lib/anamnese/narrative-templates'\n\n// Configuração do Prisma com adapter\nconst adapter = new PrismaPg({ connectionString: process.env.DATABASE_URL })\nconst prisma = new PrismaClient({ adapter })\n\n// Mapeamento de grupos para nomes de Syndrome\nconst GROUP_TO_SYNDROME: Record<string, { name: string; code: string; description: string; icon: string }> = {\n  'CV': {\n    name: 'Cardiovascular',\n    code: 'CV',\n    description: 'Síndromes cardiovasculares - dor torácica, palpitações, síncope',\n    icon: 'heart'\n  },\n  'RESP': {\n    name: 'Respiratório',\n    code: 'RESP',\n    description: 'Síndromes respiratórias - dispneia, tosse, dor torácica pleurítica',\n    icon: 'wind'\n  },\n  'NEURO': {\n    name: 'Neurológico',\n    code: 'NEURO',\n    description: 'Síndromes neurológicas - cefaleia, déficit focal, alteração de consciência',\n    icon: 'brain'\n  },\n  'GI': {\n    name: 'Gastrointestinal',\n    code: 'GI',\n    description: 'Síndromes gastrointestinais - dor abdominal, náusea, vômito',\n    icon: 'utensils'\n  },\n  'URO': {\n    name: 'Urológico',\n    code: 'URO',\n    description: 'Síndromes urológicas - disúria, hematúria, cólica renal',\n    icon: 'droplet'\n  },\n  'GYN': {\n    name: 'Ginecológico',\n    code: 'GYN',\n    description: 'Síndromes ginecológicas - dor pélvica, sangramento vaginal',\n    icon: 'female'\n  },\n  'MSK': {\n    name: 'Musculoesquelético',\n    code: 'MSK',\n    description: 'Síndromes musculoesqueléticas - dor, trauma, artralgia',\n    icon: 'bone'\n  },\n  'DERM': {\n    name: 'Dermatológico',\n    code: 'DERM',\n    description: 'Síndromes dermatológicas - rash, lesões cutâneas',\n    icon: 'circle'\n  },\n  'PSYCH': {\n    name: 'Psiquiátrico',\n    code: 'PSYCH',\n    description: 'Síndromes psiquiátricas - ansiedade, agitação, ideação suicida',\n    icon: 'brain-circuit'\n  },\n  'INF': {\n    name: 'Infectológico',\n    code: 'INF',\n    description: 'Síndromes infecciosas - febre, sepse, infecções localizadas',\n    icon: 'bug'\n  },\n  'TRAUMA': {\n    name: 'Trauma',\n    code: 'TRAUMA',\n    description: 'Síndromes traumáticas - TCE, politrauma, ferimentos',\n    icon: 'alert-triangle'\n  },\n  'PED': {\n    name: 'Pediátrico',\n    code: 'PED',\n    description: 'Síndromes pediátricas específicas',\n    icon: 'baby'\n  },\n  'GERAL': {\n    name: 'Geral',\n    code: 'GERAL',\n    description: 'Queixas gerais - mal-estar, fadiga, febre',\n    icon: 'activity'\n  }\n}\n\ninterface CheckboxData {\n  category: CheckboxCategory\n  displayText: string\n  narrativeText: string\n  isRequired: boolean\n  isRedFlag: boolean\n  isNegative: boolean\n  orderIndex: number\n}\n\n/**\n * Obtém narrativa técnica completa para um sintoma/achado\n * Usa COMPLETE_NARRATIVES quando disponível, senão gera via toMedicalNarrative\n */\nfunction getNarrativeText(displayText: string, category: CheckboxCategory, isRedFlag: boolean = false): string {\n  // Primeiro tenta usar narrativa pré-definida\n  const complete = COMPLETE_NARRATIVES[displayText]\n  if (complete) {\n    return complete.narrative\n  }\n\n  // Fallback para geração automática\n  return buildNarrativeText(displayText, category, isRedFlag)\n}\n\n/**\n * Gera checkboxes a partir de uma queixa usando templates de narrativa médica\n * Padrão de escrita:\n * - Refere: sintomas relatados (HDA)\n * - Apresenta: achados clínicos ativos (EXAME_FISICO)\n * - Evidencia: sinais objetivos do exame\n * - História de: antecedentes\n * - Nega: negativas pertinentes\n */\nfunction generateCheckboxesFromComplaint(complaint: typeof complaintsData.complaints[0]): CheckboxData[] {\n  const checkboxes: CheckboxData[] = []\n  let orderIndex = 0\n\n  // 1. Queixa Principal (QP) - Texto técnico com contexto de atendimento\n  const qpNarrative = toMedicalNarrative(complaint.title, 'QP', false)\n  checkboxes.push({\n    category: 'QP' as CheckboxCategory,\n    displayText: complaint.title,\n    narrativeText: qpNarrative,\n    isRequired: true,\n    isRedFlag: false,\n    isNegative: false,\n    orderIndex: orderIndex++\n  })\n\n  // 2. Sintomas Relacionados (HDA) - Usando terminologia médica técnica\n  const relatedSymptoms = complaint.relatedSymptoms || []\n  for (const symptom of relatedSymptoms) {\n    const narrativeText = getNarrativeText(symptom, 'HDA', false)\n    checkboxes.push({\n      category: 'HDA' as CheckboxCategory,\n      displayText: symptom,\n      narrativeText: narrativeText,\n      isRequired: false,\n      isRedFlag: false,\n      isNegative: false,\n      orderIndex: orderIndex++\n    })\n  }\n\n  // 3. Red Flags (HDA com isRedFlag = true) - Com contexto clínico completo\n  const redFlags = complaint.extendedContent?.redFlags || []\n  for (const redFlag of redFlags) {\n    const cleanRedFlag = redFlag.replace(/^⚠️\\s*/, '').trim()\n\n    // Usa narrativa específica do dicionário ou gera uma técnica\n    const narrativeText = RED_FLAG_NARRATIVES[cleanRedFlag] ||\n      getNarrativeText(cleanRedFlag, 'HDA', true)\n\n    checkboxes.push({\n      category: 'HDA' as CheckboxCategory,\n      displayText: `⚠️ ${cleanRedFlag}`,\n      narrativeText: `ALERTA: ${narrativeText}`,\n      isRequired: false,\n      isRedFlag: true,\n      isNegative: false,\n      orderIndex: orderIndex++\n    })\n  }\n\n  // 4. Exame Físico - Achados e Sinais (Apresenta / Evidencia)\n  const exameFisico = [\n    // Achados clínicos ativos (Apresenta)\n    { display: 'Defesa abdominal', narrative: 'defesa abdominal à palpação' },\n    { display: 'Rigidez abdominal', narrative: 'rigidez abdominal' },\n    { display: 'Dor à palpação', narrative: 'dor à palpação' },\n    { display: 'Abdome distendido', narrative: 'abdome distendido' },\n    { display: 'Ruídos hidroaéreos aumentados', narrative: 'ruídos hidroaéreos aumentados' },\n    { display: 'Ruídos hidroaéreos diminuídos', narrative: 'ruídos hidroaéreos diminuídos' },\n    { display: 'Taquicardia ao exame', narrative: 'taquicardia' },\n    { display: 'Hipotensão', narrative: 'hipotensão arterial' },\n    { display: 'Taquipneia', narrative: 'taquipneia' },\n    { display: 'Cianose', narrative: 'cianose' },\n    { display: 'Palidez cutânea', narrative: 'palidez cutânea' },\n    { display: 'Icterícia', narrative: 'icterícia' },\n    { display: 'Edema de membros inferiores', narrative: 'edema de membros inferiores' },\n    { display: 'Estertores pulmonares', narrative: 'estertores pulmonares' },\n    { display: 'Sibilos', narrative: 'sibilos à ausculta pulmonar' },\n\n    // Sinais objetivos (Evidencia)\n    { display: 'Sinal de Murphy positivo', narrative: 'Sinal de Murphy positivo' },\n    { display: 'Sinal de Blumberg positivo', narrative: 'Sinal de Blumberg positivo' },\n    { display: 'Sinal de Rovsing positivo', narrative: 'Sinal de Rovsing positivo' },\n    { display: 'Sinal de Giordano positivo', narrative: 'Sinal de Giordano positivo' },\n    { display: 'Rigidez de nuca', narrative: 'rigidez de nuca' },\n    { display: 'Déficit neurológico focal', narrative: 'déficit neurológico focal' },\n    { display: 'Abdome em tábua', narrative: 'abdome em tábua' },\n\n    // Estado geral (padrão)\n    { display: 'BEG, LOC', narrative: 'bom estado geral, lúcido, orientado, cooperativo' },\n    { display: 'REG', narrative: 'regular estado geral' },\n    { display: 'Corado, hidratado', narrative: 'corado, hidratado, anictérico, acianótico' },\n    { display: 'MV+ s/ RA', narrative: 'murmúrio vesicular presente bilateralmente, sem ruídos adventícios' },\n    { display: 'RCR 2T BNF SS', narrative: 'ritmo cardíaco regular em dois tempos, bulhas normofonéticas, sem sopros' },\n    { display: 'Abdome flácido', narrative: 'abdome flácido, indolor à palpação superficial e profunda' },\n    { display: 'MMII sem edema', narrative: 'membros inferiores sem edema, pulsos pediosos presentes e simétricos' },\n    { display: 'Glasgow 15', narrative: 'Escala de Coma de Glasgow 15 pontos' },\n  ]\n\n  for (const exame of exameFisico) {\n    checkboxes.push({\n      category: 'EXAME_FISICO' as CheckboxCategory,\n      displayText: exame.display,\n      narrativeText: exame.narrative,\n      isRequired: false,\n      isRedFlag: false,\n      isNegative: false,\n      orderIndex: orderIndex++\n    })\n  }\n\n  // 5. Antecedentes (História de)\n  const antecedentes = [\n    { display: 'HAS', narrative: 'hipertensão arterial sistêmica em tratamento' },\n    { display: 'DM2', narrative: 'diabetes mellitus tipo 2' },\n    { display: 'Dislipidemia', narrative: 'dislipidemia em tratamento' },\n    { display: 'Tabagismo', narrative: 'tabagismo ativo' },\n    { display: 'Ex-tabagista', narrative: 'ex-tabagismo' },\n    { display: 'Etilismo', narrative: 'etilismo' },\n    { display: 'Obesidade', narrative: 'obesidade' },\n    { display: 'IAM prévio', narrative: 'infarto agudo do miocárdio prévio' },\n    { display: 'AVC prévio', narrative: 'acidente vascular cerebral prévio' },\n    { display: 'Revascularização prévia', narrative: 'revascularização miocárdica prévia' },\n    { display: 'Cirurgia abdominal prévia', narrative: 'cirurgia abdominal prévia' },\n    { display: 'Trauma recente', narrative: 'associação com evento traumático' },\n    { display: 'DPOC', narrative: 'doença pulmonar obstrutiva crônica' },\n    { display: 'Asma', narrative: 'asma brônquica' },\n    { display: 'IRC', narrative: 'insuficiência renal crônica' },\n    { display: 'ICC', narrative: 'insuficiência cardíaca congestiva' },\n    { display: 'Fibrilação atrial', narrative: 'fibrilação atrial' },\n    { display: 'Uso de anticoagulantes', narrative: 'uso de anticoagulantes' },\n  ]\n\n  for (const antecedente of antecedentes) {\n    checkboxes.push({\n      category: 'ANTECEDENTES' as CheckboxCategory,\n      displayText: antecedente.display,\n      narrativeText: antecedente.narrative,\n      isRequired: false,\n      isRedFlag: false,\n      isNegative: false,\n      orderIndex: orderIndex++\n    })\n  }\n\n  // 6. Negativas pertinentes (Nega)\n  const negativas = [\n    { display: 'Nega febre', narrative: 'febre' },\n    { display: 'Nega náuseas', narrative: 'náuseas ou vômitos' },\n    { display: 'Nega vômitos', narrative: 'vômitos' },\n    { display: 'Nega diarreia', narrative: 'diarreia' },\n    { display: 'Nega dispneia', narrative: 'dispneia' },\n    { display: 'Nega síncope', narrative: 'episódios sincopais' },\n    { display: 'Nega alteração de consciência', narrative: 'alteração do nível de consciência' },\n    { display: 'Nega dor torácica', narrative: 'dor torácica' },\n    { display: 'Nega palpitações', narrative: 'palpitações' },\n    { display: 'Nega tosse', narrative: 'tosse' },\n    { display: 'Nega cefaleia', narrative: 'cefaleia' },\n    { display: 'Nega trauma', narrative: 'trauma recente' },\n    { display: 'Nega alergias', narrative: 'alergias medicamentosas conhecidas' },\n    { display: 'Nega uso de medicações', narrative: 'uso de medicações de uso contínuo' },\n    { display: 'Nega internações prévias', narrative: 'internações hospitalares prévias' },\n    { display: 'Nega cirurgias prévias', narrative: 'cirurgias prévias' },\n  ]\n\n  for (const negativa of negativas) {\n    checkboxes.push({\n      category: 'NEGATIVAS' as CheckboxCategory,\n      displayText: negativa.display,\n      narrativeText: negativa.narrative,\n      isRequired: false,\n      isRedFlag: false,\n      isNegative: true,\n      orderIndex: orderIndex++\n    })\n  }\n\n  return checkboxes\n}\n\nasync function main() {\n  console.log('🚀 Iniciando geração de checkboxes do Obsidian...\\n')\n\n  // Limpa checkboxes existentes para evitar duplicatas\n  console.log('🧹 Limpando checkboxes existentes...')\n  await prisma.checkbox.deleteMany({})\n  console.log('   ✓ Checkboxes removidos\\n')\n\n  // Agrupar queixas por grupo\n  const complaintsByGroup = new Map<string, typeof complaintsData.complaints>()\n\n  for (const complaint of complaintsData.complaints) {\n    const group = complaint.group\n    if (!complaintsByGroup.has(group)) {\n      complaintsByGroup.set(group, [])\n    }\n    complaintsByGroup.get(group)!.push(complaint)\n  }\n\n  let syndromeCount = 0\n  let checkboxCount = 0\n  let orderIndex = 0\n\n  for (const [group, complaints] of complaintsByGroup) {\n    const syndromeConfig = GROUP_TO_SYNDROME[group] || {\n      name: group,\n      code: group,\n      description: `Síndrome ${group}`,\n      icon: 'activity'\n    }\n\n    console.log(`📁 Processando grupo: ${syndromeConfig.name} (${complaints.length} queixas)`)\n\n    // Upsert Syndrome\n    const syndrome = await prisma.syndrome.upsert({\n      where: { code: syndromeConfig.code },\n      update: {\n        name: syndromeConfig.name,\n        description: syndromeConfig.description,\n        icon: syndromeConfig.icon,\n        updatedAt: new Date()\n      },\n      create: {\n        name: syndromeConfig.name,\n        code: syndromeConfig.code,\n        description: syndromeConfig.description,\n        icon: syndromeConfig.icon,\n        orderIndex: orderIndex++\n      }\n    })\n\n    syndromeCount++\n\n    // Gerar checkboxes para cada queixa\n    for (const complaint of complaints) {\n      console.log(`   📝 Gerando checkboxes para: ${complaint.title}`)\n\n      const checkboxes = generateCheckboxesFromComplaint(complaint)\n\n      for (const checkbox of checkboxes) {\n        await prisma.checkbox.create({\n          data: {\n            syndromeId: syndrome.id,\n            ...checkbox\n          }\n        })\n        checkboxCount++\n      }\n    }\n  }\n\n  console.log('\\n✅ Geração concluída!')\n  console.log(`   Syndromes criadas/atualizadas: ${syndromeCount}`)\n  console.log(`   Checkboxes criados: ${checkboxCount}`)\n}\n\nmain()\n  .catch((e) => {\n    console.error('❌ Erro durante a geração:', e)\n    process.exit(1)\n  })\n  .finally(async () => {\n    await prisma.$disconnect()\n  })\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/index.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":17,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":17,"endColumn":14,"suggestions":[{"fix":{"range":[373,428],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":21,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":21,"endColumn":18,"suggestions":[{"fix":{"range":[476,529],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":28,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":28,"endColumn":18,"suggestions":[{"fix":{"range":[676,729],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":35,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":35,"endColumn":18,"suggestions":[{"fix":{"range":[880,929],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":42,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":42,"endColumn":18,"suggestions":[{"fix":{"range":[1055,1107],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":49,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":49,"endColumn":18,"suggestions":[{"fix":{"range":[1231,1284],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":50,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":50,"endColumn":18,"suggestions":[{"fix":{"range":[1291,1359],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":51,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":51,"endColumn":18,"suggestions":[{"fix":{"range":[1366,1434],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":52,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":52,"endColumn":18,"suggestions":[{"fix":{"range":[1441,1497],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":53,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":53,"endColumn":18,"suggestions":[{"fix":{"range":[1504,1573],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * CLI principal do sistema de sincronização Obsidian ↔ DB\n *\n * Uso:\n *   npm run sync:pull      - Obsidian → DB\n *   npm run sync:push      - DB → Obsidian\n *   npm run sync:validate  - Validar dados\n *   npm run sync:watch     - Sincronização automática\n */\n\nimport chalk from 'chalk';\n\nconst command = process.argv[2];\n\nasync function main() {\n  console.log(chalk.blue('\\n🔄 WellWave Sync System\\n'));\n\n  switch (command) {\n    case 'pull': {\n      console.log(chalk.gray('Executando: Obsidian → DB'));\n      const { syncObsidianToDB } = await import('./obsidian-to-db');\n      await syncObsidianToDB();\n      break;\n    }\n\n    case 'push': {\n      console.log(chalk.gray('Executando: DB → Obsidian'));\n      const { syncDBToObsidian } = await import('./db-to-obsidian');\n      await syncDBToObsidian();\n      break;\n    }\n\n    case 'validate': {\n      console.log(chalk.gray('Executando: Validação'));\n      const { validate } = await import('./validate');\n      await validate();\n      break;\n    }\n\n    case 'watch': {\n      console.log(chalk.gray('Executando: File Watcher'));\n      const { startWatcher } = await import('./watch');\n      await startWatcher();\n      break;\n    }\n\n    default:\n      console.log(chalk.yellow('Comandos disponíveis:\\n'));\n      console.log('  npm run sync:pull      - Sincronizar Obsidian → DB');\n      console.log('  npm run sync:push      - Sincronizar DB → Obsidian');\n      console.log('  npm run sync:validate  - Validar dados');\n      console.log('  npm run sync:watch     - Sincronização automática\\n');\n      break;\n  }\n}\n\nmain().catch(console.error);\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/obsidian-to-db.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":95,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":95,"endColumn":14,"suggestions":[{"fix":{"range":[2305,2376],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":98,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":98,"endColumn":14,"suggestions":[{"fix":{"range":[2471,2552],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":111,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":111,"endColumn":18,"suggestions":[{"fix":{"range":[2760,2830],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":140,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":140,"endColumn":18,"suggestions":[{"fix":{"range":[3713,3779],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":142,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":142,"endColumn":20,"suggestions":[{"fix":{"range":[3833,3898],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":153,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":153,"endColumn":18,"suggestions":[{"fix":{"range":[4090,4155],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":168,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":168,"endColumn":18,"suggestions":[{"fix":{"range":[4442,4517],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":177,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":177,"endColumn":18,"suggestions":[{"fix":{"range":[4766,4825],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":191,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":191,"endColumn":18,"suggestions":[{"fix":{"range":[5231,5294],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":242,"column":9,"nodeType":"MemberExpression","messageId":"limited","endLine":242,"endColumn":20,"suggestions":[{"fix":{"range":[7178,7258],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":277,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":277,"endColumn":16,"suggestions":[{"fix":{"range":[8079,8136],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":281,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":281,"endColumn":14,"suggestions":[{"fix":{"range":[8167,8206],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":282,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":282,"endColumn":14,"suggestions":[{"fix":{"range":[8209,8270],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":283,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":283,"endColumn":14,"suggestions":[{"fix":{"range":[8273,8335],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":284,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":284,"endColumn":14,"suggestions":[{"fix":{"range":[8338,8400],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":285,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":285,"endColumn":14,"suggestions":[{"fix":{"range":[8403,8455],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":286,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":286,"endColumn":14,"suggestions":[{"fix":{"range":[8458,8515],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * Sincroniza dados do Obsidian → banco de dados\n *\n * Uso: npm run sync:pull\n */\n\nimport 'dotenv/config'\nimport { glob } from 'glob'\nimport fs from 'fs'\nimport path from 'path'\nimport chalk from 'chalk'\nimport type { Prisma } from '@prisma/client'\nimport { prisma } from '../../lib/db/prisma'\nimport {\n  mapDbComplaintToApiPayload,\n  mergeAdditionalData,\n  parseAdditionalData,\n} from '../../lib/db/complaints'\nimport { validateComplaintFrontmatter } from '../../lib/validation/complaints'\nimport { ComplaintExtendedContentEBMSchema } from '../../lib/validation/ebm'\nimport { PATHS, SYNC_CONFIG } from './utils/config'\nimport {\n  parseMarkdownFile,\n  parseRedFlagsStructured,\n  parseMedicationsTable,\n  parseEBMCitations,\n  parseDifferentialDiagnosisTable,\n} from './utils/markdown-parser'\nimport { mapFrontmatterToEBM, readObsidianFile } from './utils/sync-helpers'\nimport { renderComplaintMarkdown } from './utils/obsidian-render'\n\ninterface SyncOptions {\n  filePaths?: string[]\n}\n\ninterface SyncStats {\n  updated: number\n  skipped: number\n  conflicts: number\n  errors: number\n}\n\nasync function findComplaintFiles(): Promise<string[]> {\n  const pattern = path.join(PATHS.queixas, '**/*.md')\n  const files = await glob(pattern, { ignore: SYNC_CONFIG.ignorePatterns.map((p) => `**/${p}`) })\n\n  return files.filter((filePath) => {\n    const basename = path.basename(filePath)\n    return (\n      !basename.startsWith('_') &&\n      !basename.startsWith('00 -') &&\n      !basename.includes('-CONFLICT')\n    )\n  })\n}\n\nfunction isEBMv2(frontmatter: Record<string, unknown>): boolean {\n  const version = frontmatter.ebm_version\n  return version === '2.0' || version === 2 || version === 2.0\n}\n\nfunction writeConflictFile(\n  filePath: string,\n  reason: string,\n  dbContent: string,\n  localContent: string\n): void {\n  const dir = path.dirname(filePath)\n  const baseName = path.basename(filePath, '.md')\n  const conflictPath = path.join(dir, `${baseName}-CONFLICT.md`)\n\n  const content = `# CONFLITO DE SINCRONIZACAO: ${baseName}\n\n## Motivo\n${reason}\n\n## Versao do banco (DB)\n\n${dbContent}\n\n---\n\n## Versao local (Obsidian)\n\n${localContent}\n`\n\n  fs.writeFileSync(conflictPath, content, 'utf-8')\n}\n\nexport async function syncObsidianToDB(\n  options: SyncOptions = {}\n): Promise<SyncStats> {\n  console.log(chalk.blue('\\n🔄 Iniciando sincronizacao Obsidian → DB\\n'))\n\n  const files = options.filePaths?.length ? options.filePaths : await findComplaintFiles()\n  console.log(chalk.gray(`   Encontrados ${files.length} arquivos para processar`))\n\n  const stats: SyncStats = {\n    updated: 0,\n    skipped: 0,\n    conflicts: 0,\n    errors: 0,\n  }\n\n  for (const filePath of files) {\n    const parsed = parseMarkdownFile(filePath)\n\n    if (!parsed) {\n      console.log(chalk.yellow(`   ⚠ Ignorado: ${path.basename(filePath)}`))\n      stats.errors += 1\n      continue\n    }\n\n    const { frontmatter, content, raw, contentHash } = readObsidianFile(filePath)\n\n    const validation = validateComplaintFrontmatter({\n      id: parsed.id,\n      group: parsed.group,\n      title: parsed.title,\n      subtitle: parsed.subtitle,\n      riskLevel: parsed.riskLevel,\n      severity: parsed.severity,\n      icd10Codes: parsed.icd10Codes,\n      synonyms: parsed.synonyms,\n      searchTerms: parsed.searchTerms,\n      chips: parsed.chips,\n      ageTargets: parsed.ageTargets,\n      isTopForAdult: parsed.isTopForAdult,\n      isTopForChild: parsed.isTopForChild,\n      isFastTrack: parsed.isFastTrack,\n      searchWeight: parsed.searchWeight,\n      bodySystem: parsed.bodySystem,\n      relatedSymptoms: parsed.relatedSymptoms,\n      commonMisconceptions: parsed.commonMisconceptions,\n    })\n\n    if (!validation.valid) {\n      console.log(chalk.red(`   ✖ ${parsed.id} - frontmatter invalido`))\n      validation.errors.forEach((issue) => {\n        console.log(chalk.red(`     - ${issue.field}: ${issue.message}`))\n      })\n      stats.errors += 1\n      continue\n    }\n\n    const group = await prisma.chief_complaint_groups.findUnique({\n      where: { code: parsed.group },\n    })\n\n    if (!group) {\n      console.log(chalk.red(`   ✖ Grupo inexistente: ${parsed.group}`))\n      stats.errors += 1\n      continue\n    }\n\n    const existing = await prisma.chief_complaints.findFirst({\n      where: {\n        OR: [{ code: parsed.id }, { id: parsed.id }],\n      },\n      include: {\n        chief_complaint_groups: true,\n      },\n    })\n\n    if (!existing) {\n      console.log(chalk.yellow(`   ⚠ Queixa nao encontrada no DB: ${parsed.id}`))\n      stats.skipped += 1\n      continue\n    }\n\n    const currentAdditional = parseAdditionalData(existing.additional_data)\n    const existingHash = currentAdditional?.sync?.contentHash\n\n    if (existingHash && existingHash === contentHash) {\n      console.log(chalk.gray(`   = Sem alteracao: ${parsed.id}`))\n      stats.skipped += 1\n      continue\n    }\n\n    if (existing.updated_at > parsed.fileModified) {\n      const payload = mapDbComplaintToApiPayload(existing)\n      const rendered = renderComplaintMarkdown(payload, { syncSource: 'system' })\n      writeConflictFile(\n        filePath,\n        'DB possui versao mais recente do que o arquivo local.',\n        rendered.fullContent,\n        raw\n      )\n      console.log(chalk.red(`   ⚠ Conflito detectado: ${parsed.id}`))\n      stats.conflicts += 1\n      continue\n    }\n\n    const metadata = {\n      subtitle: parsed.subtitle || undefined,\n      riskLevel: parsed.riskLevel,\n      severity: parsed.severity,\n      ageTargets: parsed.ageTargets,\n      isTopForAdult: parsed.isTopForAdult,\n      isTopForChild: parsed.isTopForChild,\n      isFastTrack: parsed.isFastTrack,\n      chips: parsed.chips,\n      searchTerms: parsed.searchTerms,\n      bodySystem: parsed.bodySystem,\n      relatedSymptoms: parsed.relatedSymptoms,\n      commonMisconceptions: parsed.commonMisconceptions,\n      searchWeight: parsed.searchWeight,\n    }\n\n    const extendedContent = {\n      redFlags: parsed.extendedContent.redFlags,\n      diagnosticoDiferencial: parsed.extendedContent.diagnosticoDiferencial,\n      condutaInicial: parsed.extendedContent.condutaInicial,\n      calculadoras: parsed.extendedContent.calculadoras,\n      rawMarkdown: parsed.extendedContent.rawMarkdown,\n    }\n\n    const ebmFromFrontmatter = mapFrontmatterToEBM(frontmatter)\n    const ebmContent = isEBMv2(frontmatter)\n      ? {\n          ...ebmFromFrontmatter,\n          redFlags: parseRedFlagsStructured(content),\n          diagnosticoDiferencial: parseDifferentialDiagnosisTable(content),\n          condutaInicial: parsed.extendedContent.condutaInicial || '',\n          calculadoras: parsed.extendedContent.calculadoras || [],\n          ebmReferences: parseEBMCitations(content),\n          medications: parseMedicationsTable(content),\n          rawMarkdown: parsed.extendedContent.rawMarkdown,\n        }\n      : Object.keys(ebmFromFrontmatter).length\n        ? {\n            ...ebmFromFrontmatter,\n            rawMarkdown: parsed.extendedContent.rawMarkdown,\n          }\n        : undefined\n\n    if (ebmContent) {\n      const ebmValidation = ComplaintExtendedContentEBMSchema.partial().safeParse(ebmContent)\n      if (!ebmValidation.success) {\n        console.log(chalk.yellow(`   ⚠ EBM invalido em ${parsed.id}, salvando parcial`))\n      }\n    }\n\n    const additionalUpdate = {\n      metadata,\n      extendedContent,\n      extendedContentEBM: ebmContent,\n      sync: {\n        contentHash,\n        lastSyncedAt: new Date().toISOString(),\n        syncSource: 'obsidian' as const,\n      },\n    }\n\n    const mergedAdditional = mergeAdditionalData(currentAdditional, additionalUpdate)\n\n    const updateData: Prisma.chief_complaintsUpdateInput = {\n      group_id: group.id,\n      name_pt: parsed.title,\n      synonyms: parsed.synonyms || [],\n      icd10_codes: parsed.icd10Codes || [],\n      updated_at: new Date(),\n      additional_data: mergedAdditional,\n    }\n\n    if (parsed.subtitle) {\n      updateData.definition = parsed.subtitle\n    }\n\n    await prisma.chief_complaints.update({\n      where: { id: existing.id },\n      data: updateData,\n    })\n\n    console.log(chalk.green(`   ✓ Atualizado: ${parsed.id}`))\n    stats.updated += 1\n  }\n\n  console.log(chalk.blue('\\n📊 Resumo:'))\n  console.log(chalk.green(`   ✓ ${stats.updated} atualizados`))\n  console.log(chalk.gray(`   = ${stats.skipped} sem alteracao`))\n  console.log(chalk.yellow(`   ⚠ ${stats.conflicts} conflitos`))\n  console.log(chalk.red(`   ✖ ${stats.errors} erros`))\n  console.log(chalk.blue(`\\n✅ Sincronizacao concluida!\\n`))\n\n  return stats\n}\n\nasync function main(): Promise<void> {\n  try {\n    await syncObsidianToDB()\n  } finally {\n    await prisma.$disconnect()\n  }\n}\n\nconst isMain = process.argv[1]?.endsWith('obsidian-to-db.ts')\nif (isMain) {\n  main().catch(console.error)\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/test-ebm-parser.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":80,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":80,"endColumn":12,"suggestions":[{"fix":{"range":[2275,2316],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":81,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":81,"endColumn":12,"suggestions":[{"fix":{"range":[2317,2345],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":84,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":84,"endColumn":12,"suggestions":[{"fix":{"range":[2369,2432],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":86,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":86,"endColumn":12,"suggestions":[{"fix":{"range":[2489,2546],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":88,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":88,"endColumn":14,"suggestions":[{"fix":{"range":[2579,2675],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":89,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":89,"endColumn":14,"suggestions":[{"fix":{"range":[2678,2746],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":90,"column":24,"nodeType":"MemberExpression","messageId":"limited","endLine":90,"endColumn":35},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":94,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":94,"endColumn":12,"suggestions":[{"fix":{"range":[2848,2899],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":96,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":96,"endColumn":12,"suggestions":[{"fix":{"range":[2957,3018],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":98,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":98,"endColumn":14,"suggestions":[{"fix":{"range":[3055,3101],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":99,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":99,"endColumn":14,"suggestions":[{"fix":{"range":[3104,3172],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":100,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":100,"endColumn":14,"suggestions":[{"fix":{"range":[3175,3312],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":104,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":104,"endColumn":12,"suggestions":[{"fix":{"range":[3343,3396],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":106,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":106,"endColumn":12,"suggestions":[{"fix":{"range":[3448,3505],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":108,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":108,"endColumn":14,"suggestions":[{"fix":{"range":[3540,3610],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":109,"column":17,"nodeType":"MemberExpression","messageId":"limited","endLine":109,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":110,"column":16,"nodeType":"MemberExpression","messageId":"limited","endLine":110,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":111,"column":26,"nodeType":"MemberExpression","messageId":"limited","endLine":111,"endColumn":37},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":115,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":115,"endColumn":12,"suggestions":[{"fix":{"range":[3843,3907],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":117,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":117,"endColumn":12,"suggestions":[{"fix":{"range":[3973,4034],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":119,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":119,"endColumn":14,"suggestions":[{"fix":{"range":[4068,4141],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":120,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":120,"endColumn":14,"suggestions":[{"fix":{"range":[4144,4197],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":121,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":121,"endColumn":14,"suggestions":[{"fix":{"range":[4200,4281],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":124,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":124,"endColumn":12,"suggestions":[{"fix":{"range":[4287,4322],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":125,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":125,"endColumn":12,"suggestions":[{"fix":{"range":[4323,4387],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":126,"column":1,"nodeType":"MemberExpression","messageId":"limited","endLine":126,"endColumn":12,"suggestions":[{"fix":{"range":[4388,4423],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":26,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Teste das funções de parsing EBM do markdown-parser\n */\n\nimport {\n  parseRedFlagsStructured,\n  parseMedicationsTable,\n  parseEBMCitations,\n  parseDifferentialDiagnosisTable,\n} from './utils/markdown-parser';\n\nconst mockMarkdown = `\n# Dor Torácica Típica (Síndrome Coronariana Aguda)\n\n> Dor precordial em aperto sugestiva de isquemia miocárdica\n\n## Red Flags 🚩\n\n### Críticos (Risco de Morte Imediato)\n- [ ] Dor torácica em aperto com irradiação para mandíbula/braço esquerdo\n  - **Ação**: ECG <10min + AAS 200mg VO (mastigar) + O2 se SpO2<94%\n  - **Fonte**: [[uptodate-acs-2024]]\n- [ ] Choque cardiogênico (PA<90mmHg, extremidades frias, oligúria)\n  - **Ação**: Suporte hemodinâmico imediato + UTI + cardiologia <15min\n  - **Fonte**: [[sbc-choque-cardiogenico]]\n\n### Alertas (Risco Alto)\n- [ ] Troponina elevada sem supradesnível de ST (NSTEMI)\n  - **Ação**: DAPT + anticoagulação + estratificação de risco (HEART score)\n  - **Fonte**: [[uptodate-nstemi]]\n\n## Diagnóstico Diferencial\n\n| Condição | ICD-10 | Probabilidade | Características | Referência |\n|----------|--------|---------------|-----------------|------------|\n| IAM com supra de ST | I21.9 | Alta | Dor típica >20min, ST↑, troponina+ | [[uptodate-stemi]] |\n| Angina instável | I20.0 | Média | Dor em repouso <20min, troponina negativa | [[dynamed-ua]] |\n| Pericardite | I30.9 | Baixa | Dor pleurítica, atrito pericárdico | [[guideline-pericardite]] |\n\n## Medicações\n\n#### Ácido Acetilsalicílico (AAS)\n- **Dose**: 200-300mg VO (mastigar)\n- **Frequência**: Dose única de ataque\n- **SUS**: ✅ Sim (RENAME Lista A)\n- **Evidência**: Nível A\n- **Referência**: [[uptodate-aspirin-acs]]\n\n#### Clopidogrel\n- **Dose**: 300-600mg VO\n- **Frequência**: Dose de ataque\n- **SUS**: ✅ Sim (RENAME Lista C)\n- **Evidência**: Nível A\n- **Referência**: [[uptodate-clopidogrel]]\n\n#### Enoxaparina\n- **Dose**: 1mg/kg SC\n- **Frequência**: 12/12h\n- **SUS**: ✅ Sim (RENAME Lista C)\n- **Evidência**: Nível A\n\n## Referências EBM\n\n### UpToDate\n1. [[uptodate-acute-coronary-syndrome-2024]]\n   - PMID: 12345678\n   - Evidence: A\n   - URL: https://www.uptodate.com/contents/acs\n\n### Diretrizes Brasileiras\n1. [[sbc-diretriz-sca-2021]]\n   - DOI: 10.36660/abc.20210595\n   - Evidence: A\n\n### SBC\n1. [[sbc-protocolo-iam]]\n   - Evidence: B\n`;\n\nconsole.log('🧪 TESTE DE PARSING EBM\\n');\nconsole.log('='.repeat(80));\n\n// Teste 1: Red Flags\nconsole.log('\\n📍 Teste 1: Parsing de Red Flags Estruturados');\nconst redFlags = parseRedFlagsStructured(mockMarkdown);\nconsole.log(`✅ ${redFlags.length} red flags parseados:`);\nredFlags.forEach((rf, i) => {\n  console.log(`  ${i + 1}. [${rf.severity.toUpperCase()}] ${rf.description.substring(0, 60)}...`);\n  console.log(`     Ação: ${rf.immediateAction.substring(0, 60)}...`);\n  if (rf.timeToAction) console.log(`     Tempo: ${rf.timeToAction}min`);\n});\n\n// Teste 2: Medicações\nconsole.log('\\n📍 Teste 2: Parsing de Medicações');\nconst medications = parseMedicationsTable(mockMarkdown);\nconsole.log(`✅ ${medications.length} medicações parseadas:`);\nmedications.forEach((med, i) => {\n  console.log(`  ${i + 1}. ${med.genericName}`);\n  console.log(`     Dose: ${med.dose} ${med.route} ${med.frequency}`);\n  console.log(`     SUS: ${med.susAvailable ? '✅' : '❌'} | RENAME: ${med.renameList || 'N/A'} | Evidência: ${med.evidenceLevel || 'N/A'}`);\n});\n\n// Teste 3: Citações EBM\nconsole.log('\\n📍 Teste 3: Parsing de Citações EBM');\nconst citations = parseEBMCitations(mockMarkdown);\nconsole.log(`✅ ${citations.length} citações parseadas:`);\ncitations.forEach((cit, i) => {\n  console.log(`  ${i + 1}. [${cit.source.toUpperCase()}] ${cit.title}`);\n  if (cit.pmid) console.log(`     PMID: ${cit.pmid}`);\n  if (cit.doi) console.log(`     DOI: ${cit.doi}`);\n  if (cit.evidenceLevel) console.log(`     Evidência: Nível ${cit.evidenceLevel}`);\n});\n\n// Teste 4: Diagnóstico Diferencial\nconsole.log('\\n📍 Teste 4: Parsing de Diagnóstico Diferencial');\nconst diagnoses = parseDifferentialDiagnosisTable(mockMarkdown);\nconsole.log(`✅ ${diagnoses.length} diagnósticos parseados:`);\ndiagnoses.forEach((dx, i) => {\n  console.log(`  ${i + 1}. ${dx.condition} (${dx.icd10 || 'sem ICD-10'})`);\n  console.log(`     Probabilidade: ${dx.probability}`);\n  console.log(`     Características: ${dx.keyFeatures.slice(0, 2).join(', ')}...`);\n});\n\nconsole.log('\\n' + '='.repeat(80));\nconsole.log('✅ TODOS OS PARSERS EBM FUNCIONANDO CORRETAMENTE!');\nconsole.log('='.repeat(80) + '\\n');\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/test-ebm-validation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mockDifferentialDiagnosisInvalid' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":115,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":39},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":168,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":168,"endColumn":14,"suggestions":[{"fix":{"range":[5549,5583],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":169,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":169,"endColumn":14,"suggestions":[{"fix":{"range":[5586,5636],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":170,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":170,"endColumn":14,"suggestions":[{"fix":{"range":[5639,5673],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":173,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":173,"endColumn":14,"suggestions":[{"fix":{"range":[5706,5759],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":175,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":175,"endColumn":14,"suggestions":[{"fix":{"range":[5831,5887],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":178,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":178,"endColumn":14,"suggestions":[{"fix":{"range":[5922,5997],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":182,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":182,"endColumn":14,"suggestions":[{"fix":{"range":[6097,6155],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":185,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":185,"endColumn":14,"suggestions":[{"fix":{"range":[6190,6243],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":187,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":187,"endColumn":14,"suggestions":[{"fix":{"range":[6321,6379],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":190,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":190,"endColumn":14,"suggestions":[{"fix":{"range":[6416,6489],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":194,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":194,"endColumn":14,"suggestions":[{"fix":{"range":[6608,6668],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":197,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":197,"endColumn":14,"suggestions":[{"fix":{"range":[6702,6754],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":199,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":199,"endColumn":14,"suggestions":[{"fix":{"range":[6823,6878],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":202,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":202,"endColumn":14,"suggestions":[{"fix":{"range":[6914,6986],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":204,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":204,"endColumn":14,"suggestions":[{"fix":{"range":[7070,7127],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":207,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":207,"endColumn":14,"suggestions":[{"fix":{"range":[7170,7235],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":209,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":209,"endColumn":14,"suggestions":[{"fix":{"range":[7313,7368],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":212,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":212,"endColumn":14,"suggestions":[{"fix":{"range":[7421,7517],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":228,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":228,"endColumn":14,"suggestions":[{"fix":{"range":[7964,8026],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":231,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":231,"endColumn":14,"suggestions":[{"fix":{"range":[8042,8076],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":232,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":232,"endColumn":14,"suggestions":[{"fix":{"range":[8079,8114],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":233,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":233,"endColumn":14,"suggestions":[{"fix":{"range":[8117,8144],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":250,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":250,"endColumn":16,"suggestions":[{"fix":{"range":[8896,8980],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":255,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":255,"endColumn":14,"suggestions":[{"fix":{"range":[8989,9023],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":256,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":256,"endColumn":14,"suggestions":[{"fix":{"range":[9026,9091],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":257,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":257,"endColumn":14,"suggestions":[{"fix":{"range":[9094,9128],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Script de teste para validação EBM\n *\n * Testa os tipos e validação implementados na Fase 1\n */\n\nimport {\n  validateEBMContent,\n  validateCitations,\n  validateMedications,\n  validateRedFlags,\n  formatValidationResult,\n} from './utils/ebm-validator'\nimport type {\n  ComplaintExtendedContentEBM,\n  EBMCitation,\n  MedicationRecommendation,\n  RedFlag,\n  DifferentialDiagnosis,\n} from '../../lib/types/medical'\n\n// ============================================================================\n// Dados Mock para Teste\n// ============================================================================\n\nconst mockCitationValid: EBMCitation = {\n  source: 'uptodate',\n  title: 'Acute Coronary Syndromes: Overview of Care',\n  url: 'https://www.uptodate.com/contents/acute-coronary-syndromes',\n  pmid: '12345678',\n  doi: '10.1001/jama.2020.12345',\n  yearPublished: 2024,\n  evidenceLevel: 'A',\n  lastAccessed: '2026-01-01T00:00:00Z',\n}\n\nconst mockCitationInvalid: Partial<EBMCitation> = {\n  source: 'uptodate',\n  title: 'ACS', // Muito curto (< 5 caracteres)\n  pmid: '123', // PMID inválido (não tem 8 dígitos)\n}\n\nconst mockMedicationValid: MedicationRecommendation = {\n  genericName: 'Ácido Acetilsalicílico (AAS)',\n  brandNames: ['Aspirina', 'AAS'],\n  dose: '200-300mg',\n  route: 'VO',\n  frequency: 'Dose única (mastigar)',\n  duration: 'Dose de ataque, seguir com 100mg/dia',\n  susAvailable: true,\n  renameCompatible: true,\n  renameList: 'A',\n  evidenceLevel: 'A',\n  references: [mockCitationValid],\n  specialNotes: 'Antiagregante plaquetário',\n}\n\nconst mockMedicationInvalid: Partial<MedicationRecommendation> = {\n  genericName: 'Ticagrelor',\n  dose: '180mg VO',\n  route: 'VO',\n  frequency: 'Dose única',\n  susAvailable: true, // Inconsistência: disponível no SUS mas não RENAME\n  renameCompatible: false,\n  // Falta renameList (deveria ter se renameCompatible = true)\n}\n\nconst mockRedFlagValid: RedFlag = {\n  description: 'Dor torácica em aperto com irradiação para mandíbula',\n  severity: 'critical',\n  clinicalSignificance:\n    'Altamente sugestivo de Síndrome Coronariana Aguda (SCA). Risco imediato de infarto.',\n  immediateAction: 'ECG em <10min, AAS 200mg VO (mastigar), O2 se SpO2<94%',\n  timeToAction: 10,\n  references: [mockCitationValid],\n  objectiveCriteria: [\n    'Dor retroesternal em aperto/queimação',\n    'Irradiação para mandíbula, braço esquerdo ou epigástrio',\n    'Fatores de risco CV (HAS, DM, tabagismo, história familiar)',\n  ],\n}\n\nconst mockRedFlagInvalid: Partial<RedFlag> = {\n  description: 'Dor', // Muito curto\n  severity: 'critical',\n  clinicalSignificance: 'Grave', // Muito curto (< 10 caracteres)\n  immediateAction: 'ECG',\n  // Falta timeToAction (recomendado para critical)\n}\n\nconst mockDifferentialDiagnosisValid: DifferentialDiagnosis = {\n  condition: 'Infarto Agudo do Miocárdio (IAM)',\n  icd10: 'I21.9',\n  probability: 'high',\n  keyFeatures: [\n    'Dor torácica típica >20min',\n    'Troponina elevada',\n    'ECG com supradesnível de ST',\n    'Fatores de risco cardiovascular',\n  ],\n  diagnosticTests: [\n    'ECG 12 derivações',\n    'Troponina seriada (0h, 3h, 6h)',\n    'Ecocardiograma',\n    'Cineangiocoronariografia',\n  ],\n  references: [mockCitationValid],\n  specificRedFlags: [\n    'Choque cardiogênico',\n    'Edema agudo de pulmão',\n    'Arritmia maligna',\n  ],\n}\n\nconst mockDifferentialDiagnosisInvalid: Partial<DifferentialDiagnosis> = {\n  condition: 'IAM',\n  icd10: 'I21', // Válido mas falta uma casa decimal\n  probability: 'high',\n  keyFeatures: [], // Vazio (deveria ter pelo menos 1)\n}\n\nconst mockComplaintContentValid: ComplaintExtendedContentEBM = {\n  redFlags: [mockRedFlagValid],\n  diagnosticoDiferencial: [mockDifferentialDiagnosisValid],\n  condutaInicial:\n    'AAS 200mg VO (mastigar) + ECG <10min + O2 se SpO2<94% + Acesso venoso + Monitorização cardíaca',\n  calculadoras: ['HEART Score', 'TIMI Risk Score', 'GRACE Score'],\n  rawMarkdown: '# Dor Torácica Típica\\n\\nConteúdo do Obsidian...',\n\n  // Campos EBM\n  ebmVersion: '1.0',\n  lastEBMReview: '2026-01-01T00:00:00Z',\n  evidenceQuality: 'high',\n  uptodateReviewed: true,\n  dynamedReviewed: true,\n  brazilianGuidelines: ['Diretriz SBC 2021 - Doença Coronária Aguda'],\n  susProtocolCompatible: true,\n  renameMedicationsOnly: true,\n  ebmReferences: [mockCitationValid],\n  medications: [mockMedicationValid],\n  riskStratification: {\n    criteria: 'HEART Score',\n    lowRisk: '0-3 pontos: Baixo risco (< 2% de eventos em 6 semanas)',\n    moderateRisk: '4-6 pontos: Risco moderado (12-20% de eventos)',\n    highRisk: '7-10 pontos: Alto risco (>50% de eventos)',\n    reference: mockCitationValid,\n    calculatorUrl: 'https://www.mdcalc.com/calc/1752/heart-score',\n  },\n  susGuidelines: 'Protocolo de SCA do Ministério da Saúde',\n  brazilianEpidemiology:\n    'IAM é a principal causa de morte no Brasil (>100.000 óbitos/ano)',\n  brazilianAdaptations: [\n    'Troponina ultrassensível não disponível em maioria dos hospitais SUS: usar troponina convencional 0h, 6h, 12h',\n    'Cateterismo primário ideal <90min, mas fila média é 48-72h em hospitais públicos',\n    'Fibrinólise com Estreptoquinase é alternativa quando cateterismo indisponível',\n  ],\n  susDiagnosticAvailability:\n    'ECG e troponina disponíveis. Ecocardiograma com fila. Cateterismo limitado.',\n  susReferralPathway:\n    'PA → UPA (ECG + troponina) → Hospital de referência (cateterismo)',\n}\n\n// ============================================================================\n// Testes\n// ============================================================================\n\nfunction runTests() {\n  console.log('\\n' + '='.repeat(80))\n  console.log('🧪 TESTES DE VALIDAÇÃO EBM - FASE 1')\n  console.log('='.repeat(80) + '\\n')\n\n  // Teste 1: Citação válida\n  console.log('📝 Teste 1: Validar citação EBM válida')\n  const citationValidResult = validateCitations([mockCitationValid])\n  console.log(formatValidationResult(citationValidResult))\n\n  // Teste 2: Citação inválida\n  console.log('\\n📝 Teste 2: Validar citação EBM inválida (espera-se erros)')\n  const citationInvalidResult = validateCitations([\n    mockCitationInvalid as EBMCitation,\n  ])\n  console.log(formatValidationResult(citationInvalidResult))\n\n  // Teste 3: Medicação válida\n  console.log('\\n💊 Teste 3: Validar medicação válida')\n  const medicationValidResult = validateMedications([mockMedicationValid])\n  console.log(formatValidationResult(medicationValidResult))\n\n  // Teste 4: Medicação inválida\n  console.log('\\n💊 Teste 4: Validar medicação inválida (espera-se erros)')\n  const medicationInvalidResult = validateMedications([\n    mockMedicationInvalid as MedicationRecommendation,\n  ])\n  console.log(formatValidationResult(medicationInvalidResult))\n\n  // Teste 5: Red Flag válido\n  console.log('\\n🚩 Teste 5: Validar red flag válido')\n  const redFlagValidResult = validateRedFlags([mockRedFlagValid])\n  console.log(formatValidationResult(redFlagValidResult))\n\n  // Teste 6: Red Flag inválido\n  console.log('\\n🚩 Teste 6: Validar red flag inválido (espera-se erros)')\n  const redFlagInvalidResult = validateRedFlags([mockRedFlagInvalid as RedFlag])\n  console.log(formatValidationResult(redFlagInvalidResult))\n\n  // Teste 7: Conteúdo completo válido\n  console.log('\\n📋 Teste 7: Validar conteúdo EBM completo válido')\n  const contentValidResult = validateEBMContent(mockComplaintContentValid)\n  console.log(formatValidationResult(contentValidResult))\n\n  // Teste 8: Conteúdo com inconsistência RENAME\n  console.log(\n    '\\n📋 Teste 8: Validar conteúdo com inconsistência RENAME (espera-se erro)'\n  )\n  const contentWithNonRenameMed: ComplaintExtendedContentEBM = {\n    ...mockComplaintContentValid,\n    renameMedicationsOnly: true,\n    medications: [\n      mockMedicationValid,\n      {\n        ...mockMedicationValid,\n        genericName: 'Ticagrelor',\n        renameCompatible: false, // Inconsistência: marcado RENAME-only mas tem não-RENAME\n      },\n    ],\n  }\n  const contentInconsistentResult = validateEBMContent(contentWithNonRenameMed)\n  console.log(formatValidationResult(contentInconsistentResult))\n\n  // Resumo\n  console.log('\\n' + '='.repeat(80))\n  console.log('📊 RESUMO DOS TESTES')\n  console.log('='.repeat(80))\n\n  const allResults = [\n    { name: 'Citação válida', result: citationValidResult },\n    { name: 'Citação inválida', result: citationInvalidResult },\n    { name: 'Medicação válida', result: medicationValidResult },\n    { name: 'Medicação inválida', result: medicationInvalidResult },\n    { name: 'Red Flag válido', result: redFlagValidResult },\n    { name: 'Red Flag inválido', result: redFlagInvalidResult },\n    { name: 'Conteúdo completo válido', result: contentValidResult },\n    { name: 'Conteúdo inconsistente', result: contentInconsistentResult },\n  ]\n\n  allResults.forEach(({ name, result }) => {\n    const status = result.valid ? '✅ PASSOU' : '❌ FALHOU'\n    const errors = result.errors.length\n    const warnings = result.warnings.length\n    console.log(\n      `${status} - ${name} (${errors} erros, ${warnings} avisos)`\n    )\n  })\n\n  console.log('\\n' + '='.repeat(80))\n  console.log('✅ FASE 1 CONCLUÍDA: Tipos e validação funcionando!')\n  console.log('='.repeat(80) + '\\n')\n}\n\n// Executar testes\nrunTests()\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/test-narrative.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":84,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":84,"endColumn":14,"suggestions":[{"fix":{"range":[1885,1912],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":85,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":85,"endColumn":14,"suggestions":[{"fix":{"range":[1915,1966],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":86,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":86,"endColumn":14,"suggestions":[{"fix":{"range":[1969,1996],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":89,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":89,"endColumn":14,"suggestions":[{"fix":{"range":[2040,2094],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":90,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":90,"endColumn":14,"suggestions":[{"fix":{"range":[2097,2124],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":99,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":99,"endColumn":14,"suggestions":[{"fix":{"range":[2369,2395],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":100,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":100,"endColumn":14,"suggestions":[{"fix":{"range":[2398,2411],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":114,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":114,"endColumn":16,"suggestions":[{"fix":{"range":[3266,3310],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":118,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":118,"endColumn":14,"suggestions":[{"fix":{"range":[3358,3411],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":119,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":119,"endColumn":14,"suggestions":[{"fix":{"range":[3414,3441],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":128,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":128,"endColumn":14,"suggestions":[{"fix":{"range":[3700,3728],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":129,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":129,"endColumn":14,"suggestions":[{"fix":{"range":[3731,3744],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":141,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":141,"endColumn":16,"suggestions":[{"fix":{"range":[4312,4356],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":145,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":145,"endColumn":14,"suggestions":[{"fix":{"range":[4399,4466],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":146,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":146,"endColumn":14,"suggestions":[{"fix":{"range":[4469,4496],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":153,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":153,"endColumn":14,"suggestions":[{"fix":{"range":[4702,4733],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":154,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":154,"endColumn":14,"suggestions":[{"fix":{"range":[4736,4749],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":163,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":163,"endColumn":16,"suggestions":[{"fix":{"range":[5064,5108],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":167,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":167,"endColumn":14,"suggestions":[{"fix":{"range":[5146,5203],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":168,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":168,"endColumn":14,"suggestions":[{"fix":{"range":[5206,5233],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":170,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":170,"endColumn":14,"suggestions":[{"fix":{"range":[5323,5353],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":171,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":171,"endColumn":14,"suggestions":[{"fix":{"range":[5356,5369],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":181,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":181,"endColumn":16,"suggestions":[{"fix":{"range":[5886,5930],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":189,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":189,"endColumn":14,"suggestions":[{"fix":{"range":[6137,6171],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":190,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":190,"endColumn":14,"suggestions":[{"fix":{"range":[6174,6237],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":191,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":191,"endColumn":14,"suggestions":[{"fix":{"range":[6240,6267],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":194,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":194,"endColumn":16,"suggestions":[{"fix":{"range":[6299,6341],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":196,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":196,"endColumn":16,"suggestions":[{"fix":{"range":[6357,6428],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":28,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Script de Teste para Geração de Narrativa Médica\n *\n * Testa as transformações de:\n * - Gênero do paciente (masculino/feminino)\n * - Paciente pediátrico (\"Acompanhante refere...\")\n * - Escala de intensidade (leve/moderada/intensa)\n * - Termos leigos → técnicos\n */\n\nimport { generateNarrative, type PatientContext } from '../../lib/anamnese/generate-narrative'\nimport { CheckboxCategory } from '@prisma/client'\n\ntype CheckboxData = {\n  id: string\n  category: CheckboxCategory\n  displayText: string\n  narrativeText: string\n  isRedFlag: boolean\n  isNegative: boolean\n}\n\n// Checkboxes de exemplo para teste\nconst mockCheckboxes: CheckboxData[] = [\n  {\n    id: '1',\n    category: 'QP',\n    displayText: 'Dor torácica',\n    narrativeText: 'dor torácica',\n    isRedFlag: false,\n    isNegative: false,\n  },\n  {\n    id: '2',\n    category: 'HDA',\n    displayText: 'Enjoo e náuseas',\n    narrativeText: 'enjoo e vômitos há 2 dias',\n    isRedFlag: false,\n    isNegative: false,\n  },\n  {\n    id: '3',\n    category: 'HDA',\n    displayText: 'Falta de ar',\n    narrativeText: 'falta de ar aos esforços',\n    isRedFlag: false,\n    isNegative: false,\n  },\n  {\n    id: '4',\n    category: 'EXAME_FISICO',\n    displayText: 'Corado e hidratado',\n    narrativeText: 'corado, hidratado, afebril',\n    isRedFlag: false,\n    isNegative: false,\n  },\n  {\n    id: '5',\n    category: 'EXAME_FISICO',\n    displayText: 'Orientado',\n    narrativeText: 'orientado no tempo e espaço',\n    isRedFlag: false,\n    isNegative: false,\n  },\n  {\n    id: '6',\n    category: 'HDA',\n    displayText: 'Red Flag - Dor torácica súbita',\n    narrativeText: 'ALERTA: dor torácica de início súbito',\n    isRedFlag: true,\n    isNegative: false,\n  },\n  {\n    id: '7',\n    category: 'NEGATIVAS',\n    displayText: 'Nega febre',\n    narrativeText: 'febre',\n    isRedFlag: false,\n    isNegative: true,\n  },\n]\n\nfunction runTests() {\n  console.log('='.repeat(80))\n  console.log('TESTE DE GERAÇÃO DE NARRATIVA MÉDICA')\n  console.log('='.repeat(80))\n\n  // Teste 1: Paciente masculino adulto\n  console.log('\\n📋 TESTE 1: Paciente MASCULINO ADULTO')\n  console.log('-'.repeat(60))\n  const contextMale: PatientContext = {\n    gender: 'M',\n    isPediatric: false,\n    painIntensity: 7,\n    evolutionType: 'agudo',\n    onsetType: 'súbito',\n  }\n  const narrativeMale = generateNarrative(mockCheckboxes, 'SUMMARY', contextMale)\n  console.log(narrativeMale)\n  console.log()\n\n  // Verificações\n  const maleChecks = [\n    { test: 'Contém \"corado\"', pass: narrativeMale.includes('corado') && !narrativeMale.includes('corada') },\n    { test: 'Contém \"hidratado\"', pass: narrativeMale.includes('hidratado') && !narrativeMale.includes('hidratada') },\n    { test: 'Contém \"orientado\"', pass: narrativeMale.includes('orientado') && !narrativeMale.includes('orientada') },\n    { test: 'Contém \"Refere\" (não pediátrico)', pass: narrativeMale.includes('Refere') && !narrativeMale.includes('Acompanhante') },\n    { test: 'Contém \"náuseas\" (termo técnico)', pass: narrativeMale.includes('náuseas') },\n    { test: 'Contém \"dispneia\" (termo técnico)', pass: narrativeMale.includes('dispneia') },\n    { test: 'Contém \"forte intensidade\"', pass: narrativeMale.includes('forte intensidade') },\n  ]\n\n  maleChecks.forEach(({ test, pass }) => {\n    console.log(`  ${pass ? '✅' : '❌'} ${test}`)\n  })\n\n  // Teste 2: Paciente feminino adulto\n  console.log('\\n📋 TESTE 2: Paciente FEMININO ADULTO')\n  console.log('-'.repeat(60))\n  const contextFemale: PatientContext = {\n    gender: 'F',\n    isPediatric: false,\n    painIntensity: 3,\n    evolutionType: 'subagudo',\n    onsetType: 'progressivo',\n  }\n  const narrativeFemale = generateNarrative(mockCheckboxes, 'SUMMARY', contextFemale)\n  console.log(narrativeFemale)\n  console.log()\n\n  // Verificações\n  const femaleChecks = [\n    { test: 'Contém \"corada\"', pass: narrativeFemale.includes('corada') },\n    { test: 'Contém \"hidratada\"', pass: narrativeFemale.includes('hidratada') },\n    { test: 'Contém \"orientada\"', pass: narrativeFemale.includes('orientada') },\n    { test: 'Contém \"Refere\" (não pediátrico)', pass: narrativeFemale.includes('Refere') && !narrativeFemale.includes('Acompanhante') },\n    { test: 'Contém \"leve intensidade\"', pass: narrativeFemale.includes('leve intensidade') },\n  ]\n\n  femaleChecks.forEach(({ test, pass }) => {\n    console.log(`  ${pass ? '✅' : '❌'} ${test}`)\n  })\n\n  // Teste 3: Paciente pediátrico\n  console.log('\\n📋 TESTE 3: Paciente PEDIÁTRICO (criança < 6 anos)')\n  console.log('-'.repeat(60))\n  const contextPediatric: PatientContext = {\n    gender: 'M',\n    isPediatric: true,\n    painIntensity: 5,\n  }\n  const narrativePediatric = generateNarrative(mockCheckboxes, 'SUMMARY', contextPediatric)\n  console.log(narrativePediatric)\n  console.log()\n\n  // Verificações\n  const pediatricChecks = [\n    { test: 'Contém \"Acompanhante refere\"', pass: narrativePediatric.includes('Acompanhante refere') },\n    { test: 'Contém \"moderada intensidade\"', pass: narrativePediatric.includes('moderada intensidade') },\n  ]\n\n  pediatricChecks.forEach(({ test, pass }) => {\n    console.log(`  ${pass ? '✅' : '❌'} ${test}`)\n  })\n\n  // Teste 4: Modo detalhado\n  console.log('\\n📋 TESTE 4: Modo DETALHADO (com títulos)')\n  console.log('-'.repeat(60))\n  const narrativeDetailed = generateNarrative(mockCheckboxes, 'DETAILED', contextMale)\n  console.log(narrativeDetailed)\n  console.log()\n\n  const detailedChecks = [\n    { test: 'Contém título \"Queixa Principal\"', pass: narrativeDetailed.includes('**Queixa Principal:**') },\n    { test: 'Contém título \"História da Doença Atual\"', pass: narrativeDetailed.includes('**História da Doença Atual:**') },\n    { test: 'Contém título \"Exame Físico\"', pass: narrativeDetailed.includes('**Exame Físico:**') },\n    { test: 'Contém \"SINAIS DE ALARME\"', pass: narrativeDetailed.includes('SINAIS DE ALARME') },\n  ]\n\n  detailedChecks.forEach(({ test, pass }) => {\n    console.log(`  ${pass ? '✅' : '❌'} ${test}`)\n  })\n\n  // Resumo final\n  const allChecks = [...maleChecks, ...femaleChecks, ...pediatricChecks, ...detailedChecks]\n  const passed = allChecks.filter(c => c.pass).length\n  const total = allChecks.length\n\n  console.log('\\n' + '='.repeat(80))\n  console.log(`RESUMO: ${passed}/${total} verificações passaram`)\n  console.log('='.repeat(80))\n\n  if (passed === total) {\n    console.log('✅ TODOS OS TESTES PASSARAM!')\n  } else {\n    console.log('⚠️  Alguns testes falharam. Verifique as implementações.')\n  }\n}\n\nrunTests()\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/utils/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/utils/ebm-validator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/utils/markdown-parser.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SYNC_CONFIG' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Parser de Markdown para extrair frontmatter e conteúdo estruturado\n */\n\nimport matter from 'gray-matter';\nimport fs from 'fs';\nimport path from 'path';\nimport { SYNC_CONFIG } from './config';\n\n// Interface para complaint parseada do Obsidian\nexport interface ParsedComplaint {\n  // Campos do frontmatter\n  id: string;\n  group: string;\n  title: string;\n  subtitle: string;\n  riskLevel: 'low' | 'medium' | 'high';\n  severity: number;\n  icd10Codes: string[];\n  synonyms: string[];\n  searchTerms: string[];\n  chips: string[];\n  ageTargets: string[];\n  isTopForAdult: boolean;\n  isTopForChild: boolean;\n  isFastTrack: boolean;\n  searchWeight: number;\n  bodySystem: string[];\n  relatedSymptoms: string[];\n  commonMisconceptions: string[];\n  lastSync: string;\n  syncSource: 'obsidian' | 'typescript';\n\n  // Conteúdo estendido extraído do Markdown\n  extendedContent: {\n    redFlags: string[];\n    diagnosticoDiferencial: string[];\n    condutaInicial: string;\n    calculadoras: string[];\n    sintomasRelacionados: string[];\n    referencias: string[];\n    rawMarkdown: string;\n  };\n\n  // Metadados\n  filePath: string;\n  fileModified: Date;\n}\n\n/**\n * Extrai título e subtítulo do conteúdo Markdown\n */\nfunction extractTitleAndSubtitle(content: string): { title: string; subtitle: string } {\n  const lines = content.split('\\n');\n  let title = '';\n  let subtitle = '';\n\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (trimmed.startsWith('# ') && !title) {\n      title = trimmed.replace('# ', '');\n    } else if (trimmed.startsWith('> ') && !subtitle) {\n      subtitle = trimmed.replace('> ', '');\n      break;\n    }\n  }\n\n  return { title, subtitle };\n}\n\n/**\n * Extrai uma seção do Markdown pelo título\n */\nfunction extractSection(content: string, sectionTitle: string): string[] {\n  const regex = new RegExp(`## ${sectionTitle}[\\\\s\\\\S]*?(?=##|$)`, 'i');\n  const match = content.match(regex);\n\n  if (!match) return [];\n\n  const sectionContent = match[0]\n    .replace(new RegExp(`## ${sectionTitle}`, 'i'), '')\n    .trim();\n\n  // Extrai itens de lista\n  const items = sectionContent\n    .split('\\n')\n    .filter(line => line.trim().startsWith('-') || line.trim().startsWith('*'))\n    .map(line => line.replace(/^[-*]\\s*/, '').trim())\n    .filter(Boolean);\n\n  return items;\n}\n\n/**\n * Extrai conteúdo de uma seção como texto (não lista)\n * Suporta seções com ou sem emojis (ex: \"## 🚩 Red Flags\" ou \"## Red Flags\")\n */\nfunction extractSectionText(content: string, sectionTitle: string): string {\n  // Remove emojis do sectionTitle para busca flexível\n  const cleanTitle = sectionTitle.replace(/[\\u{1F000}-\\u{1F9FF}]|[\\u{2600}-\\u{26FF}]/gu, '').trim();\n\n  // Busca com ou sem emoji (usando escape de caracteres especiais do regex)\n  const escapedTitle = cleanTitle.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  const regex = new RegExp(`##\\\\s*[^\\\\n]*${escapedTitle}[\\\\s\\\\S]*?(?=\\\\n##\\\\s|$)`, 'i');\n  const match = content.match(regex);\n\n  if (!match) return '';\n\n  return match[0]\n    .replace(/##\\s*[^\\n]+/, '') // Remove header line\n    .trim();\n}\n\n/**\n * Faz parse de um arquivo Markdown do Obsidian\n */\nexport function parseMarkdownFile(filePath: string): ParsedComplaint | null {\n  try {\n    const fileContent = fs.readFileSync(filePath, 'utf-8');\n    const stats = fs.statSync(filePath);\n    const { data: frontmatter, content } = matter(fileContent);\n\n    // Extrai título e subtítulo do conteúdo\n    const { title, subtitle } = extractTitleAndSubtitle(content);\n\n    // Extrai ID do nome do arquivo se não estiver no frontmatter\n    const fileName = path.basename(filePath, '.md');\n    const id = frontmatter.id || fileName;\n\n    // Se não tem grupo, não é uma queixa válida\n    if (!frontmatter.grupo && !frontmatter.group) {\n      return null;\n    }\n\n    // Extrai seções do Markdown\n    // Detecta se é arquivo EBM v2.0 (verifica frontmatter ebm_version)\n    // ebm_version pode ser string \"2.0\" ou number 2.0\n    const isEBMv2 = frontmatter.ebm_version === '2.0' || frontmatter.ebm_version === 2.0;\n\n    let redFlags: string[] = [];\n    let diagnosticoDiferencial: string[] = [];\n    let condutaInicial = '';\n    let calculadoras: string[] = [];\n    let redFlagsEBM: RedFlag[] | undefined;\n    let medicationsEBM: MedicationRecommendation[] | undefined;\n    let citationsEBM: EBMCitation[] | undefined;\n    let ddEBM: DifferentialDiagnosis[] | undefined;\n    let acaoImediata = '';\n\n    if (isEBMv2) {\n      // Usar funções EBM avançadas\n      redFlagsEBM = parseRedFlagsStructured(content);\n      medicationsEBM = parseMedicationsTable(content);\n      citationsEBM = parseEBMCitations(content);\n      ddEBM = parseDifferentialDiagnosisTable(content);\n\n      // Extrair seção ⚡ AÇÃO IMEDIATA\n      acaoImediata = extractSectionText(content, 'AÇÃO IMEDIATA');\n\n      // Fallback para arrays simples (para compatibilidade)\n      redFlags = redFlagsEBM.map(rf => rf.description);\n      diagnosticoDiferencial = ddEBM?.map(dd => dd.condition) || [];\n    } else {\n      // Arquivos antigos (sem EBM v2.0)\n      redFlags = extractSection(content, 'Red Flags');\n      diagnosticoDiferencial = extractSection(content, 'Diagnóstico Diferencial');\n      condutaInicial = extractSectionText(content, 'Conduta Inicial');\n      calculadoras = extractSection(content, 'Calculadoras Recomendadas');\n    }\n\n    const sintomasRelacionados = extractSection(content, 'Sintomas Relacionados');\n    const referencias = extractSection(content, 'Referências');\n\n    const parsed: ParsedComplaint = {\n      id,\n      group: frontmatter.grupo || frontmatter.group || '',\n      title: frontmatter.title || title || '',\n      subtitle: frontmatter.subtitle || subtitle || '',\n      riskLevel: frontmatter.risco || frontmatter.riskLevel || 'medium',\n      severity: frontmatter.severidade || frontmatter.severity || 1,\n      icd10Codes: frontmatter.icd10 || frontmatter.icd10Codes || [],\n      synonyms: frontmatter.aliases || frontmatter.synonyms || [],\n      searchTerms: frontmatter.searchTerms || [],\n      chips: frontmatter.chips || [],\n      ageTargets: frontmatter.ageTargets || ['adult'],\n      isTopForAdult: frontmatter.isTopForAdult ?? true,\n      isTopForChild: frontmatter.isTopForChild ?? false,\n      isFastTrack: frontmatter.isFastTrack ?? false,\n      searchWeight: frontmatter.searchWeight || 1.0,\n      bodySystem: frontmatter.bodySystem || [],\n      relatedSymptoms: frontmatter.relatedSymptoms || sintomasRelacionados,\n      commonMisconceptions: frontmatter.commonMisconceptions || [],\n      lastSync: frontmatter.lastSync || new Date().toISOString(),\n      syncSource: 'obsidian',\n\n      extendedContent: {\n        // Campos básicos (compatibilidade)\n        redFlags,\n        diagnosticoDiferencial,\n        condutaInicial,\n        calculadoras,\n        sintomasRelacionados,\n        referencias,\n        rawMarkdown: content,\n\n        // Campos EBM v2.0 (se disponível)\n        ...(isEBMv2 && {\n          redFlagsStructured: redFlagsEBM,\n          medications: medicationsEBM,\n          ebmCitations: citationsEBM,\n          differentialDiagnosisTable: ddEBM,\n          acaoImediata,\n        }),\n      },\n\n      filePath,\n      fileModified: stats.mtime,\n    };\n\n    return parsed;\n  } catch (error) {\n    console.error(`Erro ao parsear ${filePath}:`, error);\n    return null;\n  }\n}\n\n/**\n * Gera frontmatter YAML a partir de uma complaint\n */\nexport function generateFrontmatter(complaint: Partial<ParsedComplaint>): string {\n  const frontmatter: Record<string, unknown> = {\n    id: complaint.id,\n    tags: ['wellwave', 'queixa', complaint.group, complaint.riskLevel].filter(Boolean),\n    grupo: complaint.group,\n    risco: complaint.riskLevel,\n    severidade: complaint.severity,\n    icd10: complaint.icd10Codes,\n    aliases: complaint.synonyms,\n    searchTerms: complaint.searchTerms,\n    chips: complaint.chips,\n    ageTargets: complaint.ageTargets,\n    isTopForAdult: complaint.isTopForAdult,\n    isTopForChild: complaint.isTopForChild,\n    isFastTrack: complaint.isFastTrack,\n    searchWeight: complaint.searchWeight,\n    bodySystem: complaint.bodySystem,\n    relatedSymptoms: complaint.relatedSymptoms,\n    commonMisconceptions: complaint.commonMisconceptions,\n    lastSync: new Date().toISOString(),\n  };\n\n  // Remove valores undefined/null\n  Object.keys(frontmatter).forEach(key => {\n    if (frontmatter[key] === undefined || frontmatter[key] === null) {\n      delete frontmatter[key];\n    }\n  });\n\n  return matter.stringify('', frontmatter).trim();\n}\n\n/**\n * Gera conteúdo Markdown completo a partir de uma complaint\n */\nexport function generateMarkdownContent(complaint: ParsedComplaint): string {\n  const sections: string[] = [];\n\n  // Título e subtítulo\n  sections.push(`# ${complaint.title}`);\n  if (complaint.subtitle) {\n    sections.push(`\\n> ${complaint.subtitle}`);\n  }\n\n  // Informações Gerais\n  sections.push(`\\n## Informações Gerais\\n`);\n  sections.push(`- **Código**: \\`${complaint.id}\\``);\n  sections.push(`- **Grupo**: [[${complaint.group}]]`);\n  const riskEmoji = complaint.riskLevel === 'high' ? '🔴' : complaint.riskLevel === 'medium' ? '🟡' : '🟢';\n  sections.push(`- **Nível de Risco**: ${riskEmoji} ${complaint.riskLevel}`);\n  sections.push(`- **Severidade**: ${complaint.severity}/5`);\n  sections.push(`- **Fast Track**: ${complaint.isFastTrack ? 'Sim' : 'Não'}`);\n\n  // Sintomas Relacionados\n  if (complaint.relatedSymptoms?.length || complaint.extendedContent?.sintomasRelacionados?.length) {\n    sections.push(`\\n## Sintomas Relacionados\\n`);\n    const symptoms = complaint.relatedSymptoms?.length\n      ? complaint.relatedSymptoms\n      : complaint.extendedContent?.sintomasRelacionados || [];\n    symptoms.forEach(s => sections.push(`- ${s}`));\n  }\n\n  // Red Flags\n  if (complaint.extendedContent?.redFlags?.length) {\n    sections.push(`\\n## Red Flags 🚩\\n`);\n    complaint.extendedContent.redFlags.forEach(rf => sections.push(`- ${rf}`));\n  }\n\n  // Diagnóstico Diferencial\n  if (complaint.extendedContent?.diagnosticoDiferencial?.length) {\n    sections.push(`\\n## Diagnóstico Diferencial\\n`);\n    complaint.extendedContent.diagnosticoDiferencial.forEach(dd => sections.push(`- ${dd}`));\n  }\n\n  // Calculadoras\n  if (complaint.extendedContent?.calculadoras?.length) {\n    sections.push(`\\n## Calculadoras Recomendadas\\n`);\n    complaint.extendedContent.calculadoras.forEach(c => sections.push(`- ${c}`));\n  }\n\n  // Conduta Inicial\n  if (complaint.extendedContent?.condutaInicial) {\n    sections.push(`\\n## Conduta Inicial\\n`);\n    sections.push(complaint.extendedContent.condutaInicial);\n  }\n\n  // CID-10\n  if (complaint.icd10Codes?.length) {\n    sections.push(`\\n## CID-10\\n`);\n    sections.push(`| Código | Descrição |`);\n    sections.push(`|--------|-----------|`);\n    complaint.icd10Codes.forEach(code => {\n      sections.push(`| ${code} | - |`);\n    });\n  }\n\n  // Termos de Busca\n  if (complaint.searchTerms?.length) {\n    sections.push(`\\n## Termos de Busca\\n`);\n    sections.push(`\\`${complaint.searchTerms.join('` `')}\\``);\n  }\n\n  // Footer\n  sections.push(`\\n---`);\n  sections.push(`*Fonte: WellWave complaintsData.ts*`);\n  sections.push(`*Última sincronização: ${new Date().toISOString()}*`);\n\n  return sections.join('\\n');\n}\n\n// ============================================================================\n// Funções de Parsing EBM (Evidence-Based Medicine)\n// ============================================================================\n\nimport type {\n  RedFlag,\n  MedicationRecommendation,\n  EBMCitation,\n  DifferentialDiagnosis,\n  RedFlagSeverity,\n  MedicationRoute,\n  EvidenceLevel,\n  EBMSource,\n  DiagnosisProbability,\n} from '../../../lib/types/medical';\n\n/**\n * Parseia Red Flags estruturados com severidade\n *\n * Formato esperado:\n * ## Red Flags 🚩\n *\n * ### Críticos (Risco de Morte Imediato)\n * - [ ] [Descrição]\n *   - **Ação**: [Ação imediata]\n *   - **Fonte**: [[referência]]\n */\nexport function parseRedFlagsStructured(content: string): RedFlag[] {\n  const redFlags: RedFlag[] = [];\n\n  // Extrai seção de Red Flags\n  const redFlagSection = content.match(/## Red Flags[\\s\\S]*?(?=\\n##\\s|$)/);\n  if (!redFlagSection) return redFlags;\n\n  const section = redFlagSection[0];\n\n  // Parseia seções por severidade\n  const severityMap: Record<string, RedFlagSeverity> = {\n    'Críticos': 'critical',\n    'Alertas': 'warning',\n    'Atenção': 'caution',\n  };\n\n  Object.entries(severityMap).forEach(([keyword, severity]) => {\n    const severityRegex = new RegExp(`### ${keyword}[\\\\s\\\\S]*?(?=\\\\n###|\\\\n##|$)`);\n    const severityMatch = section.match(severityRegex);\n\n    if (severityMatch) {\n      const severityContent = severityMatch[0];\n\n      // Extrai checkboxes com detalhes\n      const lines = severityContent.split('\\n');\n      let i = 0;\n\n      while (i < lines.length) {\n        const line = lines[i];\n\n        if (line.trim().startsWith('- [ ]')) {\n          const description = line.replace('- [ ]', '').trim();\n          let immediateAction = 'Avaliar imediatamente';\n          let timeToAction: number | undefined;\n\n          // Procura por linhas de detalhes\n          i++;\n          while (i < lines.length && lines[i].trim().startsWith('-')) {\n            const detailLine = lines[i].trim();\n\n            // Extrai ação\n            const actionMatch = detailLine.match(/\\*\\*Ação\\*\\*:\\s*(.+)/);\n            if (actionMatch) {\n              immediateAction = actionMatch[1].trim();\n\n              // Extrai tempo da ação (ex: <10min)\n              const timeMatch = immediateAction.match(/<(\\d+)min/);\n              if (timeMatch) {\n                timeToAction = parseInt(timeMatch[1]);\n              }\n            }\n\n            i++;\n          }\n\n          redFlags.push({\n            description,\n            severity,\n            clinicalSignificance: `Red flag de severidade ${severity}`,\n            immediateAction,\n            timeToAction,\n          });\n\n          continue;\n        }\n\n        i++;\n      }\n    }\n  });\n\n  return redFlags;\n}\n\n/**\n * Parseia Medicações estruturadas com doses e flags SUS/RENAME\n *\n * Formato esperado:\n * ## Medicações\n *\n * #### Nome Genérico\n * - **Dose**: 300mg VO\n * - **SUS**: ✅ Sim (RENAME Lista A)\n * - **Evidência**: Nível A\n * - **Referência**: [[link]]\n */\nexport function parseMedicationsTable(content: string): MedicationRecommendation[] {\n  const medications: MedicationRecommendation[] = [];\n\n  // Extrai seção de Medicações\n  const medSection = content.match(/## Medicações[\\s\\S]*?(?=\\n##\\s|$)/);\n  if (!medSection) return medications;\n\n  const section = medSection[0];\n\n  // Parseia cada medicação (#### Nome)\n  const medRegex = /####\\s+(.+?)\\n([\\s\\S]*?)(?=\\n####|\\n##|$)/g;\n  let match;\n\n  while ((match = medRegex.exec(section)) !== null) {\n    const genericName = match[1].trim();\n    const details = match[2];\n\n    // Extrai dose\n    const doseMatch = details.match(/\\*\\*Dose\\*\\*:\\s*(.+?)(?=\\n|$)/m);\n    const doseString = doseMatch ? doseMatch[1].trim() : '';\n\n    // Parse dose e via\n    const routeMatch = doseString.match(/(VO|IV|IM|SC|Inalatório|Tópico|SL|Retal|Nasal|Ocular)/);\n    const route = (routeMatch ? routeMatch[1] : 'VO') as MedicationRoute;\n    const dose = doseString.replace(route, '').trim();\n\n    // Extrai frequência (se houver)\n    const freqMatch = details.match(/\\*\\*Frequência\\*\\*:\\s*(.+?)(?=\\n|$)/m);\n    const frequency = freqMatch ? freqMatch[1].trim() : '1x/dia';\n\n    // Extrai SUS\n    const susMatch = details.match(/\\*\\*SUS\\*\\*:\\s*(✅|❌)\\s*(Sim|Não)/);\n    const susAvailable = susMatch ? susMatch[1] === '✅' : false;\n\n    // Extrai RENAME\n    const renameMatch = details.match(/RENAME Lista ([ABC])/);\n    const renameList = renameMatch ? renameMatch[1] as 'A' | 'B' | 'C' : undefined;\n    const renameCompatible = !!renameList;\n\n    // Extrai evidência\n    const evidenceMatch = details.match(/\\*\\*Evidência\\*\\*:\\s*Nível ([ABCD])/);\n    const evidenceLevel = evidenceMatch ? evidenceMatch[1] as EvidenceLevel : undefined;\n\n    medications.push({\n      genericName,\n      dose,\n      route,\n      frequency,\n      susAvailable,\n      renameCompatible,\n      renameList,\n      evidenceLevel,\n    });\n  }\n\n  return medications;\n}\n\n/**\n * Parseia Citações EBM\n *\n * Formato esperado:\n * ## Referências EBM\n *\n * ### UpToDate\n * 1. [[uptodate-titulo]]\n *    - PMID: 12345678\n *    - Evidence: A\n */\nexport function parseEBMCitations(content: string): EBMCitation[] {\n  const citations: EBMCitation[] = [];\n\n  // Extrai seção de Referências EBM\n  const refSection = content.match(/## Referências EBM[\\s\\S]*?(?=\\n##\\s|$)/);\n  if (!refSection) return citations;\n\n  const section = refSection[0];\n\n  // Detecta fonte (UpToDate, DynaMed, Diretrizes Brasileiras)\n  const sourceMap: Record<string, EBMSource> = {\n    'UpToDate': 'uptodate',\n    'DynaMed': 'dynamed',\n    'Diretrizes Brasileiras': 'brazilian-guideline',\n    'SBC': 'sbc',\n    'SBPT': 'sbpt',\n  };\n\n  Object.entries(sourceMap).forEach(([keyword, source]) => {\n    const sourceRegex = new RegExp(`### ${keyword}[\\\\s\\\\S]*?(?=\\\\n###|\\\\n##|$)`);\n    const sourceMatch = section.match(sourceRegex);\n\n    if (sourceMatch) {\n      const sourceContent = sourceMatch[0];\n\n      // Extrai citações (numeradas com [[]])\n      const citationRegex = /\\d+\\.\\s*\\[\\[(.+?)\\]\\]([\\s\\S]*?)(?=\\n\\d+\\.|\\n###|\\n##|$)/g;\n      let match;\n\n      while ((match = citationRegex.exec(sourceContent)) !== null) {\n        const title = match[1].trim();\n        const details = match[2] || '';\n\n        // Extrai PMID\n        const pmidMatch = details.match(/PMID:\\s*(\\d{8})/);\n        const pmid = pmidMatch ? pmidMatch[1] : undefined;\n\n        // Extrai DOI\n        const doiMatch = details.match(/DOI:\\s*(10\\.\\S+)/);\n        const doi = doiMatch ? doiMatch[1] : undefined;\n\n        // Extrai Evidence level\n        const evidenceMatch = details.match(/Evidence:\\s*([ABCD])/);\n        const evidenceLevel = evidenceMatch ? evidenceMatch[1] as EvidenceLevel : undefined;\n\n        // Extrai URL\n        const urlMatch = details.match(/URL:\\s*(.+?)(?=\\n|$)/);\n        const url = urlMatch ? urlMatch[1].trim() : undefined;\n\n        citations.push({\n          source,\n          title,\n          pmid,\n          doi,\n          url,\n          evidenceLevel,\n          lastAccessed: new Date().toISOString(),\n        });\n      }\n    }\n  });\n\n  return citations;\n}\n\n/**\n * Parseia Tabela de Diagnóstico Diferencial\n *\n * Formato esperado:\n * ## Diagnóstico Diferencial\n *\n * | Condição | ICD-10 | Probabilidade | Características | Referência |\n * |----------|--------|---------------|-----------------|------------|\n * | IAM | I21.9 | Alta | Dor típica, troponina+ | [[ref]] |\n */\nexport function parseDifferentialDiagnosisTable(content: string): DifferentialDiagnosis[] {\n  const diagnoses: DifferentialDiagnosis[] = [];\n\n  // Extrai seção de Diagnóstico Diferencial\n  const ddSection = content.match(/## Diagnóstico Diferencial.*?(?=##|$)/s);\n  if (!ddSection) return diagnoses;\n\n  const section = ddSection[0];\n\n  // Extrai tabela markdown\n  const tableRegex = /\\|(.+?)\\|(.+?)\\|(.+?)\\|(.+?)\\|(.+?)\\|/g;\n  let match;\n  let isHeader = true;\n\n  while ((match = tableRegex.exec(section)) !== null) {\n    // Pula header e separator\n    if (isHeader) {\n      isHeader = false;\n      continue;\n    }\n\n    const condition = match[1].trim();\n    const icd10 = match[2].trim();\n    const probabilityText = match[3].trim().toLowerCase();\n    const characteristics = match[4].trim();\n\n    // Skip separator row\n    if (condition.includes('---')) continue;\n\n    // Map probabilidade\n    let probability: DiagnosisProbability = 'medium';\n    if (probabilityText.includes('alta') || probabilityText.includes('high')) {\n      probability = 'high';\n    } else if (probabilityText.includes('baixa') || probabilityText.includes('low')) {\n      probability = 'low';\n    }\n\n    // Parse características\n    const keyFeatures = characteristics.split(',').map(f => f.trim());\n\n    diagnoses.push({\n      condition,\n      icd10: icd10 !== '-' ? icd10 : undefined,\n      probability,\n      keyFeatures,\n    });\n  }\n\n  return diagnoses;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/utils/obsidian-render.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/utils/sync-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/validate.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":138,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":138,"endColumn":14,"suggestions":[{"fix":{"range":[3431,3495],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":155,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":155,"endColumn":14,"suggestions":[{"fix":{"range":[3816,3898],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":164,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":164,"endColumn":18,"suggestions":[{"fix":{"range":[4083,4161],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":180,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":180,"endColumn":18,"suggestions":[{"fix":{"range":[4610,4685],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":184,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":184,"endColumn":18,"suggestions":[{"fix":{"range":[4812,4893],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":187,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":187,"endColumn":18,"suggestions":[{"fix":{"range":[4946,4992],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":199,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":199,"endColumn":14,"suggestions":[{"fix":{"range":[5221,5276],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":200,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":200,"endColumn":14,"suggestions":[{"fix":{"range":[5279,5355],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":201,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":201,"endColumn":14,"suggestions":[{"fix":{"range":[5358,5437],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":202,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":202,"endColumn":14,"suggestions":[{"fix":{"range":[5440,5511],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":205,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":205,"endColumn":16,"suggestions":[{"fix":{"range":[5556,5627],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":209,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":209,"endColumn":16,"suggestions":[{"fix":{"range":[5671,5736],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":211,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":211,"endColumn":18,"suggestions":[{"fix":{"range":[5784,5849],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":212,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":212,"endColumn":18,"suggestions":[{"fix":{"range":[5856,5926],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":217,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":217,"endColumn":16,"suggestions":[{"fix":{"range":[5978,6051],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":225,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":225,"endColumn":18,"suggestions":[{"fix":{"range":[6362,6426],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":230,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":230,"endColumn":16,"suggestions":[{"fix":{"range":[6464,6529],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":232,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":232,"endColumn":16,"suggestions":[{"fix":{"range":[6545,6638],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * Valida dados de queixas do Obsidian e TypeScript\n *\n * Uso: npm run sync:validate\n */\n\nimport { glob } from 'glob';\nimport path from 'path';\nimport chalk from 'chalk';\nimport { PATHS } from './utils/config';\nimport { parseMarkdownFile, ParsedComplaint } from './utils/markdown-parser';\nimport { validateComplaintFrontmatter } from '../../lib/validation/complaints';\n\ninterface ValidationError {\n  file: string;\n  field: string;\n  message: string;\n  severity: 'error' | 'warning';\n}\n\ninterface ValidationResult {\n  valid: boolean;\n  errors: ValidationError[];\n  warnings: ValidationError[];\n  stats: {\n    totalFiles: number;\n    validFiles: number;\n    invalidFiles: number;\n    totalComplaints: number;\n  };\n}\n\n/**\n * Valida uma complaint parseada\n */\nfunction validateComplaint(complaint: ParsedComplaint): ValidationError[] {\n  const errors: ValidationError[] = [];\n  const file = complaint.filePath;\n\n  const frontmatterResult = validateComplaintFrontmatter({\n    id: complaint.id,\n    group: complaint.group,\n    title: complaint.title,\n    subtitle: complaint.subtitle,\n    riskLevel: complaint.riskLevel,\n    severity: complaint.severity,\n    icd10Codes: complaint.icd10Codes,\n    synonyms: complaint.synonyms,\n    searchTerms: complaint.searchTerms,\n    chips: complaint.chips,\n    ageTargets: complaint.ageTargets,\n    isTopForAdult: complaint.isTopForAdult,\n    isTopForChild: complaint.isTopForChild,\n    isFastTrack: complaint.isFastTrack,\n    searchWeight: complaint.searchWeight,\n    bodySystem: complaint.bodySystem,\n    relatedSymptoms: complaint.relatedSymptoms,\n    commonMisconceptions: complaint.commonMisconceptions,\n  });\n\n  frontmatterResult.errors.forEach((issue) => {\n    errors.push({\n      file,\n      field: issue.field,\n      message: issue.message,\n      severity: issue.severity,\n    });\n  });\n\n  frontmatterResult.warnings.forEach((issue) => {\n    errors.push({\n      file,\n      field: issue.field,\n      message: issue.message,\n      severity: issue.severity,\n    });\n  });\n\n  // Recomendações de conteúdo\n  if (!complaint.extendedContent?.redFlags?.length) {\n    errors.push({\n      file,\n      field: 'redFlags',\n      message: 'Recomendado incluir Red Flags',\n      severity: 'warning',\n    });\n  }\n\n  return errors;\n}\n\n/**\n * Encontra todos os arquivos .md de queixas no vault\n */\nasync function findComplaintFiles(): Promise<string[]> {\n  const pattern = path.join(PATHS.queixas, '**/*.md');\n  const files = await glob(pattern);\n\n  // Filtra arquivos de índice\n  return files.filter(f => {\n    const basename = path.basename(f);\n    return !basename.startsWith('_') && !basename.startsWith('00 -');\n  });\n}\n\n/**\n * Verifica duplicatas de ID\n */\nfunction checkDuplicates(complaints: ParsedComplaint[]): ValidationError[] {\n  const errors: ValidationError[] = [];\n  const idMap = new Map<string, string[]>();\n\n  for (const complaint of complaints) {\n    const existing = idMap.get(complaint.id) || [];\n    existing.push(complaint.filePath);\n    idMap.set(complaint.id, existing);\n  }\n\n  for (const [id, files] of idMap) {\n    if (files.length > 1) {\n      errors.push({\n        file: files.join(', '),\n        field: 'id',\n        message: `ID duplicado: ${id} encontrado em ${files.length} arquivos`,\n        severity: 'error',\n      });\n    }\n  }\n\n  return errors;\n}\n\n/**\n * Função principal de validação\n */\nasync function validate(): Promise<ValidationResult> {\n  console.log(chalk.blue('\\n🔍 Validando dados de queixas...\\n'));\n\n  const result: ValidationResult = {\n    valid: true,\n    errors: [],\n    warnings: [],\n    stats: {\n      totalFiles: 0,\n      validFiles: 0,\n      invalidFiles: 0,\n      totalComplaints: 0,\n    },\n  };\n\n  // 1. Encontra arquivos\n  const files = await findComplaintFiles();\n  result.stats.totalFiles = files.length;\n  console.log(chalk.gray(`   Encontrados ${files.length} arquivos para validar\\n`));\n\n  // 2. Parseia e valida cada arquivo\n  const complaints: ParsedComplaint[] = [];\n\n  for (const file of files) {\n    const parsed = parseMarkdownFile(file);\n\n    if (!parsed) {\n      console.log(chalk.yellow(`   ⚠ Não é queixa válida: ${path.basename(file)}`));\n      continue;\n    }\n\n    complaints.push(parsed);\n    result.stats.totalComplaints++;\n\n    const validationErrors = validateComplaint(parsed);\n\n    const fileErrors = validationErrors.filter(e => e.severity === 'error');\n    const fileWarnings = validationErrors.filter(e => e.severity === 'warning');\n\n    if (fileErrors.length > 0) {\n      result.stats.invalidFiles++;\n      result.errors.push(...fileErrors);\n      result.valid = false;\n      console.log(chalk.red(`   ✗ ${parsed.id} - ${fileErrors.length} erro(s)`));\n    } else if (fileWarnings.length > 0) {\n      result.stats.validFiles++;\n      result.warnings.push(...fileWarnings);\n      console.log(chalk.yellow(`   ⚠ ${parsed.id} - ${fileWarnings.length} aviso(s)`));\n    } else {\n      result.stats.validFiles++;\n      console.log(chalk.green(`   ✓ ${parsed.id}`));\n    }\n  }\n\n  // 3. Verifica duplicatas\n  const duplicateErrors = checkDuplicates(complaints);\n  if (duplicateErrors.length > 0) {\n    result.errors.push(...duplicateErrors);\n    result.valid = false;\n  }\n\n  // 4. Exibe resumo\n  console.log(chalk.blue('\\n📊 Resumo da Validação:\\n'));\n  console.log(chalk.gray(`   Total de arquivos: ${result.stats.totalFiles}`));\n  console.log(chalk.gray(`   Queixas válidas: ${result.stats.totalComplaints}`));\n  console.log(chalk.green(`   ✓ Sem erros: ${result.stats.validFiles}`));\n\n  if (result.stats.invalidFiles > 0) {\n    console.log(chalk.red(`   ✗ Com erros: ${result.stats.invalidFiles}`));\n  }\n\n  if (result.errors.length > 0) {\n    console.log(chalk.red(`\\n❌ Erros (${result.errors.length}):\\n`));\n    for (const error of result.errors) {\n      console.log(chalk.red(`   • [${error.field}] ${error.message}`));\n      console.log(chalk.gray(`     Arquivo: ${path.basename(error.file)}`));\n    }\n  }\n\n  if (result.warnings.length > 0) {\n    console.log(chalk.yellow(`\\n⚠️  Avisos (${result.warnings.length}):\\n`));\n    // Agrupa warnings por tipo\n    const warningsByField = new Map<string, number>();\n    for (const warning of result.warnings) {\n      const count = warningsByField.get(warning.field) || 0;\n      warningsByField.set(warning.field, count + 1);\n    }\n    for (const [field, count] of warningsByField) {\n      console.log(chalk.yellow(`   • ${field}: ${count} arquivo(s)`));\n    }\n  }\n\n  if (result.valid) {\n    console.log(chalk.green('\\n✅ Validação concluída sem erros!\\n'));\n  } else {\n    console.log(chalk.red('\\n❌ Validação concluída com erros. Corrija antes de sincronizar.\\n'));\n  }\n\n  return result;\n}\n\n// Executa se chamado diretamente\nvalidate().catch(console.error);\n\nexport { validate };\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/sync/watch.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":44,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":44,"endColumn":14,"suggestions":[{"fix":{"range":[1072,1137],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":76,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":76,"endColumn":14,"suggestions":[{"fix":{"range":[1751,1810],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":108,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":108,"endColumn":14,"suggestions":[{"fix":{"range":[2486,2568],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":109,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":109,"endColumn":14,"suggestions":[{"fix":{"range":[2571,2614],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":110,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":110,"endColumn":14,"suggestions":[{"fix":{"range":[2617,2676],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":111,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":111,"endColumn":14,"suggestions":[{"fix":{"range":[2679,2752],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":112,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":112,"endColumn":14,"suggestions":[{"fix":{"range":[2755,2826],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":113,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":113,"endColumn":14,"suggestions":[{"fix":{"range":[2829,2893],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":140,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":140,"endColumn":18,"suggestions":[{"fix":{"range":[3539,3611],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":145,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":145,"endColumn":18,"suggestions":[{"fix":{"range":[3764,3836],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":149,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":149,"endColumn":18,"suggestions":[{"fix":{"range":[3963,4034],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":164,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":164,"endColumn":16,"suggestions":[{"fix":{"range":[4473,4533],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":173,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":173,"endColumn":18,"suggestions":[{"fix":{"range":[4701,4783],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":179,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":179,"endColumn":14,"suggestions":[{"fix":{"range":[4852,4925],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n/**\n * File watcher para sincronização automática bidirecional\n *\n * Uso: npm run sync:watch\n */\n\nimport chokidar from 'chokidar';\nimport path from 'path';\nimport chalk from 'chalk';\nimport { PATHS, SYNC_CONFIG } from './utils/config';\nimport { syncObsidianToDB } from './obsidian-to-db';\nimport { syncDBToObsidian } from './db-to-obsidian';\n\n// Estado para evitar loops de sincronização\nlet isSyncing = false;\nlet pendingSync: 'obsidian' | 'db' | null = null;\nlet debounceTimer: NodeJS.Timeout | null = null;\nlet lastDbSyncAt: Date | null = null;\n\n/**\n * Debounce para evitar múltiplas sincronizações\n */\nfunction debounce(fn: () => Promise<void>, delay: number): void {\n  if (debounceTimer) {\n    clearTimeout(debounceTimer);\n  }\n  debounceTimer = setTimeout(async () => {\n    debounceTimer = null;\n    await fn();\n  }, delay);\n}\n\n/**\n * Executa sincronização do Obsidian para TypeScript\n */\nasync function syncFromObsidian(filePaths?: string[]): Promise<void> {\n  if (isSyncing) {\n    pendingSync = 'obsidian';\n    return;\n  }\n\n  isSyncing = true;\n  console.log(chalk.blue('\\n📥 Detectada mudança no Obsidian...'));\n\n  try {\n    await syncObsidianToDB({ filePaths });\n  } catch (error) {\n    console.error(chalk.red('Erro na sincronização:'), error);\n  } finally {\n    isSyncing = false;\n\n    // Processa sync pendente\n    if (pendingSync) {\n      const pending = pendingSync;\n      pendingSync = null;\n      if (pending === 'obsidian') {\n        await syncFromObsidian();\n      } else {\n        await syncFromDatabase();\n      }\n    }\n  }\n}\n\n/**\n * Executa sincronização do DB para Obsidian\n */\nasync function syncFromDatabase(): Promise<void> {\n  if (isSyncing) {\n    pendingSync = 'db';\n    return;\n  }\n\n  isSyncing = true;\n  console.log(chalk.blue('\\n📤 Detectada mudança no DB...'));\n\n  try {\n    const result = await syncDBToObsidian({\n      since: lastDbSyncAt ?? undefined,\n      limit: SYNC_CONFIG.dbBatchSize,\n    });\n    if (result.lastSyncAt) {\n      lastDbSyncAt = new Date(result.lastSyncAt);\n    }\n  } catch (error) {\n    console.error(chalk.red('Erro na sincronização:'), error);\n  } finally {\n    isSyncing = false;\n\n    // Processa sync pendente\n    if (pendingSync) {\n      const pending = pendingSync;\n      pendingSync = null;\n      if (pending === 'db') {\n        await syncFromDatabase();\n      } else {\n        await syncFromObsidian();\n      }\n    }\n  }\n}\n\n/**\n * Inicia o file watcher\n */\nasync function startWatcher(): Promise<void> {\n  console.log(chalk.blue('\\n🔄 Iniciando sincronização automática bidirecional\\n'));\n  console.log(chalk.gray('   Monitorando:'));\n  console.log(chalk.gray(`   • Obsidian: ${PATHS.queixas}`));\n  console.log(chalk.gray(`\\n   Debounce: ${SYNC_CONFIG.watchDebounce}ms`));\n  console.log(chalk.gray(`   Poll DB: ${SYNC_CONFIG.dbPollInterval}ms`));\n  console.log(chalk.yellow('\\n   Pressione Ctrl+C para parar\\n'));\n\n  // Watcher para o vault do Obsidian\n  const obsidianWatcher = chokidar.watch(\n    [\n      path.join(PATHS.queixas, '**/*.md'),\n    ],\n    {\n      ignored: [\n        /(^|[/\\\\])\\../,  // Ignora arquivos ocultos\n        /_índice\\.md$/,   // Ignora índices\n        /00 - Índice/,    // Ignora índice principal\n        /-CONFLICT\\.md$/, // Ignora arquivos de conflito\n      ],\n      persistent: true,\n      ignoreInitial: true,\n      awaitWriteFinish: {\n        stabilityThreshold: 500,\n        pollInterval: 100,\n      },\n    }\n  );\n\n  // Eventos do Obsidian\n  obsidianWatcher\n    .on('change', (filePath) => {\n      if (isSyncing) return;\n      console.log(chalk.cyan(`   📝 Modificado: ${path.basename(filePath)}`));\n      debounce(() => syncFromObsidian([filePath]), SYNC_CONFIG.watchDebounce);\n    })\n    .on('add', (filePath) => {\n      if (isSyncing) return;\n      console.log(chalk.green(`   ➕ Adicionado: ${path.basename(filePath)}`));\n      debounce(() => syncFromObsidian([filePath]), SYNC_CONFIG.watchDebounce);\n    })\n    .on('unlink', (filePath) => {\n      console.log(chalk.yellow(`   ➖ Removido: ${path.basename(filePath)}`));\n      // Não sincroniza remoções automaticamente por segurança\n    })\n    .on('error', (error) => {\n      console.error(chalk.red('Erro no watcher Obsidian:'), error);\n    });\n\n  // Polling do DB para mudanças\n  const dbInterval = setInterval(() => {\n    if (isSyncing) return;\n    debounce(syncFromDatabase, SYNC_CONFIG.watchDebounce);\n  }, SYNC_CONFIG.dbPollInterval);\n\n  // Mantém o processo rodando\n  process.on('SIGINT', () => {\n    console.log(chalk.yellow('\\n\\n👋 Encerrando watcher...\\n'));\n    obsidianWatcher.close();\n    clearInterval(dbInterval);\n    process.exit(0);\n  });\n\n  // Log de status periódico\n  setInterval(() => {\n    if (!isSyncing) {\n      console.log(chalk.gray(`   [${new Date().toLocaleTimeString()}] Monitorando...`));\n    }\n  }, 60000); // A cada minuto\n\n  await syncFromDatabase();\n\n  console.log(chalk.green('✅ Watcher iniciado! Aguardando mudanças...\\n'));\n}\n\n// Executa se chamado diretamente\nstartWatcher().catch(console.error);\n\nexport { startWatcher };\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/scripts/validation/validate-high-risk.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fs' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'path' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'matter' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":467,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":467,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14398,14401],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14398,14401],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":496,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":496,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15447,15450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15447,15450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":626,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":626,"endColumn":14,"suggestions":[{"fix":{"range":[19217,19272],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'specificComplaint' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":631,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":631,"endColumn":26},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":636,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":636,"endColumn":14,"suggestions":[{"fix":{"range":[19569,19608],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * High-Risk Complaint Validation Script\n *\n * Validates that high-risk ER complaints meet all quality standards:\n * - CFM compliance (required fields)\n * - LGPD compliance (data protection)\n * - SUS/RENAME medication compatibility\n * - ICD-10 format validation\n * - Red flag requirements\n * - Checkbox count and distribution\n * - EBM reference quality\n *\n * Usage:\n *   npm run validate:high-risk\n *   npm run validate:high-risk -- --complaint CV_CHEST_PAIN_ACS\n *\n * @module validate-high-risk\n */\n\nimport fs from 'fs'\nimport path from 'path'\nimport matter from 'gray-matter'\nimport type {\n  GuidelineExtraction,\n  AnamneseCheckbox,\n  RedFlagExtended,\n  MedicationRENAME,\n  EBMReference,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n} from '@/lib/types/medical-extended'\n\n// ============================================================================\n// VALIDATION RULES\n// ============================================================================\n\nconst HIGH_RISK_VALIDATION_RULES = {\n  // Mandatory fields for high-risk complaints\n  requiredFields: [\n    'acaoImediata', // First 10 minutes protocol\n    'redFlags', // Must have ≥3 red flags\n    'medications', // SUS/RENAME compatible\n    'calculators', // Clinical decision tools (if applicable)\n    'differentialDiagnosis', // ≥3 differential diagnoses\n  ],\n\n  // ICD-10 validation\n  icd10: {\n    format: /^[A-Z]\\d{2}\\.\\d{1,2}$/, // e.g., I21.9, R06.02\n    mustExist: true,\n    allowedSystems: ['I', 'R', 'K', 'G', 'T', 'S', 'J', 'N', 'A', 'C'], // Common ER systems\n  },\n\n  // Medication validation (RENAME 2024)\n  medications: {\n    susAvailable: true, // All medications must be SUS-available\n    renameList: ['A', 'B', 'C'], // Valid RENAME lists\n    evidenceLevel: ['A', 'B'], // Minimum evidence level\n    minCount: 1, // At least 1 medication\n  },\n\n  // Red flag validation\n  redFlags: {\n    minCount: 3, // Minimum 3 red flags\n    requiredSeverities: ['critical'], // Must have ≥1 critical red flag\n    maxTimeToAction: 60, // Maximum time to action (minutes)\n  },\n\n  // Checkbox validation\n  checkboxes: {\n    minTotal: 30, // Minimum total checkboxes\n    maxTotal: 60, // Maximum total checkboxes\n    minFlash: 10, // Minimum Flash checkboxes (FLASH + BOTH)\n    minDetailed: 20, // Minimum Detailed checkboxes\n    minBoth: 8, // Minimum BOTH checkboxes\n    minRequired: 5, // Minimum required checkboxes\n    maxRequired: 15, // Maximum required checkboxes\n  },\n\n  // EBM validation\n  ebm: {\n    version: '2.0',\n    maxReviewAgeMonths: 12, // Guidelines should be <12 months old\n    brazilianGuidelineRequired: true, // Must have ≥1 Brazilian guideline\n    evidenceQuality: ['high', 'moderate'], // Minimum evidence quality\n    minReferences: 1, // Minimum number of references\n  },\n\n  // Flash template validation\n  flashTemplate: {\n    maxEstimatedTime: 5, // Maximum 5 minutes\n    minSections: 5, // QP, HDA, EF, HD, CD\n  },\n} as const\n\n// ============================================================================\n// VALIDATION FUNCTIONS\n// ============================================================================\n\n/**\n * Validate a guideline extraction result\n */\nexport function validateGuidelineExtraction(data: GuidelineExtraction): ValidationResult {\n  const errors: ValidationError[] = []\n  const warnings: ValidationWarning[] = []\n\n  // 1. Validate required fields\n  validateRequiredFields(data, errors)\n\n  // 2. Validate ICD-10 codes\n  validateICD10Codes(data.icd10Codes, errors, warnings)\n\n  // 3. Validate medications (RENAME)\n  validateMedications(data.medications, errors, warnings)\n\n  // 4. Validate red flags\n  validateRedFlags(data.redFlags, errors, warnings)\n\n  // 5. Validate checkboxes\n  validateCheckboxes(data.anamneseCheckboxes, errors, warnings)\n\n  // 6. Validate EBM references\n  validateEBMReferences(data.references, errors, warnings)\n\n  // 7. Validate Flash template\n  validateFlashTemplate(data.flashTemplate, errors, warnings)\n\n  // 8. Validate differential diagnosis\n  validateDifferentialDiagnosis(data.differentialDiagnosis, errors, warnings)\n\n  // Calculate score (0-100)\n  const score = calculateValidationScore(errors, warnings)\n\n  return {\n    passed: errors.length === 0,\n    errors,\n    warnings,\n    score,\n  }\n}\n\n/**\n * Validate required fields are present\n */\nfunction validateRequiredFields(data: GuidelineExtraction, errors: ValidationError[]): void {\n  if (!data.flashTemplate || !data.flashTemplate.acaoImediata) {\n    errors.push({\n      field: 'flashTemplate.acaoImediata',\n      message: 'Missing required field: Immediate action protocol (first 10 minutes)',\n      severity: 'critical',\n    })\n  }\n\n  if (!data.redFlags || data.redFlags.length === 0) {\n    errors.push({\n      field: 'redFlags',\n      message: 'Missing required field: Red flags array is empty',\n      severity: 'critical',\n    })\n  }\n\n  if (!data.medications || data.medications.length === 0) {\n    errors.push({\n      field: 'medications',\n      message: 'Missing required field: No medications specified',\n      severity: 'high',\n    })\n  }\n\n  if (!data.differentialDiagnosis || data.differentialDiagnosis.length < 3) {\n    errors.push({\n      field: 'differentialDiagnosis',\n      message: `Insufficient differential diagnoses: ${data.differentialDiagnosis?.length || 0} (minimum 3 required)`,\n      severity: 'high',\n    })\n  }\n}\n\n/**\n * Validate ICD-10 codes\n */\nfunction validateICD10Codes(\n  codes: string[],\n  errors: ValidationError[],\n  warnings: ValidationWarning[]\n): void {\n  if (!codes || codes.length === 0) {\n    errors.push({\n      field: 'icd10Codes',\n      message: 'No ICD-10 codes provided',\n      severity: 'critical',\n    })\n    return\n  }\n\n  const invalidCodes = codes.filter(code => !HIGH_RISK_VALIDATION_RULES.icd10.format.test(code))\n  if (invalidCodes.length > 0) {\n    errors.push({\n      field: 'icd10Codes',\n      message: `Invalid ICD-10 format: ${invalidCodes.join(', ')}`,\n      severity: 'high',\n    })\n  }\n\n  // Check for non-specific codes (ending in .9)\n  const nonSpecificCodes = codes.filter(code => code.endsWith('.9'))\n  if (nonSpecificCodes.length === codes.length) {\n    warnings.push({\n      field: 'icd10Codes',\n      message: `All ICD-10 codes are non-specific (ending in .9): ${nonSpecificCodes.join(', ')}`,\n      recommendation: 'Use more specific ICD-10 codes when possible',\n    })\n  }\n}\n\n/**\n * Validate medications are SUS/RENAME compatible\n */\nfunction validateMedications(\n  medications: MedicationRENAME[],\n  errors: ValidationError[],\n  warnings: ValidationWarning[]\n): void {\n  if (medications.length < HIGH_RISK_VALIDATION_RULES.medications.minCount) {\n    errors.push({\n      field: 'medications',\n      message: `Too few medications: ${medications.length} (minimum ${HIGH_RISK_VALIDATION_RULES.medications.minCount})`,\n      severity: 'high',\n    })\n  }\n\n  // Check SUS availability\n  const nonSUSMeds = medications.filter(m => !m.susAvailable)\n  if (nonSUSMeds.length > 0) {\n    errors.push({\n      field: 'medications',\n      message: `Non-SUS medications found: ${nonSUSMeds.map(m => m.genericName).join(', ')}`,\n      severity: 'critical',\n    })\n  }\n\n  // Check evidence level\n  const lowEvidenceMeds = medications.filter(\n    m => !HIGH_RISK_VALIDATION_RULES.medications.evidenceLevel.includes(m.evidenceLevel)\n  )\n  if (lowEvidenceMeds.length > 0) {\n    warnings.push({\n      field: 'medications',\n      message: `Medications with low evidence level (C/D): ${lowEvidenceMeds.map(m => `${m.genericName} (${m.evidenceLevel})`).join(', ')}`,\n      recommendation: 'Prefer medications with evidence level A or B',\n    })\n  }\n\n  // Check RENAME list\n  const unlistedMeds = medications.filter(m => m.susAvailable && !m.renameList)\n  if (unlistedMeds.length > 0) {\n    warnings.push({\n      field: 'medications',\n      message: `Medications without RENAME list classification: ${unlistedMeds.map(m => m.genericName).join(', ')}`,\n      recommendation: 'Specify RENAME list (A, B, or C) for all medications',\n    })\n  }\n}\n\n/**\n * Validate red flags\n */\nfunction validateRedFlags(\n  redFlags: RedFlagExtended[],\n  errors: ValidationError[],\n  warnings: ValidationWarning[]\n): void {\n  if (redFlags.length < HIGH_RISK_VALIDATION_RULES.redFlags.minCount) {\n    errors.push({\n      field: 'redFlags',\n      message: `Too few red flags: ${redFlags.length} (minimum ${HIGH_RISK_VALIDATION_RULES.redFlags.minCount})`,\n      severity: 'critical',\n    })\n  }\n\n  // Check for critical severity\n  const criticalFlags = redFlags.filter(rf => rf.severity === 'critical')\n  if (criticalFlags.length === 0) {\n    errors.push({\n      field: 'redFlags',\n      message: 'No critical red flags found (high-risk complaint must have ≥1)',\n      severity: 'critical',\n    })\n  }\n\n  // Check time to action\n  const slowRedFlags = redFlags.filter(\n    rf => rf.timeToAction && rf.timeToAction > HIGH_RISK_VALIDATION_RULES.redFlags.maxTimeToAction\n  )\n  if (slowRedFlags.length > 0) {\n    warnings.push({\n      field: 'redFlags',\n      message: `Red flags with slow time-to-action (>${HIGH_RISK_VALIDATION_RULES.redFlags.maxTimeToAction} min): ${slowRedFlags.map(rf => rf.description).join(', ')}`,\n      recommendation: 'Critical red flags should have time-to-action ≤60 minutes',\n    })\n  }\n\n  // Check immediate action is specified\n  const missingAction = redFlags.filter(rf => !rf.immediateAction || rf.immediateAction.trim().length < 10)\n  if (missingAction.length > 0) {\n    warnings.push({\n      field: 'redFlags',\n      message: `Red flags missing immediate action guidance: ${missingAction.length} flags`,\n      recommendation: 'All red flags should have clear immediate action instructions',\n    })\n  }\n}\n\n/**\n * Validate checkboxes\n */\nfunction validateCheckboxes(\n  checkboxes: AnamneseCheckbox[],\n  errors: ValidationError[],\n  warnings: ValidationWarning[]\n): void {\n  const counts = {\n    total: checkboxes.length,\n    flash: checkboxes.filter(c => c.section === 'FLASH').length,\n    detailed: checkboxes.filter(c => c.section === 'DETAILED').length,\n    both: checkboxes.filter(c => c.section === 'BOTH').length,\n    required: checkboxes.filter(c => c.isRequired).length,\n    redFlags: checkboxes.filter(c => c.isRedFlag).length,\n  }\n\n  const rules = HIGH_RISK_VALIDATION_RULES.checkboxes\n\n  // Total count validation\n  if (counts.total < rules.minTotal) {\n    errors.push({\n      field: 'anamneseCheckboxes',\n      message: `Too few checkboxes: ${counts.total} (minimum ${rules.minTotal})`,\n      severity: 'high',\n    })\n  }\n\n  if (counts.total > rules.maxTotal) {\n    warnings.push({\n      field: 'anamneseCheckboxes',\n      message: `Too many checkboxes: ${counts.total} (recommended maximum ${rules.maxTotal})`,\n      recommendation: 'Consider consolidating or removing less important checkboxes',\n    })\n  }\n\n  // Flash checkboxes validation\n  const flashTotal = counts.flash + counts.both\n  if (flashTotal < rules.minFlash) {\n    errors.push({\n      field: 'anamneseCheckboxes',\n      message: `Too few Flash checkboxes: ${flashTotal} (minimum ${rules.minFlash})`,\n      severity: 'high',\n    })\n  }\n\n  // BOTH checkboxes validation\n  if (counts.both < rules.minBoth) {\n    errors.push({\n      field: 'anamneseCheckboxes',\n      message: `Too few BOTH checkboxes: ${counts.both} (minimum ${rules.minBoth})`,\n      severity: 'medium',\n    })\n  }\n\n  // Required checkboxes validation\n  if (counts.required < rules.minRequired) {\n    warnings.push({\n      field: 'anamneseCheckboxes',\n      message: `Few required checkboxes: ${counts.required} (recommended minimum ${rules.minRequired})`,\n      recommendation: 'Mark more CFM-critical checkboxes as required',\n    })\n  }\n\n  if (counts.required > rules.maxRequired) {\n    warnings.push({\n      field: 'anamneseCheckboxes',\n      message: `Many required checkboxes: ${counts.required} (recommended maximum ${rules.maxRequired})`,\n      recommendation: 'Too many required fields may slow documentation',\n    })\n  }\n\n  // Category distribution validation\n  const categories = checkboxes.reduce((acc, cb) => {\n    acc[cb.category] = (acc[cb.category] || 0) + 1\n    return acc\n  }, {} as Record<string, number>)\n\n  const missingCategories = ['QP', 'HDA', 'ANTECEDENTES', 'EXAME_FISICO', 'NEGATIVAS'].filter(\n    cat => !categories[cat] || categories[cat] === 0\n  )\n\n  if (missingCategories.length > 0) {\n    errors.push({\n      field: 'anamneseCheckboxes',\n      message: `Missing checkboxes in required categories: ${missingCategories.join(', ')}`,\n      severity: 'high',\n    })\n  }\n}\n\n/**\n * Validate EBM references\n */\nfunction validateEBMReferences(\n  references: EBMReference[],\n  errors: ValidationError[],\n  warnings: ValidationWarning[]\n): void {\n  if (references.length < HIGH_RISK_VALIDATION_RULES.ebm.minReferences) {\n    errors.push({\n      field: 'references',\n      message: `Too few references: ${references.length} (minimum ${HIGH_RISK_VALIDATION_RULES.ebm.minReferences})`,\n      severity: 'high',\n    })\n  }\n\n  // Check for Brazilian guidelines\n  const brazilianRefs = references.filter(r =>\n    ['sbc', 'sbpt', 'amb', 'ms', 'sbim', 'sbn'].includes(r.source)\n  )\n\n  if (HIGH_RISK_VALIDATION_RULES.ebm.brazilianGuidelineRequired && brazilianRefs.length === 0) {\n    errors.push({\n      field: 'references',\n      message: 'No Brazilian guideline references found (SBC, SBPT, AMB, MS, etc.)',\n      severity: 'critical',\n    })\n  }\n\n  // Check reference age\n  const currentYear = new Date().getFullYear()\n  const oldRefs = references.filter(\n    r => currentYear - r.year > HIGH_RISK_VALIDATION_RULES.ebm.maxReviewAgeMonths / 12\n  )\n\n  if (oldRefs.length > 0) {\n    warnings.push({\n      field: 'references',\n      message: `Outdated references (>${HIGH_RISK_VALIDATION_RULES.ebm.maxReviewAgeMonths / 12} years old): ${oldRefs.map(r => `${r.title} (${r.year})`).join(', ')}`,\n      recommendation: 'Use more recent guidelines when available',\n    })\n  }\n\n  // Check evidence quality\n  const lowQualityRefs = references.filter(\n    r => r.evidenceQuality && !HIGH_RISK_VALIDATION_RULES.ebm.evidenceQuality.includes(r.evidenceQuality)\n  )\n\n  if (lowQualityRefs.length > 0) {\n    warnings.push({\n      field: 'references',\n      message: `References with low evidence quality: ${lowQualityRefs.length}`,\n      recommendation: 'Prefer high or moderate quality evidence',\n    })\n  }\n}\n\n/**\n * Validate Flash template\n */\nfunction validateFlashTemplate(\n  flashTemplate: any,\n  errors: ValidationError[],\n  warnings: ValidationWarning[]\n): void {\n  if (flashTemplate.tempoEstimado > HIGH_RISK_VALIDATION_RULES.flashTemplate.maxEstimatedTime) {\n    warnings.push({\n      field: 'flashTemplate.tempoEstimado',\n      message: `Flash template estimated time too high: ${flashTemplate.tempoEstimado} min (recommended ≤${HIGH_RISK_VALIDATION_RULES.flashTemplate.maxEstimatedTime})`,\n      recommendation: 'Flash templates should be completable in ≤5 minutes',\n    })\n  }\n\n  // Check required sections\n  const requiredSections = ['qp', 'hda', 'ef', 'hd', 'conduta']\n  const missingSections = requiredSections.filter(section => !flashTemplate[section] || flashTemplate[section].trim().length < 10)\n\n  if (missingSections.length > 0) {\n    errors.push({\n      field: 'flashTemplate',\n      message: `Missing or incomplete Flash template sections: ${missingSections.join(', ')}`,\n      severity: 'critical',\n    })\n  }\n}\n\n/**\n * Validate differential diagnosis\n */\nfunction validateDifferentialDiagnosis(\n  differentialDiagnosis: any[],\n  errors: ValidationError[],\n  warnings: ValidationWarning[]\n): void {\n  if (differentialDiagnosis.length < 3) {\n    errors.push({\n      field: 'differentialDiagnosis',\n      message: `Too few differential diagnoses: ${differentialDiagnosis.length} (minimum 3)`,\n      severity: 'high',\n    })\n  }\n\n  // Check for \"must not miss\" diagnoses\n  const mustNotMiss = differentialDiagnosis.filter(dd => dd.mustNotMiss)\n  if (mustNotMiss.length === 0) {\n    warnings.push({\n      field: 'differentialDiagnosis',\n      message: 'No \"must not miss\" diagnoses identified',\n      recommendation: 'Mark critical differential diagnoses as mustNotMiss',\n    })\n  }\n\n  // Check ICD-10 codes\n  const invalidICD10 = differentialDiagnosis.filter(\n    dd => !HIGH_RISK_VALIDATION_RULES.icd10.format.test(dd.icd10)\n  )\n\n  if (invalidICD10.length > 0) {\n    errors.push({\n      field: 'differentialDiagnosis',\n      message: `Invalid ICD-10 codes in differential diagnoses: ${invalidICD10.map(dd => `${dd.condition} (${dd.icd10})`).join(', ')}`,\n      severity: 'medium',\n    })\n  }\n}\n\n/**\n * Calculate validation score (0-100)\n */\nfunction calculateValidationScore(errors: ValidationError[], warnings: ValidationWarning[]): number {\n  let score = 100\n\n  // Deduct points for errors\n  errors.forEach(error => {\n    switch (error.severity) {\n      case 'critical':\n        score -= 20\n        break\n      case 'high':\n        score -= 10\n        break\n      case 'medium':\n        score -= 5\n        break\n    }\n  })\n\n  // Deduct points for warnings\n  score -= warnings.length * 2\n\n  return Math.max(0, score)\n}\n\n// ============================================================================\n// REPORTING FUNCTIONS\n// ============================================================================\n\n/**\n * Format validation result as a report\n */\nexport function formatValidationReport(\n  complaintId: string,\n  result: ValidationResult\n): string {\n  const statusEmoji = result.passed ? '✅' : '❌'\n  const scoreColor = result.score >= 90 ? '🟢' : result.score >= 70 ? '🟡' : '🔴'\n\n  let report = `\n┌─────────────────────────────────────────────────────────────┐\n│          VALIDATION REPORT: ${complaintId.padEnd(30)}│\n└─────────────────────────────────────────────────────────────┘\n\n${statusEmoji} STATUS: ${result.passed ? 'PASSED' : 'FAILED'}\n${scoreColor} SCORE: ${result.score}/100\n\n`\n\n  // Errors\n  if (result.errors.length > 0) {\n    report += `❌ ERRORS (${result.errors.length})\\n`\n    result.errors.forEach((error, index) => {\n      const severityBadge = error.severity === 'critical' ? '🔴' : error.severity === 'high' ? '🟠' : '🟡'\n      report += `${index + 1}. ${severityBadge} [${error.field}] ${error.message}\\n`\n    })\n    report += '\\n'\n  } else {\n    report += `✅ ERRORS (0)\\n\\n`\n  }\n\n  // Warnings\n  if (result.warnings.length > 0) {\n    report += `⚠️  WARNINGS (${result.warnings.length})\\n`\n    result.warnings.forEach((warning, index) => {\n      report += `${index + 1}. ⚠️  [${warning.field}] ${warning.message}\\n`\n      if (warning.recommendation) {\n        report += `   💡 Recommendation: ${warning.recommendation}\\n`\n      }\n    })\n    report += '\\n'\n  } else {\n    report += `✅ WARNINGS (0)\\n\\n`\n  }\n\n  report += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\\n`\n  report += result.passed\n    ? `STATUS: READY FOR SYNC ✅\\n`\n    : `STATUS: NEEDS FIXES BEFORE SYNC ❌\\n`\n  report += `━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\\n`\n\n  return report\n}\n\n// ============================================================================\n// CLI INTERFACE (for npm run validate:high-risk)\n// ============================================================================\n\n/**\n * Main validation CLI function\n */\nexport async function main() {\n  console.log('🔍 High-Risk Complaint Validation Tool\\n')\n\n  // Parse CLI arguments\n  const args = process.argv.slice(2)\n  const complaintFlag = args.indexOf('--complaint')\n  const specificComplaint = complaintFlag !== -1 ? args[complaintFlag + 1] : null\n\n  // TODO: Implement file reading and validation\n  // For now, this is a placeholder structure\n\n  console.log('✅ Validation complete!\\n')\n}\n\n// Run if called directly\nif (require.main === module) {\n  main().catch(console.error)\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/src/components/ui/ResponsiveContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/src/hooks/useMediaQuery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/src/hooks/useWindowSize.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/stores/anamnese-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/stores/auth-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/stores/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/stores/patient-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/stores/ui-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/test-db-connection.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":9,"column":3,"nodeType":"MemberExpression","messageId":"limited","endLine":9,"endColumn":14,"suggestions":[{"fix":{"range":[204,313],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":12,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":12,"endColumn":16,"suggestions":[{"fix":{"range":[354,393],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":14,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":14,"endColumn":16,"suggestions":[{"fix":{"range":[481,527],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { Client } = require('pg');\nrequire('dotenv').config();\n\nconst client = new Client({\n  connectionString: process.env.DIRECT_URL || process.env.DATABASE_URL,\n});\n\nasync function testConnection() {\n  console.log('Attempting to connect to:', (process.env.DIRECT_URL || process.env.DATABASE_URL).split('@')[1]);\n  try {\n    await client.connect();\n    console.log('Connected successfully!');\n    const res = await client.query('SELECT current_database(), current_schema()');\n    console.log('Database context:', res.rows[0]);\n    await client.end();\n  } catch (err) {\n    console.error('Connection error:', err.message);\n    process.exit(1);\n  }\n}\n\ntestConnection();\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/e2e/anamnese.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":29,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":34,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":74},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":38,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":80},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":42,"column":63,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":46,"column":82,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":86},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":50,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":69},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":54,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test'\n\ntest.describe('Anamnese Flow (Public Access Check)', () => {\n  test('should redirect unauthenticated user from anamnese page', async ({ page }) => {\n    // Use waitUntil: 'commit' for faster response on redirect\n    await page.goto('/anamnese/CHEST_PAIN', { waitUntil: 'commit' })\n\n    // Should redirect to login since anamnese requires authentication\n    // Wait for URL to change to login page\n    await expect(page).toHaveURL(/login/, { timeout: 30000 })\n  })\n\n  test('should redirect unauthenticated user from dashboard', async ({ page }) => {\n    await page.goto('/dashboard', { waitUntil: 'commit' })\n\n    await expect(page).toHaveURL(/login/, { timeout: 30000 })\n  })\n\n  test('should redirect unauthenticated user from history', async ({ page }) => {\n    await page.goto('/history', { waitUntil: 'commit' })\n\n    await expect(page).toHaveURL(/login/, { timeout: 30000 })\n  })\n})\n\n// Tests that require authentication would be structured like this\n// These would need proper test fixtures with authenticated sessions\ntest.describe('Anamnese Flow (Authenticated)', () => {\n  test.skip('should display syndrome selection page', async ({ page }) => {\n    // TODO: Implement authenticated test\n    // This test needs a proper auth fixture\n  })\n\n  test.skip('should show checkboxes for selected syndrome', async ({ page }) => {\n    // TODO: Implement authenticated test\n  })\n\n  test.skip('should generate narrative when checkboxes selected', async ({ page }) => {\n    // TODO: Implement authenticated test\n  })\n\n  test.skip('should detect red flags automatically', async ({ page }) => {\n    // TODO: Implement authenticated test\n  })\n\n  test.skip('should allow switching between summary and detailed mode', async ({ page }) => {\n    // TODO: Implement authenticated test\n  })\n\n  test.skip('should copy generated text to clipboard', async ({ page }) => {\n    // TODO: Implement authenticated test\n  })\n\n  test.skip('should save session to history', async ({ page }) => {\n    // TODO: Implement authenticated test\n  })\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/e2e/auth.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/e2e/chat.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":24,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":32,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":36,"column":71,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":40,"column":63,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":44,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":48,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":82}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test'\n\ntest.describe('Chat EBM Flow (Public Access Check)', () => {\n  test('should redirect unauthenticated user from chat page', async ({ page }) => {\n    await page.goto('/chat', { waitUntil: 'commit' })\n\n    // Should redirect to login since chat requires authentication\n    await expect(page).toHaveURL(/login/, { timeout: 30000 })\n  })\n\n  test('should redirect unauthenticated user from chat conversation', async ({ page }) => {\n    await page.goto('/chat/some-id', { waitUntil: 'commit' })\n\n    await expect(page).toHaveURL(/login/, { timeout: 30000 })\n  })\n})\n\n// Tests that require authentication\ntest.describe('Chat EBM Flow (Authenticated)', () => {\n  test.skip('should display chat list page', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n\n  test.skip('should create new conversation', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n\n  test.skip('should display medical disclaimer', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n\n  test.skip('should send message and receive response', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n\n  test.skip('should show typing indicator during streaming', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n\n  test.skip('should display citations when present', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n\n  test.skip('should delete conversation', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n\n  test.skip('should show context banner when linked from anamnese', async ({ page }) => {\n    // TODO: Implement with auth fixture\n  })\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/e2e/home.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/unit/citations.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/unit/context.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/unit/generate-narrative.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'OutputMode' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'vitest'\nimport {\n  generateNarrative,\n  detectRedFlags,\n  formatRedFlagAlert,\n  type OutputMode,\n} from '@/lib/anamnese/generate-narrative'\nimport type { CheckboxCategory } from '@prisma/client'\n\n// Test data factory\nconst createCheckbox = (\n  overrides: Partial<{\n    id: string\n    category: CheckboxCategory\n    displayText: string\n    narrativeText: string\n    isRedFlag: boolean\n    isNegative: boolean\n  }> = {}\n) => ({\n  id: overrides.id || 'cb-1',\n  category: overrides.category || 'QP',\n  displayText: overrides.displayText || 'Test symptom',\n  narrativeText: overrides.narrativeText || 'test narrative text',\n  isRedFlag: overrides.isRedFlag || false,\n  isNegative: overrides.isNegative || false,\n})\n\ndescribe('generateNarrative', () => {\n  describe('empty input', () => {\n    it('should return empty string when no checkboxes selected', () => {\n      const result = generateNarrative([], 'SUMMARY')\n      expect(result).toBe('')\n    })\n  })\n\n  describe('SUMMARY mode', () => {\n    it('should generate summary text for single QP checkbox', () => {\n      const checkboxes = [\n        createCheckbox({\n          category: 'QP',\n          narrativeText: 'dor precordial',\n        }),\n      ]\n\n      const result = generateNarrative(checkboxes, 'SUMMARY')\n\n      expect(result).toContain('Paciente refere')\n      expect(result).toContain('dor precordial')\n    })\n\n    it('should join multiple checkboxes with comma in same category', () => {\n      const checkboxes = [\n        createCheckbox({\n          id: 'cb-1',\n          category: 'QP',\n          narrativeText: 'dor precordial',\n        }),\n        createCheckbox({\n          id: 'cb-2',\n          category: 'QP',\n          narrativeText: 'irradiacao para MSE',\n        }),\n      ]\n\n      const result = generateNarrative(checkboxes, 'SUMMARY')\n\n      expect(result).toContain('dor precordial')\n      expect(result).toContain('irradiacao para MSE')\n    })\n\n    it('should generate text for multiple categories', () => {\n      const checkboxes = [\n        createCheckbox({\n          id: 'cb-1',\n          category: 'QP',\n          narrativeText: 'dor precordial',\n        }),\n        createCheckbox({\n          id: 'cb-2',\n          category: 'ANTECEDENTES',\n          narrativeText: 'hipertensao arterial',\n        }),\n      ]\n\n      const result = generateNarrative(checkboxes, 'SUMMARY')\n\n      expect(result).toContain('dor precordial')\n      expect(result).toContain('hipertensao arterial')\n    })\n\n    it('should handle NEGATIVAS category with proper prefix', () => {\n      const checkboxes = [\n        createCheckbox({\n          category: 'NEGATIVAS',\n          narrativeText: 'dispneia',\n          isNegative: true,\n        }),\n      ]\n\n      const result = generateNarrative(checkboxes, 'SUMMARY')\n\n      expect(result).toContain('Nega')\n      expect(result).toContain('dispneia')\n    })\n  })\n\n  describe('DETAILED mode', () => {\n    it('should include section headers in detailed mode', () => {\n      const checkboxes = [\n        createCheckbox({\n          category: 'QP',\n          narrativeText: 'dor precordial',\n        }),\n      ]\n\n      const result = generateNarrative(checkboxes, 'DETAILED')\n\n      expect(result).toContain('**QUEIXA PRINCIPAL:**')\n      expect(result).toContain('dor precordial')\n    })\n\n    it('should separate sections with double newlines', () => {\n      const checkboxes = [\n        createCheckbox({\n          id: 'cb-1',\n          category: 'QP',\n          narrativeText: 'dor precordial',\n        }),\n        createCheckbox({\n          id: 'cb-2',\n          category: 'HDA',\n          narrativeText: 'inicio subito',\n        }),\n      ]\n\n      const result = generateNarrative(checkboxes, 'DETAILED')\n\n      expect(result).toContain('**QUEIXA PRINCIPAL:**')\n      expect(result).toContain('**HISTORIA DA DOENCA ATUAL:**')\n      expect(result).toContain('\\n\\n')\n    })\n  })\n\n  describe('category ordering', () => {\n    it('should order categories correctly: QP -> HDA -> ANTECEDENTES', () => {\n      const checkboxes = [\n        createCheckbox({\n          id: 'cb-1',\n          category: 'ANTECEDENTES',\n          narrativeText: 'antecedente text',\n        }),\n        createCheckbox({\n          id: 'cb-2',\n          category: 'QP',\n          narrativeText: 'qp text',\n        }),\n        createCheckbox({\n          id: 'cb-3',\n          category: 'HDA',\n          narrativeText: 'hda text',\n        }),\n      ]\n\n      const result = generateNarrative(checkboxes, 'DETAILED')\n\n      const qpIndex = result.indexOf('QUEIXA PRINCIPAL')\n      const hdaIndex = result.indexOf('HISTORIA DA DOENCA ATUAL')\n      const antecedentesIndex = result.indexOf('ANTECEDENTES PESSOAIS')\n\n      expect(qpIndex).toBeLessThan(hdaIndex)\n      expect(hdaIndex).toBeLessThan(antecedentesIndex)\n    })\n  })\n})\n\ndescribe('detectRedFlags', () => {\n  it('should return empty array when no red flags', () => {\n    const checkboxes = [\n      createCheckbox({ isRedFlag: false }),\n    ]\n\n    const result = detectRedFlags(checkboxes)\n\n    expect(result).toHaveLength(0)\n  })\n\n  it('should return checkboxes marked as red flags', () => {\n    const checkboxes = [\n      createCheckbox({ id: 'cb-1', isRedFlag: true, displayText: 'Red flag 1' }),\n      createCheckbox({ id: 'cb-2', isRedFlag: false, displayText: 'Normal' }),\n      createCheckbox({ id: 'cb-3', isRedFlag: true, displayText: 'Red flag 2' }),\n    ]\n\n    const result = detectRedFlags(checkboxes)\n\n    expect(result).toHaveLength(2)\n    expect(result[0]?.displayText).toBe('Red flag 1')\n    expect(result[1]?.displayText).toBe('Red flag 2')\n  })\n})\n\ndescribe('formatRedFlagAlert', () => {\n  it('should return empty string when no red flags', () => {\n    const result = formatRedFlagAlert([])\n\n    expect(result).toBe('')\n  })\n\n  it('should format red flags as alert message', () => {\n    const redFlags = [\n      createCheckbox({ displayText: 'Dor precordial intensa' }),\n      createCheckbox({ displayText: 'Irradiacao para MSE' }),\n    ]\n\n    const result = formatRedFlagAlert(redFlags)\n\n    expect(result).toContain('SINAIS DE ALARME')\n    expect(result).toContain('Dor precordial intensa')\n    expect(result).toContain('Irradiacao para MSE')\n  })\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/tests/unit/guardrails.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/types/api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/types/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/types/chat-input.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/wesleywillian/Oficial/Oficial/types/medical.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]